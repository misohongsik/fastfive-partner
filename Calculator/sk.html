<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SK κ²°ν•© ν• μΈ κ³„μ‚°κΈ°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* CSS from sk_styles.css */
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; /* slate-50 */ }
        .input-group { margin-bottom: 1.5rem; }
        .input-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #334155; /* slate-700 */ }
        .input-field, .select-field { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #cbd5e1; /* slate-300 */ border-radius: 0.375rem; box-shadow: sm; transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }
        .input-field:focus, .select-field:focus { border-color: #ef4444; /* red-500 */ outline: none; box-shadow: 0 0 0 0.2rem rgba(239, 68, 68, 0.25); } /* SK Red focus */
        .select-field:disabled, .input-field:disabled { background-color: #e9e9e9; /* Slightly darker gray for disabled */ cursor: not-allowed; opacity: 0.7; }
        .btn-primary { background-color: #ef4444; /* red-500 */ color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-primary:hover { background-color: #dc2626; /* red-600 */ }
        .btn-primary:disabled { background-color: #f87171; cursor: not-allowed; }
        .btn-secondary { background-color: #f97316; /* orange-500 */ color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500; transition: background-color 0.3s ease; }
        .btn-secondary:hover { background-color: #ea580c; /* orange-600 */ }
        .section-title { font-size: 1.5rem; font-weight: 700; color: #c2410c; /* orange-700 */ margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #fb923c /* orange-400 */;}
        .result-card { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1.5rem; }
        .result-label { color: #475569; /* slate-600 */ }
        .result-value { color: #1e293b; /* slate-800 */ font-weight: 600;}
        .total-value { color: #ef4444; /* red-500 */ font-size: 1.5rem; font-weight: 700;}
        .mobile-line-item { border: 1px solid #e2e8f0; /* slate-200 */ padding: 1rem; border-radius: 0.375rem; margin-bottom: 0.75rem; }
        .radio-label { margin-right: 1rem; margin-bottom: 0.5rem; display: inline-flex; align-items: center; cursor: pointer;}
        .radio-input { margin-right: 0.5rem; accent-color: #ef4444; /* red-500 */ }
        .info-box { background-color: #fff7ed; /* orange-50 */ border-left: 4px solid #f97316; /* orange-500 */ padding: 1rem; margin-top:0.5rem; margin-bottom:1rem; font-size: 0.875rem; color: #9a3412; /* orange-800 */}
        .info-box ul { padding-left: 1.25rem; list-style-type: disc; }
        .info-box ul ul { padding-left: 1rem; list-style-type: circle;}
        .sensitive-info-box { background-color: #fffbeb; /* yellow-50 */ border-left: 4px solid #f59e0b; /* yellow-500 */ padding: 1rem; margin-bottom: 1.5rem; font-size: 0.875rem; color: #b45309; /* yellow-700 */}
        .sensitive-info-box a { color: #0ea5e9; /* sky-500 */ text-decoration: underline;}
        .sensitive-info-box a:hover { color: #0284c7; /* sky-600 */}
        .toggle-switch { position: relative; display: inline-block; width: 40px; height: 20px; margin-left: 10px; vertical-align: middle;}
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px;}
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%;}
        input:checked + .slider { background-color: #ef4444; /* red-500 */ }
        input:checked + .slider:before { transform: translateX(20px); }
        .discount-details { background-color: #ffe4e6; border: 1px solid #ffb3b3; padding: 1rem; border-radius: 0.375rem; font-size:0.875rem; } /* Light red for SKT */
        .discount-details ul { padding-left: 1.25rem; list-style-type: disc; margin-bottom: 0.75rem;}
        .discount-details ul ul { padding-left: 1rem; list-style-type: circle;}
        .discount-details h4 { font-weight: 600; margin-top: 0.75rem; margin-bottom: 0.25rem; color: #be123c; /* Darker red for subheadings */ }
        .discount-details strong { color: #dc2626; /* SKT Red for emphasis */ }
        .summary-item { margin-bottom: 0.25rem; }
        .message-script-area { width: 100%; min-height: 150px; padding: 0.5rem; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-size: 0.875rem; white-space: pre-wrap; word-wrap: break-word; }
        .copy-button-container { text-align: right; margin-top: 0.5rem; }
        .copy-feedback { font-size: 0.75rem; color: green; margin-left: 0.5rem; }
        .cost-qualifier {font-size: 0.875rem; color: #475569; margin-left: 0.25rem;}
    </style>
</head>
<body class="text-slate-800">
    <header class="bg-red-600 text-white p-6 shadow-md">
        <div class="container mx-auto max-w-4xl">
            <h1 class="text-3xl font-bold text-center">SK κ²°ν•© ν• μΈ κ³„μ‚°κΈ°</h1>
            <p class="text-center text-red-200 mt-1">μ„ νƒν•μ‹  μ„λΉ„μ¤μ™€ ν• μΈ μ ν•μ— λ”°λ¥Έ μμƒ μ”κΈμ„ κ³„μ‚°ν•΄ λ³΄μ„Έμ”.</p>
        </div>
    </header>

    <main class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <section id="inputSection" class="mb-8">
            <div class="flex justify-between items-center">
                <h2 class="section-title">1. μ„λΉ„μ¤ μ„ νƒ (3λ…„ μ•½μ • κΈ°μ¤€)</h2>
                <div class="flex items-center">
                    <span class="text-sm font-medium text-slate-700 mr-2">VAT λ³„λ„</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="vatToggle">
                        <span class="slider"></span>
                    </label>
                    <span class="text-sm font-medium text-slate-700 ml-2">VAT ν¬ν•¨</span>
                </div>
            </div>
            
            <div class="sensitive-info-box">
                <p class="font-semibold text-yellow-800">β οΈ λ―Όκ°μ •λ³΄</p>
                <p class="mt-1">
                    <a href="https://sk-sensitiveinfo.com/" target="_blank">https://sk-sensitiveinfo.com/</a>
                </p>
                <p class="mt-1">γ„΄&gt; μ„ λ§ν¬λ¥Ό κ³ κ°μ—κ² λ¬Έμλ΅ μ „μ†΅ν•΄μ£Όμ„Έμ”. (μ•„λ μ¤ν¬λ¦½νΈ λ³µμ‚¬ κΈ°λ¥ μ΄μ©)</p>
                <p class="mt-2">
                    μ°Έκ³  μ¤ν”„λ λ“μ‹νΈ: <a href="https://docs.google.com/spreadsheets/d/10d21RrhIPBiJr7RZIHnk0h1dB4GvTEcHCuXSyFYw1M4/edit?gid=0#gid=0" target="_blank">λ°”λ΅κ°€κΈ°</a>
                </p>
            </div>

            <div class="input-group">
                <label class="input-label">μΈν„°λ„· μ ν• μ„ νƒ</label>
                <div class="flex items-center space-x-4">
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="bundle" class="radio-input" checked> μΈν„°λ„· + TV λ²λ“¤
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="standalone" class="radio-input"> μΈν„°λ„· λ‹¨λ…
                    </label>
                </div>
            </div>

            <p class="mb-6 text-sm text-slate-600">μ•„λ ν•­λ©λ“¤μ„ μ„ νƒν•κ±°λ‚ μ…λ ¥ν•΄μ£Όμ„Έμ”. λ¨λ“  μ”κΈμ€ SKλΈλ΅λ“λ°΄λ“/SKν…”λ μ½¤ ν‘μ¤€ 3λ…„ μ•½μ • κΈ°μ¤€μ…λ‹λ‹¤.</p>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="input-group">
                    <label for="internetPlan" class="input-label">SKB μΈν„°λ„· μ”κΈμ </label>
                    <select id="internetPlan" class="select-field">
                        </select>
                </div>
                
                <div class="input-group">
                    <label for="wifiRouter" class="input-label block mb-1">μ™€μ΄νμ΄ κ³µμ κΈ° (μ„ νƒ)</label>
                    <select id="wifiRouter" class="select-field">
                        </select>
                </div>

                <div class="input-group">
                    <label for="tvPlan" class="input-label">B tv μ”κΈμ  (1λ²μ§Έ TV)</label>
                    <select id="tvPlan" class="select-field">
                        </select>
                </div>

                <div class="input-group">
                    <label for="tvStb" class="input-label">AI/νΉμ μ…‹ν†±λ°•μ¤ μ¶”κ°€ (μ„ νƒ)</label>
                    <select id="tvStb" class="select-field">
                        <option value="none" data-price="0">μ„ νƒ μ•ν•¨ (κΈ°λ³Έμ…‹ν†± μ‚¬μ©)</option>
                    </select>
                   <p class="text-xs text-slate-500 mt-1">TV μ”κΈμ μ— κΈ°λ³Έ μ…‹ν†±(μ: μ¤λ§νΈ3)μ΄ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. Apple TV λ“± νΉμ μ…‹ν†±μΌλ΅ λ³€κ²½ λλ” μ¶”κ°€ μ‹ μ„ νƒν•©λ‹λ‹¤.</p>
                </div>

                <div class="input-group">
                    <label for="additionalTvPlan" class="input-label">μ¶”κ°€ TV μ„ νƒ (2λ²μ§Έ TV)</label>
                    <select id="additionalTvPlan" class="select-field">
                        </select>
                </div>
                
                <div class="input-group">
                    <label for="phonePlan" class="input-label">μ§‘μ „ν™” μ”κΈμ </label>
                    <select id="phonePlan" class="select-field">
                        </select>
                </div>
            </div>
            
            <div class="input-group mt-6 hidden" id="onGajokYearsGroup">
                <label for="onGajokYears" class="input-label">κ°€μ΅± μ΄ μ‚¬μ© μ—°μ (μ¨κ°€μ΅± ν• μΈμ©)</label>
                <select id="onGajokYears" class="select-field">
                    <option value="0_9">10λ…„ λ―Έλ§</option>
                    <option value="10_19">10λ…„ μ΄μƒ ~ 20λ…„ λ―Έλ§</option>
                    <option value="20_29">20λ…„ μ΄μƒ ~ 30λ…„ λ―Έλ§</option>
                    <option value="30_plus">30λ…„ μ΄μƒ</option>
                </select>
            </div>
            
            <div class="input-group mt-6 hidden" id="internetUsageYearsGroup">
                <label for="internetUsageYears" class="input-label">μΈν„°λ„· μ‚¬μ© κΈ°κ°„ (μ¨κ°€μ΅± ν• μΈμ©)</label>
                <select id="internetUsageYears" class="select-field">
                    <option value="0_1">1λ…„ λ―Έλ§</option>
                    <option value="1_2">1λ…„ μ΄μƒ ~ 2λ…„ λ―Έλ§</option>
                    <option value="2_3">2λ…„ μ΄μƒ ~ 3λ…„ λ―Έλ§</option>
                    <option value="3_plus" selected>3λ…„ μ΄μƒ</option>
                </select>
                <p class="text-xs text-slate-500 mt-1">(κΈ°μ΅΄ SK μΈν„°λ„· μ‚¬μ© κΈ°κ°„μ΄ μλ‹¤λ©΄ ν•©μ‚°ν•μ—¬ μ„ νƒν•μ„Έμ”)</p>
            </div>
        </section>

        <section id="discountTypeSection" class="mb-8">
            <h2 class="section-title">2. κ²°ν•© ν• μΈ μ ν• μ„ νƒ</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <p class="mb-4 text-sm text-slate-600">κ°€μ¥ μ λ¦¬ν• ν• μΈ μ ν•μ„ μ„ νƒν•κ±°λ‚, κ° μ ν•λ³„ μμƒ μ”κΈμ„ λΉ„κµν•΄λ³΄μ„Έμ”.</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2">
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="noBundleDiscount" class="radio-input" checked> κ²°ν•© ν• μΈ μ—†μ</label>
                        </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="μ”μ¦κ°€μ΅±κ²°ν•©" class="radio-input"> μ”μ¦κ°€μ΅±κ²°ν•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="yozoomGajokDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="μ¨κ°€μ΅±ν• μΈ" class="radio-input"> μ¨κ°€μ΅±ν• μΈ</label>
                        <label class="toggle-switch"><input type="checkbox" id="onGajokDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="ν¨λ°€λ¦¬κ²°ν•©" class="radio-input"> ν¨λ°€λ¦¬κ²°ν•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="familySktDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="μ•λ°ν• κ²°ν•©" class="radio-input"> μ•λ°ν• κ²°ν•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="mvnoSktDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                </div>
                <div class="input-group mt-6">
                    <label class="input-label">κ²°ν•© μ μ© μ‹μ  (μ›” μ²­κµ¬μ”κΈ ν‘μ‹ λ°©μ‹)</label>
                    <div class="space-y-2">
                        <label class="radio-label">
                            <input type="radio" name="bundleApplicationTime" value="pre" class="radio-input" checked> μ„ κ²°ν•© (μ›” μ²­κµ¬μ•΅μ— ν• μΈ μ¦‰μ‹ λ°μ)
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="bundleApplicationTime" value="post" class="radio-input"> ν›„κ²°ν•© (μ›” μ²­κµ¬μ•΅μ— ν• μΈ λ―Έλ°μ, μ¶”ν›„ μ μ©)
                        </label>
                    </div>
                    <p class="text-xs text-slate-500 mt-1">ν›„κ²°ν•© μ„ νƒ μ‹, μµμΆ… μ›” λ‚©λ¶€μ•΅μ€ ν• μΈ μ „ κΈμ•΅μΌλ΅ ν‘μ‹λλ©°, μ‹¤μ  μ μ©λ  ν• μΈμ•΅μ€ λ³„λ„λ΅ μ•λ‚΄λ©λ‹λ‹¤.</p>
                </div>

                <div id="yozoomGajokDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ”μ¦κ°€μ΅±κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ: <span id="detailYgInternetDiscount" class="font-bold">0</span>μ› <span id="detailYgInternetType" class="text-xs"></span></p>
                    <p>ν΄λ€ν° μ΄ ν• μΈ (μ°Έκ³ μ©): <span id="detailYgMobileDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-red-300">
                    
                    <div class="copy-button-container !mb-2">
                        <button onclick="copySectionToClipboard('yozoomCopyContent', 'copyFeedbackYozoom')" class="btn-secondary text-xs !py-1 !px-2">μƒμ„Έ μ •λ³΄ λ³µμ‚¬</button>
                        <span id="copyFeedbackYozoom" class="copy-feedback"></span>
                    </div>

                    <div id="yozoomCopyContent" class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details space-y-3">
                        <div>
                            <h4>μ£Όμ” νΉμ§•</h4>
                            <ul>
                                <li><strong>μµλ€ νμ„ :</strong> μΈν„°λ„· 2νμ„  + λ¨λ°”μΌ 5νμ„ </li>
                                <li><strong>μ‹ μ²­ λ°©μ‹:</strong> μ„ κ²°ν•©</li>
                                <li><strong>ν•µμ‹¬ μ΅°κ±΄:</strong> μΈν„°λ„· λ…μμ + λ™μΌλ…μ ν΄λ€ν° 1λ€ ν•„μ</li>
                                <li>μΈν„°λ„· μµλ€ 2νμ„  + λ¨λ°”μΌ 5νμ„  κ²°ν•© μ‹, κ°κ°μ λ…μμ λ° μ¥μ†κ°€ λ‹¬λΌλ„ κ°€λ¥ν•©λ‹λ‹¤.</li>
                                <li>μΈν„°λ„· νμ„ μ„ μ¶”κ°€ κ²°ν•©ν•κΈ° μ„ν•΄μ„λ”, λ°λ“μ‹ λ¨λ°”μΌ νμ„  λ…μμκ°€ κ²°ν•© κµ¬μ„±μ›μ— ν¬ν•¨λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.</li>
                            </ul>
                        </div>
                        <div>
                            <h4>λ™κ±°μΈ νΉλ³„ κ·μ • (1μΈ ν•μ •)</h4>
                            <ul>
                                <li>κ²°ν•© λ€ν‘μ κΈ°μ¤€ μ£Όλ―Όλ“±λ΅μƒ λ™μΌ μ£Όμ†μ— κ±°μ£Όν•λ” λ™κ±°μΈ 1μΈμ— ν•ν•΄ κ°€μ΅± ν• μΈ λ€μƒμΌλ΅ μΈμ •λ©λ‹λ‹¤.</li>
                                <li><strong>μ μ© μμ‹:</strong> λ³ΈμΈ λ…μ μΈν„°λ„· 1νμ„  + λ¨λ°”μΌ 1νμ„ μΌλ΅ κ²°ν•© κ°€λ¥, μλΉ„ λ¶€λ¶€, λ™κ±°λ¶€λ¶€, μΉκµ¬ λ“± λ“±λ³Έμƒ λ™κ±°μΈ ν¬ν•¨ κ°€λ¥</li>
                            </ul>
                        </div>
                        <div>
                            <h4>μƒν™©λ³„ μ‹λ‚λ¦¬μ¤ μμ‹</h4>
                            <ul>
                                <li><strong>Case 1 (μΈν„°λ„·λ§ μ¶”κ°€):</strong> μ•„λ²„μ§€ λ…μλ΅ SK μΈν„°λ„·λ§ μ¶”κ°€ μ‹ β†’ ν¨λ°€λ¦¬ κ²°ν•©μΌλ΅ μ§„ν–‰</li>
                                <li><strong>Case 2 (ν° κ°ν†µ ν›„ κ²°ν•©):</strong> μ•„λ²„μ§€ λ…μλ΅ SK ν•Έλ“ν° κ°ν†µ ν›„ κ²°ν•© μ‹ β†’ μ”μ¦ κ°€μ΅± κ²°ν•© μ¶”κ°€ κ°€λ¥ (λ¨λ°”μΌ λ…μκ°€ κ²°ν•©μ— ν¬ν•¨λμ–΄μ•Ό ν•¨)</li>
                            </ul>
                        </div>
                        <div>
                            <h4>μΈν„°λ„· ν• μΈ (μ”κΈμ λ³„)</h4>
                            <ul id="yozoomGajokInternetDiscountTiers"></ul>
                        </div>
                        <div>
                            <h4>ν΄λ€ν° ν• μΈ (μΈν„°λ„· μ†λ„ λ° νμ„  μ κΈ°λ°, μ°Έκ³ μ©)</h4>
                            <ul id="yozoomGajokMobileDiscountTiers"></ul>
                        </div>
                    </div>
                </div>
                <div id="onGajokDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ¨κ°€μ΅±ν• μΈ μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ (μμƒ): <span id="detailOgInternetDiscount" class="font-bold">0</span>μ›</p>
                    <p>ν΄λ€ν° ν• μΈ (μ›”μ •μ•΅ κΈ°μ¤€, μ°Έκ³ μ©): <span id="detailOgMobileDiscount" class="font-bold">0</span>%</p>
                    <hr class="my-2 border-red-300">
                    
                    <div class="copy-button-container !mb-2">
                        <button onclick="copySectionToClipboard('ongajokCopyContent', 'copyFeedbackOngajok')" class="btn-secondary text-xs !py-1 !px-2">μƒμ„Έ μ •λ³΄ λ³µμ‚¬</button>
                        <span id="copyFeedbackOngajok" class="copy-feedback"></span>
                    </div>

                    <div id="ongajokCopyContent" class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details space-y-3">
                        <div>
                            <h4>μ£Όμ” νΉμ§•</h4>
                            <ul>
                                <li><strong>μµλ€ νμ„ :</strong> μΈν„°λ„· 2νμ„  + λ¨λ°”μΌ 2~5νμ„ </li>
                                <li><strong>ν• μΈ κΈ°μ¤€:</strong> κ°€μ΅± ν•©μ‚° κ°€μ…λ…„μ λ° μΈν„°λ„· μ‚¬μ© κΈ°κ°„μ— λ”°λΌ μ°¨λ“± ν• μΈ</li>
                                <li><strong>νμ„  μ¶”κ°€ μ΅°κ±΄:</strong> μ¶”κ°€ν•λ” νμ„  λ…μμμ ν•Έλ“ν°μ΄ SKTμ—¬μ•Ό ν•¨</li>
                            </ul>
                        </div>
                        <div>
                            <h4>μ‹ μ²­ λ°©λ²• (SKT vs SKB)</h4>
                            <ul>
                                <li><strong>SKT (Tμ›”λ“/λ°±λ©”κ°€ μ…λ ¥):</strong> μ„ κ²° κ°€λ¥</li>
                                <li><strong>SKB (λΈλ΅λ“λ°΄λ“):</strong> ν›„κ²° (κ³ κ°μ΄ μ„¤μΉ ν›„ 30μΌ μ΄λ‚΄ λ³Έμ‚¬ κ³ κ°μ„Όν„° ν†µν•΄ κ²°ν•© μ”μ²­ ν•„μ”)</li>
                            </ul>
                        </div>
                         <div>
                            <h4>μΈν„°λ„· ν• μΈμ¨ (κ°€μ΅± μ΄ μ—°μ + μΈν„°λ„· μ‚¬μ© κΈ°κ°„λ³„ %)</h4>
                            <ul id="onGajokInternetDiscountTiers"></ul>
                        </div>
                    </div>
                </div>
                <div id="familySktDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">ν¨λ°€λ¦¬κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μνμ„  μΈν„°λ„· ν• μΈ: <span id="detailFsInternetDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-red-300">

                    <div class="copy-button-container !mb-2">
                        <button onclick="copySectionToClipboard('familyCopyContent', 'copyFeedbackFamily')" class="btn-secondary text-xs !py-1 !px-2">μƒμ„Έ μ •λ³΄ λ³µμ‚¬</button>
                        <span id="copyFeedbackFamily" class="copy-feedback"></span>
                    </div>

                    <div id="familyCopyContent" class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details space-y-3">
                        <div>
                            <h4>ν•µμ‹¬ μ΅°κ±΄</h4>
                            <ul>
                                <li><strong>λ€μƒ:</strong> λ³ΈμΈ λλ” μ§κ³„κ°€μ΅± λ…μλ΅ λ‹¤λ¥Έ μ¥μ†μ— SK μΈν„°λ„· νμ„ (λ¨νμ„ )μ΄ μλ” κ²½μ°, μ‹ κ· μΈν„°λ„·(μνμ„ ) ν• μΈ μ μ©</li>
                                <li><strong>κµ¬μ΅°:</strong> λ¨νμ„  1νμ„  + μνμ„  1νμ„  (1:1 κ²°ν•©)</li>
                                <li><strong>κ²°ν•© μ›μΉ™:</strong> SKTλ” SKTλΌλ¦¬, SKBλ” SKBλΌλ¦¬ κ²°ν•©</li>
                            </ul>
                        </div>
                        <div>
                            <h4>μ‹ μ²­ λ°©λ²• μƒμ„Έ</h4>
                            <ul>
                                <li><strong>SKT (λ³ΈμΈ/κ°€μ΅±):</strong> μ„ κ²° κ°€λ¥. (ν•„μ”μ„λ¥: λ³ΈμΈ μ‹ λ¶„μ¦, λ¨νμ„  κΈ°μ¤€ κ°€μ΅±κ΄€κ³„μ¦λ…μ„, λ¨νμ„  μ •λ³΄)</li>
                                <li><strong>SKB (λ³ΈμΈ λ…μ):</strong> μ„ κ²° κ°€λ¥. (SKTμ™€ λ™μΌ, λ¨νμ„  μ„¤μΉ μ£Όμ† ν™•μΈ)</li>
                                <li><strong>SKB (κ°€μ΅± λ…μ):</strong> ν›„κ²°. (λ³Έμ‚¬ ν†µν• ν›„κ²°ν•©, κ°€μ΅±κ΄€κ³„μ¦λ…μ„ μ μ¶)</li>
                            </ul>
                        </div>
                        <div>
                            <h4>μ£Όμ μ‚¬ν•­ (ν• μΈ λ°ν™)</h4>
                            <ul>
                                <li>λ¨νμ„  1λ…„ μ μ§€ ν•„μ, λ―Έμ μ§€ μ‹ ν• μΈ κΈμ•΅ λ°ν™λ©λ‹λ‹¤.</li>
                                <li>10κ°μ›” μ΄λ‚΄ ν•΄μ§€ μ‹ μ‚¬μ€ν’ ν™μλ  μ μμµλ‹λ‹¤.</li>
                            </ul>
                        </div>
                        <div>
                            <h4>μΈν„°λ„· ν• μΈμ•΅ (μνμ„  κΈ°μ¤€)</h4>
                            <ul id="familyInternetDiscountTiers"></ul>
                        </div>
                    </div>
                </div>
                <div id="mvnoSktDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ•λ°ν• κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ: <span id="detailMsInternetDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-red-300">
                    
                    <div class="copy-button-container !mb-2">
                        <button onclick="copySectionToClipboard('mvnoCopyContent', 'copyFeedbackMvno')" class="btn-secondary text-xs !py-1 !px-2">μƒμ„Έ μ •λ³΄ λ³µμ‚¬</button>
                        <span id="copyFeedbackMvno" class="copy-feedback"></span>
                    </div>

                    <div id="mvnoCopyContent" class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details space-y-3">
                        <div>
                            <h4>κ²°ν•© μ΅°κ±΄ (SKB μ „μ©)</h4>
                            <ul>
                                <li><strong>λ€μƒ κ³ κ°:</strong> 30μΌ μ΄λ‚΄ SKB μ‹ κ· κ°€μ… κ³ κ° λλ” SKB μ•½μ • μΆ…λ£ κ³ κ°</li>
                                <li><strong>κ²°ν•© κµ¬μ΅°:</strong> SKB μΈν„°λ„·(λ³ΈμΈ) + μ•λ°ν°(λ³ΈμΈ) 1:1 κ²°ν•©λ§ κ°€λ¥</li>
                                <li><strong>μ ν• μ‚¬ν•­:</strong> κ°€μ΅± λ…μ λ¶κ°€, SKT λ° λ²•μΈ κ²°ν•© λ¶κ°€</li>
                                <li><strong>ν†µμ‹ μ‚¬ λ³€κ²½ μ‹:</strong> μ•λ°ν° ν†µμ‹ μ‚¬ λ³€κ²½ μ‹ κ²°ν•© ν•΄μ§€ ν›„ μ¬κ²°ν•© λ¶κ°€</li>
                            </ul>
                        </div>
                        <div>
                            <h4>μ£Όμ” κ²°ν•© κ°€λ¥ μ•λ°ν° μ‚¬μ—…μ (μμ‹)</h4>
                            <ul>
                                <li>KB κµ­λ―Όμ€ν–‰(λ¦¬λΈμ— λ¨λ°”μΌ), ν°μ‚¬λμ»¤λ„¥νΈ(μ΄μ•ΌκΈ°λ¨λ°”μΌ), μ λ‹μ»΄μ¦(λ¨λΉ™), ν† μ¤, μ•„μ΄μ¦ λΉ„μ „, SKν…”λ§ν¬(μ„ΈλΈλ¨λ°”μΌ), ν‹°ν”λ¬μ¤(KTC), μ¤λ§ν…”(SMT) λ“±</li>
                            </ul>
                        </div>
                        <div>
                            <h4>κ²°ν•© λ¶κ°€ μ”κΈμ  μμ‹</h4>
                            <ul>
                                <li>μ„ λ¶ν°, IOTμ”κΈμ , λ°μ΄ν„° μ‰μ–΄λ§, νƒλΈ”λ¦Ώ λ“± ν‘μλμ§€ μ•μ€ μ”κΈμ </li>
                            </ul>
                        </div>
                        <div>
                            <h4>μΈν„°λ„· ν• μΈμ•΅ (μ†λ„λ³„)</h4>
                            <ul id="mvnoInternetDiscountTiers"></ul>
                        </div>
                    </div>
                </div>
                </div>
        </section>

        <section class="mb-8">
            <div class="input-group">
                <label class="input-label">λ¨λ°”μΌ νμ„  μ •λ³΄ (μµλ€ 5νμ„ )</label>
                <div class="flex items-center mb-2">
                    <label for="mobileLinesCount" class="mr-2 text-sm text-slate-700">κ²°ν•©ν•  SKT λ¨λ°”μΌ νμ„  μ:</label>
                    <input type="number" id="mobileLinesCount" min="0" max="5" value="0" class="input-field w-20 text-center">
                </div>
                <div id="mobileLinesContainer" class="space-y-3"></div>
            </div>
             <div class="input-group">
                <label for="dongpanSalesCheck" class="input-label flex items-center cursor-pointer">
                    <input type="checkbox" id="dongpanSalesCheck" class="radio-input h-5 w-5 mr-2">
                    λ™ν νλ§¤κ°€ μ μ© (μ„ νƒ μ‹ μ¶”κ°€ μ‚¬μ€ν’ μ΅°κ±΄ λ° κ΄€λ ¨ μ•λ‚΄ λ³΄κΈ°)
                </label>
            </div>
            <div id="dongpanUsimPolicyDetailsContainer" class="mt-3 hidden discount-details">
                <h3 class="text-lg font-bold text-red-700 mb-2">SKT μΈν„°λ„·/μ μ‹¬ κ²°ν•© μƒν’ μ ‘μ λ°©λ²• (λ™νμ μ‹¬ μ°Έκ³ μλ£)</h3>
                <p class="text-xs mb-1"><strong>μ‹ μ²­μ„ URL:</strong> <a href="https://tgateplus.sktelecom.com/main/main.do?p=9d7d8b5b0b339b80214797b42ff596a914f9d2a8103175f5b4e3a208ea7e3cab" target="_blank" class="text-blue-600 hover:underline">Tκ²μ΄νΈν”λ¬μ¤ μ‹ μ²­ λ°”λ΅κ°€κΈ°</a></p>
                <p class="text-xs mb-3">μ‘μ„±μΌ: 2023λ…„ 10μ›” 27μΌ κΈ°μ¤€ (μµμ‹  μ •μ±…μ€ SKT κ³µμ‹ μ±„λ„μ„ ν†µν•΄ ν™•μΈν•μ‹κΈ° λ°”λλ‹λ‹¤)</p>
                <h4>κ²°ν•© μƒν’ κµ¬μ„± λ° κ°€λ¥ νμ„ :</h4>
                <ul><li>SKT μΈν„°λ„·κ³Ό μ μ‹¬μ„ κ²°ν•©ν•λ” μƒν’μ…λ‹λ‹¤.</li><li>κ°€μ΅± μ μ‹¬ κ²°ν•© μ‹, μ΄ 5νμ„ (μΈν„°λ„· 1νμ„  + μ μ‹¬ λ™λ° λ…μμ 1νμ„  + κ°€μ΅± μ μ‹¬ μµλ€ 4νμ„ )κΉμ§€ κ°€λ¥ν•©λ‹λ‹¤. <strong>β οΈ μΈ+μ μ‹¬λ™ν+κ°€μ΅±μ μ‹¬4νμ„  κΉμ§€ μ΄ 5νμ„ κΉμ§€ κ°€λ¥</strong></li></ul>
                <h4>λ‹¨λ… μƒν’ νλ§¤ λ¶κ°€ μ •μ±…:</h4>
                <ul><li>μΈν„°λ„· λ‹¨λ…μΌλ΅λ” 33,000μ› μ”κΈμ  νλ§¤ λ° κ°€μ΅± μ μ‹¬ νλ§¤κ°€ λ¶κ°€ν•©λ‹λ‹¤. <strong>β οΈ μΈλ‹¨λ… > 33K νλ§¤ λ¶κ°€/κ°€μ΅± μ μ‹¬ νλ§¤ λ¶κ°€</strong></li><li>λ²λ“¤(κ²°ν•©) μƒν’μ κ²½μ°, λ¨λ“  μ”κΈμ μ™€ κ°€μ΅± μ μ‹¬ νλ§¤κ°€ κ°€λ¥ν•©λ‹λ‹¤. <strong>β οΈ λ²λ“¤> λ¨λ“  μ”κΈμ  + κ°€μ΅± μ μ‹¬ νλ§¤ κ°€λ¥</strong></li></ul>
                <h4>μ ‘μ μ μ°¨:</h4><ol class="list-decimal list-inside space-y-1"><li>μ„ μ‹ μ²­μ„ λ§ν¬λ΅ μΈμ¦(PASS or μ‹ μ©μΉ΄λ“) ν›„ μ‹ μ²­μ„ μ‘μ„±.</li><li>λ°±λ©”κ°€ μ ‘μμ›Ή(speedonline.kr)μ SK(μΌλ°) β‡’ λ¨λ°”μΌ νƒ­μΌλ΅ μ ‘μ λ¶€νƒ λ“λ¦½λ‹λ‹¤.</li><li>μ›Ή νμ‹ :<ul class="list-disc list-inside ml-4"><li>ν•΄λ‹Ή κ³ κ° μΈν„°λ„· κ°ν†µμ΄ μ™„λ£λλ©΄: "[κ°ν†µ μ™„λ£ / μ μ‹¬ λ°μ†΅ μ”μ²­]"μΌλ΅ μ›Ή νμ‹  ν•„μ”.</li><li>β€» μ΄λ―Έ κ°ν†µλ κ³ κ° 30μΌ μ΄λ‚΄ μ μ‹¬λ™ν μ‹: "[κ°ν†µμ™„λ£ μΌμ, κ°ν†µλ²νΈ κΈ°μ¬ / μ μ‹¬ λ°μ†΅ μ”μ²­]"μΌλ΅ μ›Ή νμ‹  ν•„μ”.</li><li>κ³ κ°μ΄ μ μ‹¬ μλ Ήν•μ‹  ν›„ μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°λ΅ κ°ν†µ μ”μ²­ μ‹: "[κ³ κ° μ μ‹¬ μλ Ή μ™„λ£ / κ°ν†µ μ§„ν–‰ μ”μ²­]" ν•„μ”.</li></ul></li><li>μ‚¬μ „ λ™μ λ¬Έμ μ²λ¦¬:<ul class="list-disc list-inside ml-4"><li>β€» κ°ν†µ μ”μ²­ν•λ©΄ [μ‚¬μ „λ™μλ¬Έμ:μ„μ•½κΈ ν™•μΈ λ° λ™μλ¬Έμ]κ°€ κ³ κ°μ—κ² λ°μ†΅λλ©°, ν•΄λ‹Ή λ¬Έμ μ²λ¦¬ ν›„ κ°ν†µ μ§„ν–‰ κ°€λ¥.</li><li>β€» λ™μ μ²λ¦¬ν•μ§€ μ•μ„ μ‹ λ¬Έμ λ°μ†΅ ν›„ 10λ¶„ μ „μ‚°μ—μ„ κ°•μ λ΅ λ™μμ²λ¦¬ ν›„ κ°ν†µμ§„ν–‰ κ°€λ¥.</li></ul></li><li>μλ Ήν• USIMμΌλ΅ κ°μ•„λΌμ°μ‹κ³  μ „μ› ONμ— μ„±κ³µν•μ‹λ©΄ μ„ νƒμ•½μ •κ³Ό μ λ¬΄μ„  κ²°ν•© μ§„ν–‰ ν•„μ.</li><li>β€» μ„ μ•½ λ° κ²°ν•© μ™„λ£μ‹ [κ°ν†µμ™„λ£]λ΅ μ²λ¦¬λ¨.</li></ol>
                <h4>κ³ κ° μ•λ‚΄ μ‚¬ν•­:</h4><ol class="list-decimal list-inside space-y-1"><li>μ μ‹¬ κ°ν†µμ€ μμ°¨μ μΌλ΅ μ§„ν–‰λμ–΄ μµλ€ 1μ‹κ°„ κΉμ§€ μ†μ”λ  μ μμµλ‹λ‹¤.</li><li>μ‚¬μ „ λ™μ λ¬Έμ μ²λ¦¬κ°€ μ™„λ£λμ–΄μ•Ό λΉ λ¥Έ κ°ν†µ μ²λ¦¬κ°€ κ°€λ¥ν•©λ‹λ‹¤.</li><li>SK USIM μΌλ΅ κ°ν†µλκΈ° μ „κΉμ§€λ” κΈ°μ΅΄ USIMμ„ μ‚¬μ©ν•μ‹λ‹¤κ°€ κΈ°μ΅΄ USIMμ μ‹ νΈκ°€ λμ–΄μ§ κ²½μ° μλ Ήν•μ‹  USIMμΌλ΅ κ°μ•„ λΌμ›μ£Όμ„Έμ”.</li><li>κΈ°κΈ° μ¬μ‹λ™μ„ μ—¬λ¬λ² ν•΄μ£Όμ‹λ©΄ μ •μƒ κ°ν†µμ΄ μ™„λ£λ©λ‹λ‹¤.</li></ol>
                <h4>μ£Όμ μ‚¬ν•­ (μμλ£ μ§€κΈ‰ κ΄€λ ¨):</h4><ol class="list-decimal list-inside space-y-1"><li>μ μ‹¬ λ‹ΉμΌ λ°μ†΅μ€ 15μ‹ 30λ¶„μ— λ§κ°λ©λ‹λ‹¤. μ΄ν›„ μ”μ²­κ±΄ μμ—…μΌ κΈ°μ¤€ μµμΌ μ§„ν–‰λ©λ‹λ‹¤.</li><li>μ μ‹¬ λΉ„μ© 7,700μ›μ΄ μ²« λ‹¬μ— μ²­κµ¬λ©λ‹λ‹¤.</li><li>μΈν„°λ„· / μ μ‹¬ μ¤‘ ν•λ‚λΌλ„ μ„¤λ¶ λ° κ°ν†µ λ¶κ°€μ‹ μμλ£ μ§€κΈ‰ λ¶κ°€ν•©λ‹λ‹¤.</li><li>μΈν„°λ„· κ°ν†µμ›” κΈ°μ¤€ μµμ›”λ§κΉμ§€ μ μ‹¬ κ°ν†µμ‹μ—λ§ μμλ£ μΈμ •λμ–΄ μ§€κΈ‰λ©λ‹λ‹¤.</li><li>μ„ νƒμ•½μ • μ μ© μ•λ  κ²½μ° μμλ£ μ§€κΈ‰ λ¶κ°€ν•©λ‹λ‹¤.</li><li>μΈν„°λ„· λ…μμμ™€ μ μ‹¬ λ…μμκ°€ μƒμ΄ν•  κ²½μ° μμλ£ μ§€κΈ‰ λ¶κ°€ν•©λ‹λ‹¤.</li></ol>
                <p class="mt-2"><strong>κ²°λ΅ :</strong> SKT μΈν„°λ„·/μ μ‹¬ κ²°ν•© μƒν’μ€ κ°€μ΅± μ μ‹¬ κ²°ν•© μ‹ μµλ€ 5νμ„ κΉμ§€ κ°€λ¥ν•λ©°, λ‹¨λ… μƒν’ νλ§¤μ— μ μ•½μ΄ μμµλ‹λ‹¤. μ ‘μλ” μ¨λΌμΈ μ‹ μ²­μ„ μ‘μ„± λ° μ›Ή μ ‘μλ¥Ό ν†µν•΄ μ§„ν–‰λλ©°, κ³ κ°μ μ‚¬μ „ λ™μ λ¬Έμ μ²λ¦¬μ™€ μ μ‹¬ κµμ²΄ λ° κ°ν†µ κ³Όμ •μ΄ ν•„μμ μ…λ‹λ‹¤. νΉν, μμλ£ μ§€κΈ‰κ³Ό κ΄€λ ¨ν•μ—¬ μ μ‹¬ κ°ν†µ κΈ°κ°„, μ„ νƒμ•½μ • μ μ©, λ…μμ μΌμΉ μ—¬λ¶€ λ“± μ—¬λ¬ μ μμ‚¬ν•­μ΄ μμΌλ―€λ΅ ν•΄λ‹Ή λ‚΄μ©μ„ μ™μ§€ν•κ³  μ ‘μ λ° κ°ν†µμ„ μ§„ν–‰ν•΄μ•Ό ν•©λ‹λ‹¤.</p>
            </div>
        </section>

        <section id="installationSection" class="mb-8">
            <h2 class="section-title">3. μ„¤μΉ μµμ…</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label class="input-label">μ„¤μΉλΉ„</label>
                <div class="space-y-2">
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekday" class="radio-input" checked> ν‰μΌ μ£Όκ°„</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekend" class="radio-input"> μ£Όλ§/μ•Όκ°„</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="self_paid" class="radio-input"> μ„¤μΉλΉ„ μμ²΄μ§€κΈ‰</label>
                </div>
            </div>
        </section>

        <section id="affiliateCardSection" class="mb-8">
            <h2 class="section-title">4. μ ν΄μΉ΄λ“ μ¶”κ°€ ν• μΈ (μ„ νƒ)</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="input-group">
                        <label for="affiliateCardSelect" class="input-label">μ ν΄μΉ΄λ“ μ„ νƒ</label>
                        <select id="affiliateCardSelect" class="select-field">
                            <option value="none">μ„ νƒ μ•ν•¨</option>
                            </select>
                    </div>
                    <div class="input-group hidden" id="cardTierGroup">
                        <label for="cardTierSelect" class="input-label">μ „μ›” μ‹¤μ  κµ¬κ°„ μ„ νƒ</label>
                        <select id="cardTierSelect" class="select-field">
                            </select>
                    </div>
                </div>
                <div class="info-box mt-4">
                    <p class="font-semibold">μ°Έκ³ </p>
                    <ul class="list-disc pl-5 mt-1 text-sm">
                        <li>ν• μΈμ•΅μ€ μ „μ›” μ‹¤μ μ— λ”°λΌ λ‹¬λΌμ§€λ©°, μΉ΄λ“μ‚¬μ— μ§μ ‘ ν™•μΈμ΄ ν•„μ”ν•©λ‹λ‹¤.</li>
                        <li>μμ„Έν• λ‚΄μ©μ€ μΉ΄λ“μ‚¬ λ¬Έμ (λ΅―λ°: 1588-8100, ν„λ€: 1577-6000, μ‚Όμ„±: 1588-8700, KB: 1588-1688, ν•λ‚: 1800-1111)</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="commissionSection" class="mb-8 hidden">
            <h2 class="section-title">5. μμλ£ μ •μ±… μ„ νƒ (OTT μƒν’μ©)</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="input-group">
                    <label for="commissionSelect" class="input-label">νλ§¤ μμλ£ μ„ νƒ</label>
                    <select id="commissionSelect" class="select-field">
                    </select>
                    <p class="text-xs text-slate-500 mt-1">500M+OTT μƒν’ μ„ νƒ μ‹, μ‚¬μ€ν’ κΈμ•΅μ„ κ²°μ •ν•κΈ° μ„ν•΄ νλ§¤ μμλ£λ¥Ό μ„ νƒν•΄μ£Όμ„Έμ”.</p>
                </div>
            </div>
        </section>


        <div class="text-center mb-8 space-x-4">
            <button id="calculateButton" class="btn-primary text-lg">μμƒ μ”κΈ κ³„μ‚°ν•κΈ°</button>
            <button id="resetButton" class="btn-secondary text-lg">μ΄κΈ°ν™”</button>
        </div>

        <section id="resultSection" class="hidden">
            <h2 class="section-title">π“ κ³„μ‚° κ²°κ³Ό</h2>
            
            <div id="suggestionBar" class="hidden p-4 mb-6 bg-blue-50 border-l-4 border-blue-400 text-blue-700 rounded-md">
                <p class="font-bold">π‰ λ” μ λ¦¬ν• ν• μΈ μ΅°ν•©μ„ μ°Ύμ•μ–΄μ”!</p>
                <p class="mt-1">μ κΉ! ν• μΈ μ ν•μ„ '<strong id="suggestionName" class="underline"></strong>'(μΌ)λ΅ λ³€κ²½ν•μ‹λ©΄ <strong id="suggestionBenefit" class="underline"></strong> μ¶”κ°€λ΅ μ•„λ‚„ μ μμµλ‹λ‹¤!</p>
                <div class="text-right mt-2">
                    <button id="suggestionButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-1 px-3 rounded text-sm transition-colors">μ¶”μ² ν• μΈμΌλ΅ λ³€κ²½ ν›„ λ‹¤μ‹ κ³„μ‚°</button>
                </div>
            </div>
            
            <div class="bg-slate-50 p-6 rounded-lg mb-6 border border-slate-200">
                <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">β… μµμΆ… μ”κΈ λ° ννƒ μ”μ•½</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="text-center p-4 bg-white rounded-md shadow-sm">
                        <p class="text-base font-medium text-slate-600">π–¥οΈ μΈν„°λ„·/TV μ›” μµμΆ… μ”κΈ</p>
                        <p id="summaryMonthlyCost" class="text-3xl font-extrabold text-red-500 my-1">0μ›</p>
                    </div>
                    <div class="text-center p-4 bg-green-50 rounded-md shadow-sm">
                        <p class="text-base font-medium text-green-800">π μ΄ μ‚¬μ€ν’ ννƒ</p>
                        <p id="summaryTotalGift" class="text-3xl font-extrabold text-green-600 my-1">0μ›</p>
                    </div>
                </div>
                <hr class="my-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="text-center">
                        <p class="text-sm text-slate-500">μΈν„°λ„· μ”κΈ ν• μΈ</p>
                        <p id="summaryInternetDiscount" class="text-lg font-bold text-green-600">- 0μ›</p>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-slate-500">ν΄λ€ν° μ”κΈ ν• μΈ (μ›”)</p>
                        <p id="summaryMobileDiscount" class="text-lg font-bold text-green-600">- 0μ›</p>
                        <p class="text-xs text-slate-400">(ν†µμ‹ λΉ„ μ²­κµ¬μ„μ—μ„ λ³„λ„ μ°¨κ°)</p>
                    </div>
                </div>
            </div>
            
            <div class="text-center mb-6">
               <button id="toggleDetailsButton" class="text-sm text-slate-500 hover:text-slate-700 bg-slate-100 hover:bg-slate-200 py-2 px-4 rounded-full transition-colors">
                μƒμ„Έ μ”κΈ λ‚΄μ—­ νΌμ³λ³΄κΈ° β–Ό
               </button>
            </div>

            <div id="detailsContainer" class="hidden">
                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">μ„ νƒ μƒν’ μƒμ„Έ</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <p class="result-label summary-item">μ„ νƒ μΈν„°λ„·: <span id="selectedInternet" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ TV (1λ²μ§Έ): <span id="selectedTv" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ¶”κ°€ AI/νΉμ μ…‹ν†± (1λ²μ§Έ TV): <span id="selectedStb" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ¶”κ°€ TV (2λ²μ§Έ): <span id="selectedAdditionalTv" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ§‘μ „ν™”: <span id="selectedPhone" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ™€μ΄νμ΄: <span id="selectedWifi" class="result-value"></span></p>
                        </div>
                        <div>
                            <p class="result-label summary-item">λ¨λ°”μΌ νμ„  μ: <span id="selectedMobileCount" class="result-value"></span></p>
                            <p class="result-label summary-item">μ μ© ν• μΈ μ ν•: <span id="selectedDiscountType" class="result-value"></span></p>
                            <div id="onGajokYearsResultContainer" class="hidden result-label summary-item">
                                μ¨κ°€μ΅± μ΄ μ‚¬μ© μ—°μ: <span id="selectedOnGajokYears" class="result-value"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">μΈν„°λ„·/TV μ”κΈ κ³„μ‚° κ³Όμ •</h3>
                    <p class="result-label summary-item">μ›” μΈν„°λ„· κΈ°λ³Έλ£ (λ‹¨λ…/TVκ²°ν•© κΈ°μ¤€): <span id="totalBaseInternetCost" class="result-value">0</span> μ›</p>
                    <p class="result-label summary-item">μ›” μ™€μ΄νμ΄ κ³µμ κΈ° μ„λ€λ£: <span id="wifiRouterRentalCostDisplay" class="result-value">0</span> μ›</p>
                    <div id="tvCostSummaryContainer" class="hidden"> 
                        <p class="result-label summary-item">μ›” TV μ”κΈ (1λ²μ§Έ, κΈ°λ³Έμ…‹ν†± ν¬ν•¨): <span id="tvBaseCostDisplay" class="result-value">0</span> μ›</p>
                        <p class="result-label summary-item">μ›” μ¶”κ°€ AI/νΉμ μ…‹ν†± μ„λ€λ£ (1λ²μ§Έ): <span id="stbRentalCostDisplay" class="result-value">0</span> μ›</p>
                    </div>
                    <div id="additionalTvCostSummaryContainer" class="hidden">
                        <p class="result-label summary-item">μ›” μ¶”κ°€ TV μ”κΈ (2λ²μ§Έ): <span id="additionalTvCostDisplay" class="result-value">0</span> μ›</p>
                    </div>
                    <div id="phoneCostSummaryContainer" class="hidden">
                        <p class="result-label summary-item">μ›” μ§‘μ „ν™” κΈ°λ³Έλ£: <span id="phoneBaseCostDisplay" class="result-value">0</span> μ›</p>
                    </div>
                    <hr class="my-2 border-slate-200">
                    <p class="result-label text-green-600 summary-item">μ›” μ΄ μΈν„°λ„· κ²°ν•© ν• μΈμ•΅ (μμƒ): <span id="totalInternetDiscountAmount" class="result-value text-green-600">0</span> μ›</p>
                    <p class="text-xs text-slate-500 ml-2 mb-2" id="internetDiscountBreakdown"></p>
                    <div id="cardDiscountSummaryContainer" class="hidden">
                        <p class="result-label text-green-600 summary-item">μ›” μ ν΄μΉ΄λ“ μ¶”κ°€ ν• μΈ: <span id="totalCardDiscountAmount" class="result-value text-green-600">0</span> μ›</p>
                        <p class="text-xs text-slate-500 ml-2 mb-2" id="cardDiscountBreakdown"></p>
                    </div>

                    <hr class="my-2 border-red-300">
                    <p class="mt-2 text-lg font-semibold">
                        <span id="finalCostLabelText">μµμΆ… μμƒ μ›” λ‚©λ¶€μ•΅</span><span id="finalCostLabelQualifier" class="cost-qualifier"></span>: <span id="finalMonthlyCost" class="total-value">0</span> μ›
                    </p>
                </div>

                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">π μ‚¬μ€ν’ ννƒ μƒμ„Έ</h3>
                    <p class="result-label summary-item">κΈ°λ³Έ μΈν„°λ„· μ‚¬μ€ν’ (μμƒ): <span id="giftBaseInternet" class="result-value">0</span> μ›</p>
                    <p class="result-label summary-item hidden" id="additionalDongpanCashContainer">λ™ν μ¶”κ°€ ν„κΈ μ‚¬μ€ν’ (λ¨λ°”μΌ μ”κΈμ  μ—°λ™ ν•©κ³„): <span id="giftAdditionalDongpanCash" class="result-value">0</span> μ›</p>
                    <hr class="my-1">
                    <p class="result-label summary-item font-semibold">μ΄ μ‚¬μ€ν’ κ°€μΉ (μμƒ): <span id="giftTotal" class="result-value text-green-600">0</span> μ›</p>
                    <p class="text-xs text-red-500 mt-1" id="giftEligibilityNote"></p>
                </div>
                
                <div id="mobileDiscountDetailsContainer" class="result-card hidden">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">π“± λ¨λ°”μΌ μ”κΈ ν• μΈ μƒμ„Έ</h3>
                    <div id="mobileDiscountBreakdown" class="space-y-2 text-sm">
                    </div>
                    <p id="mobileDiscountNote" class="text-xs text-slate-500 mt-2"></p>
                </div>

                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">μ΄κΈ° μ„¤μΉ λΉ„μ©</h3>
                    <p class="result-label">μμƒ μ΄ μ„¤μΉλΉ„: <span id="installationCostResult" class="result-value text-lg">0</span> μ›</p>
                    <p class="text-xs text-slate-500 mt-1" id="installationCostDescription"></p>
                </div>
            </div>
        </section>
        
        <section id="messageScriptSection" class="hidden mt-12">
            <h2 class="section-title">π“„ κ³ κ° μ•λ‚΄ λ¬Έμ μ¤ν¬λ¦½νΈ (μƒλ‹΄μ› μ°Έκ³ μ©)</h2>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">1. μ „μ‚° λ©”λ¨</h3>
                <textarea id="memoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('memoScript', 'copyFeedbackMemo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackMemo" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">2. μƒν’ μ•λ‚΄ λ¬Έμ</h3>
                <div class="mb-3 text-right space-x-2">
                    <button id="generateBundleComparisonButton" class="btn-secondary text-xs py-1 px-3">β΅ μ”κ°€κ²° vs μ¨ν•  λΉ„κµ μ¤ν¬λ¦½νΈ μƒμ„±</button>
                    <button id="generateComparisonButton" class="btn-secondary text-xs py-1 px-3">β΅ 100M vs 500M λΉ„κµ μ¤ν¬λ¦½νΈ μƒμ„±</button>
                </div>
                <textarea id="infoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('infoScript', 'copyFeedbackInfo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackInfo" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">3. κ°€μ… μ™„λ£ λ¬Έμ</h3>
                <textarea id="completeScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('completeScript', 'copyFeedbackComplete')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackComplete" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">4. μ μ‹¬ μ ‘μ μ™„λ£ μ•λ‚΄ (κ³ κ°μ©)</h3>
                <textarea id="usimDongpanCompleteScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('usimDongpanCompleteScript', 'copyFeedbackUsimComplete')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackUsimComplete" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">5. λ―Όκ°μ •λ³΄ μ „μ†΅μ© λ§ν¬ (κ³ κ° λ°μ†΅μ©)</h3>
                <textarea id="sensitiveInfoLinkScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('sensitiveInfoLinkScript', 'copyFeedbackSensitiveInfo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackSensitiveInfo" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">6. 1λ…„ vs 3λ…„ μ•½μ • μµμΆ… λΉ„μ©(TCO) λΉ„κµ</h3>
                <div class="flex space-x-2 mb-4">
                    <button id="generateTco100MbpsButton" class="w-full text-white font-semibold py-2 px-4 rounded-lg bg-pink-500 hover:bg-pink-600 transition-colors">100Mbps λΉ„κµ μ¤ν¬λ¦½νΈ μƒμ„±</button>
                    <button id="generateTco500MbpsButton" class="w-full text-white font-semibold py-2 px-4 rounded-lg bg-slate-500 hover:bg-slate-600 transition-colors">500Mbps λΉ„κµ μ¤ν¬λ¦½νΈ μƒμ„±</button>
                </div>
                <textarea id="tcoComparisonResultScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('tcoComparisonResultScript', 'copyFeedbackTco')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackTco" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">7. SK μ„μ•½κΈ μ‚°μ • λ°©μ‹ μƒμ„Έ λ¶„μ„</h3>
                <textarea id="penaltyAnalysisScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('penaltyAnalysisScript', 'copyFeedbackPenalty')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackPenalty" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">8. μ„μ•½κΈ λ©΄μ  μ΅°κ±΄ μ΄μ •λ¦¬</h3>
                <textarea id="waiverInfoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('waiverInfoScript', 'copyFeedbackWaiver')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackWaiver" class="copy-feedback"></span>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-6 mt-12 bg-red-700 text-red-100 text-sm">
        <p>λ³Έ κ³„μ‚°κΈ°λ” SKB/SKT μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°μ—μ„ μ κ³µν•©λ‹λ‹¤.</p>
        <p>&copy; 2024 SK κ²°ν•© ν• μΈ κ³„μ‚°κΈ°. λ¨λ“  μ •λ³΄λ” μ°Έκ³ μ©μ…λ‹λ‹¤.</p>
    </footer>

    <script>
    // --- (μ‹ κ· μ¶”κ°€) λ¨λ°”μΌ μ”κΈμ  λ°μ΄ν„° ---
    const mobilePlanTiers = {
        "80K": [ { "plan_name": "5GX ν”„λΌμ„ν”λ¬μ¤", "network_type": "5G", "price": "β‚©99,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007622" }, { "plan_name": "5GX ν”„λΌμ„", "network_type": "5G", "price": "β‚©89,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006404" }, { "plan_name": "0 μ²­λ…„ 99 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©99,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008139" }, { "plan_name": "0 μ²­λ…„ 89 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©89,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008140" }, { "plan_name": "Tν”λ λ§¥μ¤", "network_type": "LTE", "price": "β‚©100,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006539" }, { "plan_name": "Tν”λ μ¤νμ…", "network_type": "LTE", "price": "β‚©79,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007301" } ],
        "69K": [ { "plan_name": "5GX λ κ·¤λ¬", "network_type": "5G", "price": "β‚©69,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006538" }, { "plan_name": "5GX λ κ·¤λ¬ν”λ¬μ¤", "network_type": "5G", "price": "β‚©79,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008141" }, { "plan_name": "0 μ²­λ…„ 79 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©79,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008142" }, { "plan_name": "0 μ²­λ…„ 69 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©69,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006537" }, { "plan_name": "Tν”λ μ—μ„Όμ¤", "network_type": "LTE", "price": "β‚©69,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007620" } ],
        "33K": [ { "plan_name": "λ² μ΄μ§", "network_type": "5G", "price": "β‚©49,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007621" }, { "plan_name": "λ² μ΄μ§ν”λ¬μ¤", "network_type": "5G", "price": "β‚©59,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006402" }, { "plan_name": "μ¬λ¦Ό", "network_type": "5G", "price": "β‚©55,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008145" }, { "plan_name": "0μ²­λ…„ 59 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©59,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008145" }, { "plan_name": "0μ²­λ…„ 49 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©49,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006817" }, { "plan_name": "0ν‹΄ 5G (λ§ 18μ„Έ μ΄ν•)", "network_type": "5GX", "price": "β‚©45,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006536" }, { "plan_name": "Tν”λ μ•μ‹¬ 4G", "network_type": "LTE", "price": "β‚©50,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006535" }, { "plan_name": "Tν”λ μ•μ‹¬ 2.5G", "network_type": "LTE", "price": "β‚©43,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006534" }, { "plan_name": "Tν”λμ„Έμ΄λΈ", "network_type": "LTE", "price": "β‚©33,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006534" } ]
    };
    let allMobilePlans = [];
    
    // --- New Affiliate Card Data ---
    const affiliateCards = {
        "skt": [
            {
                id: "skt_samsung",
                name: "μ‚Όμ„±μΉ΄λ“",
                tiers: [
                    { spend: 300000, discount: 18000, label: "30λ§β†‘/μ›” 18,000μ› ν• μΈ" },
                    { spend: 700000, discount: 19000, label: "70λ§β†‘/μ›” 19,000μ› ν• μΈ" },
                    { spend: 1200000, discount: 20000, label: "120λ§β†‘/μ›” 20,000μ› ν• μΈ" }
                ]
            },
            {
                id: "skt_lotte",
                name: "λ΅―λ°μΉ΄λ“",
                tiers: [
                    { spend: 400000, discount: 16000, label: "40λ§β†‘/μ›” 16,000μ› ν• μΈ" },
                    { spend: 800000, discount: 20000, label: "80λ§β†‘/μ›” 20,000μ› ν• μΈ" }
                ]
            },
            {
                id: "skt_hyundai",
                name: "ν„λ€μΉ΄λ“",
                tiers: [
                    { spend: 500000, discount: 30000, label: "50λ§β†‘/μ›” 30,000μ› ν• μΈ" },
                    { spend: 1000000, discount: 35000, label: "100λ§β†‘/μ›” 35,000μ› ν• μΈ" }
                ]
            },
            {
                id: "skt_kb",
                name: "κµ­λ―ΌμΉ΄λ“",
                tiers: [
                    { spend: 300000, discount: 12000, label: "30λ§β†‘/μ›” 12,000μ› ν• μΈ" },
                    { spend: 700000, discount: 17000, label: "70λ§β†‘/μ›” 17,000μ› ν• μΈ" }
                ]
            }
        ],
        "skb": [
            {
                id: "skb_samsung",
                name: "μ‚Όμ„±μΉ΄λ“",
                tiers: [
                    { spend: 300000, discount: 18000, label: "30λ§β†‘/μ›” 18,000μ› ν• μΈ" },
                    { spend: 700000, discount: 19000, label: "70λ§β†‘/μ›” 19,000μ› ν• μΈ" },
                    { spend: 1200000, discount: 20000, label: "120λ§β†‘/μ›” 20,000μ› ν• μΈ" }
                ]
            },
            {
                id: "skb_lotte_b",
                name: "Bλ΅―λ°μΉ΄λ“",
                tiers: [
                    { spend: 500000, discount: 10000, label: "50λ§β†‘/μ›” 10,000μ› ν• μΈ" },
                    { spend: 1000000, discount: 20000, label: "100λ§β†‘/μ›” 20,000μ› ν• μΈ" }
                ]
            },
            {
                id: "skb_hana_b",
                name: "Bν•λ‚μΉ΄λ“",
                tiers: [
                    { spend: 300000, discount: 10000, label: "30λ§β†‘/μ›” 10,000μ› ν• μΈ" },
                    { spend: 800000, discount: 15000, label: "80λ§β†‘/μ›” 15,000μ› ν• μΈ" }
                ]
            },
        ]
    };

    const commissionData = {
        "SK": {
            "internet_tv": {
            "description": "SKλΈλ΅λ“λ°΄λ“ μΈν„°λ„· + TV κ²°ν•© μƒν’ μ •μ±… (OTT 6μΆ… 3λ…„ λ¬΄λ£ ννƒ μ κ³µ)",
            "general_notes": [
                "1κΈ°κ°€ μΈν„°λ„· μ ‘μ μ‹ νλ§¤μ μμλ£μ— 10,000μ› μ¶”κ°€"
            ],
            "commission_rules": [
                {
                "commission": 80000,
                "support_money_min": 350000,
                "support_money_max": 400000,
                "plan_tier": "premium",
                "plan_names": "B tv ALL",
                "notes": []
                },
                {
                "commission": 70000,
                "support_money_min": 350000,
                "support_money_max": 400000,
                "plan_tier": "basic",
                "plan_names": "B tv μ΄μ½”λ…Έλ―Έ",
                "notes": []
                },
                {
                "commission": 70000,
                "support_money_min": 410000,
                "support_money_max": 440000,
                "plan_tier": "premium",
                "plan_names": "B tv ALL",
                "notes": [
                    "μ§€μ›κΈ 430,000μ›κΉμ§€λ” OTT ννƒ μ κ³µ κ°€λ¥",
                    "μ§€μ›κΈ 440,000μ›λ¶€ν„°λ” OTT ν¬ν•¨ μ‹ μμλ£ 10,000μ› μ°¨κ°"
                ]
                },
                {
                "commission": 60000,
                "support_money_min": 410000,
                "support_money_max": 440000,
                "plan_tier": "basic",
                "plan_names": "B tv μ΄μ½”λ…Έλ―Έ",
                "notes": [
                    "μ§€μ›κΈ 430,000μ›κΉμ§€λ” OTT ννƒ μ κ³µ κ°€λ¥",
                    "μ§€μ›κΈ 440,000μ›λ¶€ν„°λ” OTT ν¬ν•¨ μ‹ μμλ£ 10,000μ› μ°¨κ°"
                ]
                },
                {
                "commission": 60000,
                "support_money_min": 450000,
                "support_money_max": 500000,
                "plan_tier": "premium",
                "plan_names": "B tv ALL",
                "notes": [
                    "κΈ°λ³Έμ μΌλ΅ OTT ννƒ λ―Έν¬ν•¨",
                    "OTT ν¬ν•¨ μ‹ μμλ£ 10,000μ› μ°¨κ°"
                ]
                },
                {
                "commission": 30000,
                "support_money_min": 450000,
                "support_money_max": 500000,
                "plan_tier": "basic",
                "plan_names": "B tv μ΄μ½”λ…Έλ―Έ",
                "notes": [
                    "κΈ°λ³Έμ μΌλ΅ OTT ννƒ λ―Έν¬ν•¨",
                    "OTT ν¬ν•¨ μ‹ μμλ£ 10,000μ› μ°¨κ°"
                ]
                },
                {
                "commission": 30000,
                "support_money_min": 510000,
                "support_money_max": 550000,
                "plan_tier": "premium",
                "plan_names": "B tv ALL",
                "notes": [
                    "κΈ°λ³Έμ μΌλ΅ OTT ννƒ λ―Έν¬ν•¨",
                    "OTT ν¬ν•¨ μ‹ μμλ£ 10,000μ› μ°¨κ°"
                ]
                },
                {
                "commission": 20000,
                "support_money_min": 510000,
                "support_money_max": 550000,
                "plan_tier": "basic",
                "plan_names": "B tv μ΄μ½”λ…Έλ―Έ",
                "notes": [
                    "κΈ°λ³Έμ μΌλ΅ OTT ννƒ λ―Έν¬ν•¨",
                    "OTT ν¬ν•¨ μ‹ μμλ£ 10,000μ› μ°¨κ°"
                ]
                }
            ]
            },
            "internet_only": {
            "description": "SKλΈλ΅λ“λ°΄λ“ μΈν„°λ„· λ‹¨λ… μƒν’ μ •μ±… (500λ©”κ°€ κΈ°μ¤€, OTT 6μΆ… 3λ…„ λ¬΄λ£ ννƒ μ κ³µ)",
            "general_notes": [],
            "commission_rules": [
                {
                "commission": 60000,
                "support_money": 130000,
                "payout_method": "μ „μ•΅ ν„κΈ"
                },
                {
                "commission": 40000,
                "support_money_min": 140000,
                "support_money_max": 180000,
                "payout_method": "μ „μ•΅ ν„κΈ"
                },
                {
                "commission": 30000,
                "support_money_min": 200000,
                "support_money_max": 250000,
                "payout_method": "μ „μ•΅ ν„κΈ"
                }
            ]
            }
        }
    };

    // --- New JSON Data Structure ---
    const jsonData = {
        "internetPlans_base": [
            {"id": "internet_100m_standalone","name": "100M μΈν„°λ„· (λ‹¨λ…)","price": 22000,"speed_mbps": 100,"note": "λ‹¨λ… κΈ°λ³Έλ£"},
            {"id": "internet_500m_standalone","name": "500M μΈν„°λ„· (λ‹¨λ…)","price": 33000,"speed_mbps": 500,"note": "λ‹¨λ… κΈ°λ³Έλ£"},
            {"id": "internet_1g_standalone","name": "1GB μΈν„°λ„· (λ‹¨λ…)","price": 38500,"speed_mbps": 1000,"note": "λ‹¨λ… κΈ°λ³Έλ£"},
            {"id": "internet_500m_standalone_ott","name": "500M+OTT 6μΆ… 3λ…„ λ¬΄λ£ (λ‹¨λ…)","price": 33000,"speed_mbps": 500,"note": "OTT ννƒ μ κ³µ"},
            {"id": "internet_1g_standalone_ott","name": "1GB+OTT 6μΆ… 3λ…„ λ¬΄λ£ (λ‹¨λ…)","price": 38500,"speed_mbps": 1000,"note": "OTT ννƒ μ κ³µ"}
        ],
        "internetPlans_tv_bundle_prices": [
            {"id": "internet_100m_with_tv","name": "100M μΈν„°λ„· (TV κ²°ν•© μ‹)","price": 19800,"speed_mbps": 100,"note": "TV κ²°ν•© μ‹ μΈν„°λ„· μµμΆ…κ°€ μ¶”μ •"},
            {"id": "internet_500m_with_tv","name": "500M μΈν„°λ„· (TV κ²°ν•© μ‹)","price": 27500,"speed_mbps": 500,"note": "TV κ²°ν•© μ‹ μΈν„°λ„· μµμΆ…κ°€ μ¶”μ •"},
            {"id": "internet_1g_with_tv","name": "1GB μΈν„°λ„· (TV κ²°ν•© μ‹)","price": 33000,"speed_mbps": 1000,"note": "TV κ²°ν•© μ‹ μΈν„°λ„· μµμΆ…κ°€ μ¶”μ •"},
            {"id": "internet_500m_with_tv_ott","name": "500M+OTT 6μΆ… 3λ…„ λ¬΄λ£","price": 27500,"speed_mbps": 500,"note": "OTT ννƒ μ κ³µ"},
            {"id": "internet_1g_with_tv_ott","name": "1GB+OTT 6μΆ… 3λ…„ λ¬΄λ£","price": 33000,"speed_mbps": 1000,"note": "OTT ννƒ μ κ³µ"}
        ],
        "tvPackages": [{"id": "tv_economy_smart3","name": "B tv μ΄μ½”λ…Έλ―Έ (183μ±„λ„) + μ¤λ§νΈ3","price": 14300,"channels": 183,"stb": "μ¤λ§νΈ3"}, {"id": "tv_standard_smart3","name": "B tv μ¤νƒ λ‹¤λ“ (234μ±„λ„) + μ¤λ§νΈ3","price": 17600,"channels": 234,"stb": "μ¤λ§νΈ3"}, {"id": "tv_all_smart3","name": "B tv ALL (257μ±„λ„) + μ¤λ§νΈ3","price": 20900,"channels": 257,"stb": "μ¤λ§νΈ3"}, {"id": "tv_standard_netflix_2p","name": "B tv μ¤νƒ λ‹¤λ“ λ„·ν”λ¦­μ¤ (2μΈ/1080p)","price": 29900,"note": "λ™μ‹μ‹μ²­ 2μΈ/ν•΄μƒλ„ 1080p","base_tv_plan": "μ¤νƒ λ‹¤λ“","netflix_tier": "μ¤νƒ λ‹¤λ“"}, {"id": "tv_standard_netflix_premium_4p","name": "B tv μ¤νƒ λ‹¤λ“ λ„·ν”λ¦­μ¤ ν”„λ¦¬λ―Έμ—„ (4μΈ/4K+HDR)","price": 32900,"note": "λ™μ‹μ‹μ²­ 4μΈ/ν•΄μƒλ„ 4K+HDR","base_tv_plan": "μ¤νƒ λ‹¤λ“","netflix_tier": "ν”„λ¦¬λ―Έμ—„"}, {"id": "tv_all_netflix_2p","name": "B tv ALL λ„·ν”λ¦­μ¤ (2μΈ/1080p)","price": 32400,"note": "λ™μ‹μ‹μ²­ 2μΈ/ν•΄μƒλ„ 1080p","base_tv_plan": "ALL","netflix_tier": "μ¤νƒ λ‹¤λ“"}, {"id": "tv_all_netflix_premium_4p","name": "B tv ALL λ„·ν”λ¦­μ¤ ν”„λ¦¬λ―Έμ—„ (4μΈ/4K+HDR)","price": 35400,"note": "λ™μ‹μ‹μ²­ 4μΈ/ν•΄μƒλ„ 4K+HDR","base_tv_plan": "ALL","netflix_tier": "ν”„λ¦¬λ―Έμ—„"}],
        "additionalTvPackages": [{"id": "addtv_economy_smart3","name": "μ¶”κ°€TV μ΄μ½”λ…Έλ―Έ (183μ±„λ„) + μ¤λ§νΈ3","price": 8250}, {"id": "addtv_economy_apple","name": "μ¶”κ°€TV μ΄μ½”λ…Έλ―Έ (μ• ν”μ…‹νƒ‘)","price": 8250}, {"id": "addtv_standard_smart3","name": "μ¶”κ°€TV μ¤νƒ λ‹¤λ“ (234μ±„λ„) + μ¤λ§νΈ3","price": 9900}, {"id": "addtv_standard_apple","name": "μ¶”κ°€TV μ¤νƒ λ‹¤λ“ (μ• ν”μ…‹νƒ‘)","price": 9900}, {"id": "addtv_all_smart3","name": "μ¶”κ°€TV ALL (257μ±„λ„) + μ¤λ§νΈ3","price": 11550}, {"id": "addtv_all_apple","name": "μ¶”κ°€TV ALL (μ• ν”μ…‹νƒ‘)","price": 11550}],
        "phonePlans": [
            { "id": "phone_landline_new", "name": "μΌλ° μ „ν™”", "price": 1100 },
            { "id": "phone_070_basic_new", "name": "070 μ „ν™” (μΈν„°λ„·+μ „ν™” κΈ°λ³Έ μ”κΈμ  / λ‹¨λ§κΈ° λ€μ—¬ X)", "price": 1100 },
            { "id": "phone_070_free_internet_new", "name": "070 μ „ν™” (μΈν„°λ„·+μ§‘μ „ν™” ν”„λ¦¬ μ”κΈμ  / λ‹¨λ§κΈ° λ€μ—¬ X)", "price": 4400 },
            { "id": "phone_070_free_internet_tv_new", "name": "070 μ „ν™” (μΈν„°λ„·+TV+μ§‘μ „ν™” ν”„λ¦¬ μ”κΈμ  / λ‹¨λ§κΈ° λ€μ—¬ X)", "price": 2200 }
        ],
        "addOnServices": [
            {"id": "wifi_router_default","name": "μ™€μ΄νμ΄ κ³µμ κΈ°","price": 1100, "url": ""}, 
            {"id": "wifi_router_yozoom_100M_tv","name": "μ”μ¦μ°λ¦¬μ§‘κ²°ν•©(μΈ+ν‹° 100Mb) μ‹ κ³µμ κΈ°","price": 2200,"condition": "μ”μ¦μ°λ¦¬μ§‘κ²°ν•© μΈ+ν‹° 100Mb", "url": ""}, 
            {"id": "wifi_router_not_selected","name": "κ³µμ κΈ° μ„ νƒ μ•ν•¨(X)","price": 0, "url": ""},
            { "id": "wings_amplifier", "name": "WINGS (μ¦ν­κΈ°)", "price": 1650, "type": "STB"},
            { "id": "nugu2_stb", "name": "Nugu2 (AI μ…‹ν†±λ°•μ¤)", "price": 2200, "type": "AI STB"},
            { "id": "ai_soundbar_max_stb", "name": "AI μ‚¬μ΄λ“λ°” λ§¥μ¤", "price": 6600, "type": "AI STB"},
            { "id": "apple_tv_stb_promo", "name": "μ• ν”μ…‹νƒ‘ (ν”„λ΅λ¨μ… μ§„ν–‰ μ¤‘)", "price": 0, "type": "STB", "note": "ν”„λ΅λ¨μ… ν™•μΈ ν•„μ”"},
            { "id": "ai4_vision_stb", "name": "AI4 Vision", "price": 8800, "type": "STB"}
        ],
        "bundleInternetDiscounts": [{"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "100M + TV","discount_amount": 3300}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "100M + TV","discount_amount": 3300}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "100M + TV","discount_amount": 3300}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "500M + TV","discount_amount": 6600}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "500M + TV","discount_amount": 5500}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "500M + TV","discount_amount": 6600}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "1GB + TV","discount_amount": 8800}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "1GB + TV","discount_amount": 5500}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "1GB + TV","discount_amount": 8800}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "100M (λ‹¨λ…)","discount_amount": 4400}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "100M (λ‹¨λ…)","discount_amount": 5500}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "100M (λ‹¨λ…)","discount_amount": 4400}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "500M (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "500M (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "500M (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "1GB (λ‹¨λ…)","discount_amount": 13200}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "1GB (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "1GB (λ‹¨λ…)","discount_amount": 13200}],
        "installationFees": {
            "weekday": {
                "internet_standalone": 36300,
                "internet_1g_standalone": 0,
                "internet_1g_tv": 22000,
                "internet_phone_landline": 44000,
                "internet_phone_voip": 37400,
                "internet_tv": 56100,
                "internet_tv_phone": 56100,
                "internet_tv_add": 73700
            },
            "weekend": {
                "internet_standalone": 45375,
                "internet_1g_standalone": 0,
                "internet_1g_tv": 27500,
                "internet_phone_landline": 51700,
                "internet_phone_voip": 45100,
                "internet_tv": 70125,
                "internet_tv_phone": 70125,
                "internet_tv_add": 92125
            },
            "descriptions": {
                "internet_standalone": "μΈν„°λ„· μ„¤μΉλΉ„",
                "internet_1g_standalone": "μ„¤μΉλΉ„ λ©΄μ  (1Gb + μ™€μ΄νμ΄)",
                "internet_1g_tv": "μ„¤μΉλΉ„ λ©΄μ  (1Gb + μ™€μ΄νμ΄) + TV",
                "internet_phone_landline": "μΈν„°λ„· + μΌλ°μ „ν™” μ„¤μΉλΉ„",
                "internet_phone_voip": "μΈν„°λ„· + 070μ „ν™” μ„¤μΉλΉ„",
                "internet_tv": "μΈν„°λ„· + TV μ„¤μΉλΉ„",
                "internet_tv_phone": "μΈν„°λ„· + TV + μΌλ°/070μ „ν™” μ„¤μΉλΉ„",
                "internet_tv_add": "μΈν„°λ„· + TV + TVμ¶”κ°€ μ„¤μΉλΉ„",
                "none": "μ„λΉ„μ¤ λ―Έμ„ νƒ"
            }
        }
    };
    
    // --- Helper Functions ---
    function findItemById(itemList, itemId) {
        if (!itemId || itemId === 'none') return null;
        return itemList.find(item => item.id === itemId) || null;
    }
    
    function processMobilePlans() {
        allMobilePlans = [];
        for (const tier in mobilePlanTiers) {
            mobilePlanTiers[tier].forEach(plan => {
                const price = parseInt(plan.price.replace(/[^0-9]/g, ''));
                const planId = `${plan.plan_name.replace(/[\s\(\)]/g, '_')}_${price}`;
                allMobilePlans.push({
                    id: planId,
                    name: plan.plan_name,
                    price: price,
                    network: plan.network_type,
                    url: plan.url,
                    tier: tier 
                });
            });
        }
        allMobilePlans.sort((a, b) => a.price - b.price);
    }
    
    function updateTvSubOptionsState() {
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        const isInternetStandalone = selectedInternetType === 'standalone';
        const isFirstTvPlanSelected = tvPlanEl.value !== 'none';
    
        const enableTvSubOptions = !isInternetStandalone && isFirstTvPlanSelected;
    
        tvStbEl.disabled = !enableTvSubOptions;
        additionalTvPlanEl.disabled = !enableTvSubOptions;
        phonePlanEl.disabled = isInternetStandalone; 
    
        if (!enableTvSubOptions) {
            tvStbEl.value = 'none';
            additionalTvPlanEl.value = 'none';
        }
        if (isInternetStandalone) {
            phonePlanEl.value = 'none';
        }
    }
    
    // --- Existing Configs (OnGajok, Gifts) ---
    const onGajokDiscountConfig = {
        "internet_discount_rate": {
            "0_9":   { "0_1": 0,    "1_2": 0,    "2_3": 0.05, "3_plus": 0.10 }, // 10λ…„ λ―Έλ§
            "10_19": { "0_1": 0,    "1_2": 0,    "2_3": 0.10, "3_plus": 0.30 }, // 10λ…„ μ΄μƒ ~ 20λ…„ λ―Έλ§
            "20_29": { "0_1": 0.05, "1_2": 0.10, "2_3": 0.20, "3_plus": 0.30 }, // 20λ…„ μ΄μƒ ~ 30λ…„ λ―Έλ§
            "30_plus":{ "0_1": 0.10, "1_2": 0.20, "2_3": 0.30, "3_plus": 0.50 }  // 30λ…„ μ΄μƒ
        },
        "mobileDiscountRate": { "0_9": 0, "10_19": 0, "20_29": 0.10, "30_plus": 0.30 } // Mobile discount remains the same
    };
    const yozoomGajokMobileDiscountReference = { 
        "100": [{ lines: 0, discount: 0 },{ lines: 1, discount: 3500 },{ lines: 2, discount: 7000 },{ lines: 3, discount: 18000 },{ lines: 4, discount: 18000 },{ lines: 5, discount: 18000 }],
        "500_1000": [{ lines: 0, discount: 0 },{ lines: 1, discount: 3500 },{ lines: 2, discount: 7000 },{ lines: 3, discount: 18000 },{ lines: 4, discount: 24000 },{ lines: 5, discount: 24000 }]
    };
    
    // --- Gift Tables (As per original structure, to be kept) ---
    const giftTableSktBase = { 
        "100": { "λ‹¨λ…": 110000, "λ²λ“¤": 430000 }, 
        "500": { "λ‹¨λ…": 170000, "λ²λ“¤": 480000 },
        "1000": { "λ‹¨λ…": 170000, "λ²λ“¤": 480000 } 
    };
    const dongpanGiftTable = { 
        "33K": {"100": {"Economy": 55000, "Standard": 60000, "All": 65000, "λ‹¨λ…": 0 }, "500": {"Economy": 60000, "Standard": 65000, "All": 70000, "λ‹¨λ…": 0 }, "1000": {"Economy": 60000, "Standard": 65000, "All": 70000, "λ‹¨λ…": 0 }},
        "69K": {"100": {"λ‹¨λ…": 130000, "Economy": 159500, "Standard": 174000, "All": 188500 }, "500": {"λ‹¨λ…": 140000, "Economy": 174000, "Standard": 188500, "All": 203000 }, "1000": {"λ‹¨λ…": 140000, "Economy": 174000, "Standard": 188500, "All": 203000 }},
        "80K": {"100": {"λ‹¨λ…": 162500, "Economy": 181500, "Standard": 198000, "All": 214500 }, "500": {"λ‹¨λ…": 175000, "Economy": 198000, "Standard": 214500, "All": 231000 }, "1000": {"λ‹¨λ…": 175000, "Economy": 198000, "Standard": 214500, "All": 231000 }}
    };
    
    // DOM Elements 
    const mobileDiscountDetailsContainerEl = document.getElementById('mobileDiscountDetailsContainer');
    const mobileDiscountBreakdownEl = document.getElementById('mobileDiscountBreakdown');
    const mobileDiscountNoteEl = document.getElementById('mobileDiscountNote');
    const internetTypeRadios = document.querySelectorAll('input[name="internetType"]');
    const internetPlanEl = document.getElementById('internetPlan');
    const wifiRouterEl = document.getElementById('wifiRouter');
    const tvPlanEl = document.getElementById('tvPlan');
    const tvStbEl = document.getElementById('tvStb');
    const additionalTvPlanEl = document.getElementById('additionalTvPlan');
    const phonePlanEl = document.getElementById('phonePlan');
    const mobileLinesCountEl = document.getElementById('mobileLinesCount');
    const mobileLinesContainerEl = document.getElementById('mobileLinesContainer');
    const dongpanSalesCheckEl = document.getElementById('dongpanSalesCheck');
    const dongpanUsimPolicyDetailsContainerEl = document.getElementById('dongpanUsimPolicyDetailsContainer');
    const discountTypeRadios = document.querySelectorAll('input[name="discountType"]');
    const bundleApplicationTimeRadios = document.querySelectorAll('input[name="bundleApplicationTime"]');
    const onGajokYearsGroupEl = document.getElementById('onGajokYearsGroup');
    const onGajokYearsEl = document.getElementById('onGajokYears');
    const internetUsageYearsGroupEl = document.getElementById('internetUsageYearsGroup');
    const internetUsageYearsEl = document.getElementById('internetUsageYears');
    const yozoomGajokDetailsToggleEl = document.getElementById('yozoomGajokDetailsToggle');
    const yozoomGajokDetailsContainerEl = document.getElementById('yozoomGajokDetailsContainer');
    const detailYgInternetDiscountEl = document.getElementById('detailYgInternetDiscount');
    const detailYgInternetTypeEl = document.getElementById('detailYgInternetType');
    const detailYgMobileDiscountEl = document.getElementById('detailYgMobileDiscount');
    const yozoomGajokInternetDiscountTiersEl = document.getElementById('yozoomGajokInternetDiscountTiers');
    const yozoomGajokMobileDiscountTiersEl = document.getElementById('yozoomGajokMobileDiscountTiers');
    const onGajokDetailsToggleEl = document.getElementById('onGajokDetailsToggle');
    const onGajokDetailsContainerEl = document.getElementById('onGajokDetailsContainer');
    const detailOgInternetDiscountEl = document.getElementById('detailOgInternetDiscount');
    const detailOgMobileDiscountEl = document.getElementById('detailOgMobileDiscount');
    const onGajokInternetDiscountTiersEl = document.getElementById('onGajokInternetDiscountTiers');
    const familySktDetailsToggleEl = document.getElementById('familySktDetailsToggle');
    const familySktDetailsContainerEl = document.getElementById('familySktDetailsContainer');
    const detailFsInternetDiscountEl = document.getElementById('detailFsInternetDiscount');
    const familyInternetDiscountTiersEl = document.getElementById('familyInternetDiscountTiers');
    const mvnoSktDetailsToggleEl = document.getElementById('mvnoSktDetailsToggle');
    const mvnoSktDetailsContainerEl = document.getElementById('mvnoSktDetailsContainer');
    const detailMsInternetDiscountEl = document.getElementById('detailMsInternetDiscount');
    const mvnoInternetDiscountTiersEl = document.getElementById('mvnoInternetDiscountTiers');
    const calculateButton = document.getElementById('calculateButton');
    const resetButton = document.getElementById('resetButton');
    const resultSection = document.getElementById('resultSection');
    const generateComparisonButton = document.getElementById('generateComparisonButton');
    const affiliateCardSelectEl = document.getElementById('affiliateCardSelect');
    const cardTierGroupEl = document.getElementById('cardTierGroup');
    const cardTierSelectEl = document.getElementById('cardTierSelect');
    const commissionSelectEl = document.getElementById('commissionSelect');
    
    const suggestionBarEl = document.getElementById('suggestionBar');
    const suggestionNameEl = document.getElementById('suggestionName');
    const suggestionBenefitEl = document.getElementById('suggestionBenefit');
    const suggestionButtonEl = document.getElementById('suggestionButton');
    const generateBundleComparisonButton = document.getElementById('generateBundleComparisonButton');

    const summaryMonthlyCostEl = document.getElementById('summaryMonthlyCost');
    const summaryTotalGiftEl = document.getElementById('summaryTotalGift');
    const summaryInternetDiscountEl = document.getElementById('summaryInternetDiscount');
    const summaryMobileDiscountEl = document.getElementById('summaryMobileDiscount');
    const toggleDetailsButtonEl = document.getElementById('toggleDetailsButton');
    const detailsContainerEl = document.getElementById('detailsContainer');
    
    const selectedInternetEl = document.getElementById('selectedInternet');
    const selectedTvEl = document.getElementById('selectedTv');
    const selectedStbEl = document.getElementById('selectedStb');
    const selectedAdditionalTvEl = document.getElementById('selectedAdditionalTv');
    const selectedPhoneEl = document.getElementById('selectedPhone');
    const selectedWifiEl = document.getElementById('selectedWifi');
    const selectedMobileCountEl = document.getElementById('selectedMobileCount');
    const selectedDiscountTypeEl = document.getElementById('selectedDiscountType');
    const selectedOnGajokYearsEl = document.getElementById('selectedOnGajokYears');
    const onGajokYearsResultContainerEl = document.getElementById('onGajokYearsResultContainer');
    const totalBaseInternetCostEl = document.getElementById('totalBaseInternetCost');
    const totalInternetDiscountAmountEl = document.getElementById('totalInternetDiscountAmount');
    const internetDiscountBreakdownEl = document.getElementById('internetDiscountBreakdown');
    const cardDiscountSummaryContainerEl = document.getElementById('cardDiscountSummaryContainer');
    const totalCardDiscountAmountEl = document.getElementById('totalCardDiscountAmount');
    const cardDiscountBreakdownEl = document.getElementById('cardDiscountBreakdown');
    const wifiRouterRentalCostDisplayEl = document.getElementById('wifiRouterRentalCostDisplay');
    const tvCostSummaryContainerEl = document.getElementById('tvCostSummaryContainer');
    const tvBaseCostDisplayEl = document.getElementById('tvBaseCostDisplay');
    const stbRentalCostDisplayEl = document.getElementById('stbRentalCostDisplay');
    const additionalTvCostSummaryContainerEl = document.getElementById('additionalTvCostSummaryContainer');
    const additionalTvCostDisplayEl = document.getElementById('additionalTvCostDisplay');
    const phoneCostSummaryContainerEl = document.getElementById('phoneCostSummaryContainer');
    const phoneBaseCostDisplayEl = document.getElementById('phoneBaseCostDisplay');
    const finalMonthlyCostEl = document.getElementById('finalMonthlyCost');
    const finalCostLabelTextEl = document.getElementById('finalCostLabelText');
    const finalCostLabelQualifierEl = document.getElementById('finalCostLabelQualifier');
    const installationCostResultEl = document.getElementById('installationCostResult');
    const installationCostDescriptionEl = document.getElementById('installationCostDescription');
    const giftBaseInternetEl = document.getElementById('giftBaseInternet');
    const additionalDongpanCashContainerEl = document.getElementById('additionalDongpanCashContainer');
    const giftAdditionalDongpanCashEl = document.getElementById('giftAdditionalDongpanCash');
    const giftTotalEl = document.getElementById('giftTotal');
    const giftEligibilityNoteEl = document.getElementById('giftEligibilityNote');
    const messageScriptSectionEl = document.getElementById('messageScriptSection');
    const memoScriptEl = document.getElementById('memoScript');
    const infoScriptEl = document.getElementById('infoScript');
    const completeScriptEl = document.getElementById('completeScript');
    const usimDongpanCompleteScriptEl = document.getElementById('usimDongpanCompleteScript');
    const sensitiveInfoLinkScriptEl = document.getElementById('sensitiveInfoLinkScript');
    const generateTco100MbpsButton = document.getElementById('generateTco100MbpsButton');
    const generateTco500MbpsButton = document.getElementById('generateTco500MbpsButton');
    const tcoComparisonResultScriptEl = document.getElementById('tcoComparisonResultScript');
    const penaltyAnalysisScriptEl = document.getElementById('penaltyAnalysisScript');
    const waiverInfoScriptEl = document.getElementById('waiverInfoScript');
    const vatToggleEl = document.getElementById('vatToggle');

    function getAdjustedPrice(price, vatIncluded = vatToggleEl.checked) {
        if (price === 0 || !price) return 0;
        if (vatIncluded) {
            return price;
        }
        // VAT λ³„λ„: 1.1λ΅ λ‚λ„κ³  10μ› λ‹¨μ„λ΅ λ‚΄λ¦Ό
        return Math.floor((price / 1.1) / 10) * 10;
    }
    
    function manageWifiSelection() {
        const selectedInternetId = internetPlanEl.value;
        if (selectedInternetId === 'none') {
            wifiRouterEl.disabled = false;
            if (wifiRouterEl.value === 'wifi_router_yozoom_100M_tv') {
                wifiRouterEl.value = "wifi_router_default";
            }
            return;
        }
    
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        const selectedDiscountType = document.querySelector('input[name="discountType"]:checked').value;
    
        const internetPlanInfo = (selectedInternetType === 'bundle') ?
            findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) :
            findItemById(jsonData.internetPlans_base, selectedInternetId);
    
        const tvSelected = tvPlanEl.value !== 'none';
    
        const isYozoomWifiCondition = internetPlanInfo &&
                                        internetPlanInfo.speed_mbps === 100 &&
                                        selectedInternetType === 'bundle' &&
                                        tvSelected &&
                                        selectedDiscountType === 'noBundleDiscount';
    
        if (isYozoomWifiCondition) {
            wifiRouterEl.value = "wifi_router_yozoom_100M_tv";
            wifiRouterEl.disabled = true;
        } else {
            wifiRouterEl.disabled = false;
            if (wifiRouterEl.value === 'wifi_router_yozoom_100M_tv') {
                wifiRouterEl.value = "wifi_router_default";
            }
        }
    }
    
    
    function updateVisibleDetails() {
        allDetailSectionsSkt.forEach(section => {
            if (section.toggleEl && section.toggleEl.checked && section.updateFn) {
                section.updateFn();
            }
        });
    }
    
    function populateCommissionSelect() {
        const isStandalone = document.querySelector('input[name="internetType"]:checked').value === 'standalone';
        const rules = isStandalone ? commissionData.SK.internet_only.commission_rules : commissionData.SK.internet_tv.commission_rules;

        const uniqueCommissions = [...new Set(rules.map(rule => rule.commission))];
        uniqueCommissions.sort((a, b) => b - a); // Sort descending

        commissionSelectEl.innerHTML = '<option value="none">μμλ£ μ„ νƒ</option>';
        uniqueCommissions.forEach(commission => {
            const option = document.createElement('option');
            option.value = commission;
            option.textContent = `${commission.toLocaleString()}μ›`;
            commissionSelectEl.appendChild(option);
        });
    }
    
    function populateInternetPlansDropdown() {
        const selectedType = document.querySelector('input[name="internetType"]:checked').value;
        let plansToShow;
        if (selectedType === 'bundle') {
            plansToShow = jsonData.internetPlans_tv_bundle_prices;
        } else {
            plansToShow = jsonData.internetPlans_base;
        }
        const currentSelectedInternetId = internetPlanEl.value;
        
        populateSelectWithOptions(internetPlanEl, plansToShow, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price', 'note');
        
        const existingOption = plansToShow.find(p => p.id === currentSelectedInternetId);
        if (existingOption) {
            internetPlanEl.value = currentSelectedInternetId;
        } else if (plansToShow.length > 0) {
             internetPlanEl.value = plansToShow[0].id; 
        } else {
            internetPlanEl.value = 'none';
        }
        handleInternetTypeChange(); 
    }
    
    
    function populateSelectWithOptions(selectElement, items, defaultOptionText = "μ„ νƒ μ•ν•¨", valueField = 'id', nameField = 'name', priceField = 'price', noteField = 'note') {
        if (!selectElement) {
            console.error("Select element not found for population:", selectElement);
            return;
        }
        selectElement.innerHTML = ''; 
        if (defaultOptionText && valueField === 'id') { 
            const defaultOpt = document.createElement('option');
            defaultOpt.value = 'none';
            defaultOpt.textContent = defaultOptionText;
            selectElement.appendChild(defaultOpt);
        }
        items.forEach(item => {
            const option = document.createElement('option');
            option.value = item[valueField];
            let displayText = item[nameField]; 
    
            if (priceField && item[priceField] > 0) {
                 const adjustedPrice = getAdjustedPrice(item[priceField]);
                 displayText += ` (${adjustedPrice.toLocaleString()}μ›)`;
            } else if (noteField && item[noteField] && item.price === 0) { 
                 displayText += ` (${item[noteField]})`;
            } else if (noteField && item[noteField] && !item[priceField]) { 
                 displayText += ` (${item[noteField]})`;
            }
    
            option.textContent = displayText;
            option.dataset.price = item[priceField] !== undefined ? item[priceField] : 0;
            if(item.speed_mbps) option.dataset.speed = item.speed_mbps;
            if(item.type) option.dataset.type = item.type;
            if(item.channels) option.dataset.channels = item.channels;
            if(item.stb) option.dataset.defaultStb = item.stb; 
            if(item.note) option.dataset.note = item.note;
            
            selectElement.appendChild(option);
        });
    }

    function populateAffiliateCards() {
        affiliateCardSelectEl.innerHTML = '<option value="none">μ„ νƒ μ•ν•¨</option>';

        const sktGroup = document.createElement('optgroup');
        sktGroup.label = "SKT μ ν΄μΉ΄λ“";
        affiliateCards.skt.forEach(card => {
            const option = document.createElement('option');
            option.value = card.id;
            option.textContent = card.name;
            sktGroup.appendChild(option);
        });
        affiliateCardSelectEl.appendChild(sktGroup);
        
        const skbGroup = document.createElement('optgroup');
        skbGroup.label = "SKλΈλ΅λ“λ°΄λ“ μ ν΄μΉ΄λ“";
        affiliateCards.skb.forEach(card => {
            const option = document.createElement('option');
            option.value = card.id;
            option.textContent = card.name;
            skbGroup.appendChild(option);
        });
        affiliateCardSelectEl.appendChild(skbGroup);
    }
    
    function initializeSelects() {
        processMobilePlans();
        populateInternetPlansDropdown(); 
        populateAffiliateCards();
        populateCommissionSelect();
        
        const wifiOptions = jsonData.addOnServices.filter(s => s.name.includes("μ™€μ΄νμ΄") || s.name.includes("κ³µμ κΈ°"));
        populateSelectWithOptions(wifiRouterEl, wifiOptions, "κ³µμ κΈ° μ„ νƒ μ•ν•¨(X)", 'id', 'name', 'price', 'note');
        
        const specialStbOptions = jsonData.addOnServices.filter(s => s.type === "AI STB" || s.type === "STB");
        populateSelectWithOptions(tvStbEl, specialStbOptions, "μ„ νƒ μ•ν•¨ (κΈ°λ³Έμ…‹ν†± μ‚¬μ©)", 'id', 'name', 'price', 'note');
        
        populateSelectWithOptions(tvPlanEl, jsonData.tvPackages, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price');
        
        populateSelectWithOptions(additionalTvPlanEl, jsonData.additionalTvPackages, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price');
        populateSelectWithOptions(phonePlanEl, jsonData.phonePlans, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price');
    }
    
    
    internetTypeRadios.forEach(radio => {
        radio.addEventListener('change', () => {
            populateInternetPlansDropdown();
            populateCommissionSelect();
            manageWifiSelection();
            updateVisibleDetails();
            updateMobilePlanAvailability();
        });
    });
    
    mobileLinesCountEl.addEventListener('input', () => {
        updateMobileLinesInputs();
        updateVisibleDetails();
    });
    
    calculateButton.addEventListener('click', async () => {
        const results = calculatePlanDetails();
        await displayResults(results);
    });

    resetButton.addEventListener('click', setInitialDefaults);
    
    generateComparisonButton.addEventListener('click', generateComparisonScript);

    generateBundleComparisonButton.addEventListener('click', generateBundleComparisonScript);

    toggleDetailsButtonEl.addEventListener('click', () => {
        const isHidden = detailsContainerEl.classList.toggle('hidden');
        if (isHidden) {
            toggleDetailsButtonEl.innerHTML = 'μƒμ„Έ μ”κΈ λ‚΄μ—­ νΌμ³λ³΄κΈ° β–Ό';
        } else {
            toggleDetailsButtonEl.innerHTML = 'μƒμ„Έ μ”κΈ λ‚΄μ—­ μ ‘κΈ° β–²';
        }
    });
    
    dongpanSalesCheckEl.addEventListener('change', function() {
        dongpanUsimPolicyDetailsContainerEl.classList.toggle('hidden', !this.checked);
        updateMobilePlanAvailability();
        if (!resultSection.classList.contains('hidden')) { 
            const results = calculatePlanDetails();
            displayResults(results);
        }
    });
    
    const allDetailSectionsSkt = [
        { radioValue: 'μ”μ¦κ°€μ΅±κ²°ν•©', toggleEl: yozoomGajokDetailsToggleEl, containerEl: yozoomGajokDetailsContainerEl, updateFn: updateYozoomGajokDetails },
        { radioValue: 'μ¨κ°€μ΅±ν• μΈ', toggleEl: onGajokDetailsToggleEl, containerEl: onGajokDetailsContainerEl, updateFn: updateOnGajokDetails },
        { radioValue: 'ν¨λ°€λ¦¬κ²°ν•©', toggleEl: familySktDetailsToggleEl, containerEl: familySktDetailsContainerEl, updateFn: updateFamilySktDetails },
        { radioValue: 'μ•λ°ν• κ²°ν•©', toggleEl: mvnoSktDetailsToggleEl, containerEl: mvnoSktDetailsContainerEl, updateFn: updateMvnoSktDetails },
        { radioValue: 'noBundleDiscount', toggleEl: null, containerEl: null, updateFn: null } 
    ];
    
    discountTypeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            onGajokYearsGroupEl.classList.toggle('hidden', this.value !== 'μ¨κ°€μ΅±ν• μΈ');
            internetUsageYearsGroupEl.classList.toggle('hidden', this.value !== 'μ¨κ°€μ΅±ν• μΈ');
            
            if (this.value === 'noBundleDiscount' || this.value === 'ν¨λ°€λ¦¬κ²°ν•©' || this.value === 'μ•λ°ν• κ²°ν•©') {
                mobileLinesCountEl.value = 0;
                mobileLinesCountEl.disabled = true;
            } else {
                mobileLinesCountEl.disabled = false;
                if (this.value === 'μ”μ¦κ°€μ΅±κ²°ν•©' || this.value === 'μ¨κ°€μ΅±ν• μΈ') {
                    if (parseInt(mobileLinesCountEl.value) === 0) {
                        mobileLinesCountEl.value = 1;
                    }
                }
            }
            updateMobileLinesInputs(); 
    
            manageWifiSelection();
    
            allDetailSectionsSkt.forEach(section => {
                if (section.containerEl) { 
                    let isVisible = false;
                    if (this.value === section.radioValue) { 
                        if (section.toggleEl) { 
                            isVisible = section.toggleEl.checked; 
                            if (isVisible && section.updateFn) {
                                section.updateFn();
                            }
                        }
                    } else { 
                        if(section.toggleEl) section.toggleEl.checked = false; 
                        isVisible = false; 
                    }
                    section.containerEl.classList.toggle('hidden', !isVisible);
                } else if (this.value !== section.radioValue && section.toggleEl) { 
                    section.toggleEl.checked = false;
                    if(section.containerEl) section.containerEl.classList.add('hidden');
                }
            });
            if (!resultSection.classList.contains('hidden')) { 
                const results = calculatePlanDetails();
                displayResults(results);
            } 
        });
    });
    
    allDetailSectionsSkt.forEach(section => {
        if (section.toggleEl) {
            section.toggleEl.addEventListener('change', function() {
                const selectedRadio = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`);
                if (selectedRadio && selectedRadio.checked) { 
                    section.containerEl.classList.toggle('hidden', !this.checked);
                    if (this.checked && section.updateFn) {
                        section.updateFn();
                    }
                }
            });
        }
    });
    
    function handleInternetTypeChange() {
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        const isStandaloneInternet = selectedInternetType === 'standalone';
    
        tvPlanEl.disabled = isStandaloneInternet;
        phonePlanEl.disabled = isStandaloneInternet; 
    
        if (isStandaloneInternet) {
            tvPlanEl.value = 'none'; 
            phonePlanEl.value = 'none';
        }
        updateTvSubOptionsState(); 
    }
    
    internetPlanEl.addEventListener('change', () => {
        const isOttPlan = internetPlanEl.value.includes('_ott');
        document.getElementById('commissionSection').classList.toggle('hidden', !isOttPlan);

        manageWifiSelection();
        updateVisibleDetails();
        if (!resultSection.classList.contains('hidden')) { 
            const results = calculatePlanDetails();
            displayResults(results);
        }
    });
    
    
    tvPlanEl.addEventListener('change', () => { 
        updateTvSubOptionsState();
        manageWifiSelection();
        updateVisibleDetails();
        if (!resultSection.classList.contains('hidden')) { 
            const results = calculatePlanDetails();
            displayResults(results);
        }
    });
    
     [wifiRouterEl, tvStbEl, additionalTvPlanEl, phonePlanEl, onGajokYearsEl, internetUsageYearsEl, affiliateCardSelectEl, cardTierSelectEl, commissionSelectEl].forEach(el => {
         if(el) el.addEventListener('change', () => {
             if(el.id === 'affiliateCardSelect') handleCardChange();
             updateVisibleDetails();
             if (!resultSection.classList.contains('hidden')) { 
                 const results = calculatePlanDetails();
                 displayResults(results);
             }
         });
     });

    vatToggleEl.addEventListener('change', () => {
        const selections = {
            internet: internetPlanEl.value,
            wifi: wifiRouterEl.value,
            tv: tvPlanEl.value,
            stb: tvStbEl.value,
            addTv: additionalTvPlanEl.value,
            phone: phonePlanEl.value,
            card: affiliateCardSelectEl.value,
            cardTier: cardTierSelectEl.value,
            commission: commissionSelectEl.value
        };

        initializeSelects();

        internetPlanEl.value = selections.internet;
        wifiRouterEl.value = selections.wifi;
        tvPlanEl.value = selections.tv;
        tvStbEl.value = selections.stb;
        additionalTvPlanEl.value = selections.addTv;
        phonePlanEl.value = selections.phone;
        affiliateCardSelectEl.value = selections.card;
        commissionSelectEl.value = selections.commission;

        if(selections.card !== 'none') {
            handleCardChange();
            cardTierSelectEl.value = selections.cardTier;
        }

        if (!resultSection.classList.contains('hidden')) {
            const results = calculatePlanDetails();
            displayResults(results);
        }
    });

    bundleApplicationTimeRadios.forEach(radio => {
        radio.addEventListener('change', () => {
            if (!resultSection.classList.contains('hidden')) {
                 const results = calculatePlanDetails();
                 displayResults(results);
            }
        });
    });
    
    generateTco100MbpsButton.addEventListener('click', () => generateTcoScript('100M'));
    generateTco500MbpsButton.addEventListener('click', () => generateTcoScript('500M'));

    function updateMobilePlanAvailability() {
        const isInternetStandalone = document.querySelector('input[name="internetType"][value="standalone"]').checked;
        const isDongpanChecked = dongpanSalesCheckEl.checked;
        const shouldDisableTplanSave = isInternetStandalone && isDongpanChecked;
    
        const tPlanSaveId = allMobilePlans.find(p => p.name === 'Tν”λμ„Έμ΄λΈ' && p.price === 33000)?.id;
        if (!tPlanSaveId) return;
    
        const mobilePlanSelects = document.querySelectorAll('[id^="mobilePlan"]');
        mobilePlanSelects.forEach(select => {
            const optionToModify = select.querySelector(`option[value="${tPlanSaveId}"]`);
            if (optionToModify) {
                const wasSelectedAndIsNowDisabled = optionToModify.selected && shouldDisableTplanSave;
                
                optionToModify.disabled = shouldDisableTplanSave;

                if (wasSelectedAndIsNowDisabled) {
                    const firstAvailableOption = Array.from(select.options).find(opt => !opt.disabled);
                    if (firstAvailableOption) {
                        select.value = firstAvailableOption.value;
                    }
                }
            }
        });
    }
    
    function updateMobileLinesInputs() {
        const discountType = document.querySelector('input[name="discountType"]:checked').value;
        const count = parseInt(mobileLinesCountEl.value) || 0;
        mobileLinesContainerEl.innerHTML = '';
        for (let i = 0; i < count; i++) {
            const div = document.createElement('div');
            div.className = 'mobile-line-item';
            
            const planLabel = document.createElement('label');
            planLabel.htmlFor = `mobilePlan${i}`;
            planLabel.className = 'block text-sm font-medium text-slate-600 mb-1';
            planLabel.textContent = `νμ„  ${i + 1} μ”κΈμ `;
            
            const select = document.createElement('select');
            select.id = `mobilePlan${i}`;
            select.className = 'select-field';
            
            if (i === 0) {
                const noPlanOption = document.createElement('option');
                noPlanOption.value = 'none';
                noPlanOption.textContent = 'μ”κΈμ  μ„ νƒμ—†μ';
                select.appendChild(noPlanOption);
            }

            allMobilePlans.forEach(plan => {
                const option = document.createElement('option');
                option.value = plan.id;
                option.textContent = `${plan.name} (${plan.price.toLocaleString()}μ›)`;
                select.appendChild(option);
            });
            
            if (i === 0 && (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©' || discountType === 'μ¨κ°€μ΅±ν• μΈ')) {
                 select.value = 'none';
            } else {
                 const defaultPlanId = allMobilePlans.find(p => p.name === 'Tν”λμ„Έμ΄λΈ' && p.price === 33000)?.id || allMobilePlans[0]?.id;
                 select.value = defaultPlanId;
            }

            const contractDiv = document.createElement('div');
            contractDiv.className = 'mt-2';
            
            const contractLabel = document.createElement('label');
            contractLabel.className = 'radio-label text-sm';
            
            const contractCheckbox = document.createElement('input');
            contractCheckbox.type = 'checkbox';
            contractCheckbox.id = `selectiveContractCheck${i}`;
            contractCheckbox.className = 'radio-input';
            
            contractLabel.appendChild(contractCheckbox);
            contractLabel.append(' μ„ νƒμ•½μ • (25% μ¶”κ°€ ν• μΈ)');
            contractDiv.appendChild(contractLabel);
            
            div.appendChild(planLabel);
            div.appendChild(select);
            div.appendChild(contractDiv);
            mobileLinesContainerEl.appendChild(div);
            
            const recalculateOnChange = () => {
                if (!resultSection.classList.contains('hidden')) {
                    const results = calculatePlanDetails();
                    displayResults(results);
                }
                 updateVisibleDetails();
            };

            select.addEventListener('change', recalculateOnChange);
            contractCheckbox.addEventListener('change', recalculateOnChange);
        }
        updateMobilePlanAvailability();
        if (!resultSection.classList.contains('hidden')) { 
            const results = calculatePlanDetails();
            displayResults(results);
        }
    }
    
    function updateYozoomGajokDetails() {
        const selectedInternetId = internetPlanEl.value;
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        let internetPlanInfo;
        if (selectedInternetType === 'bundle') {
            internetPlanInfo = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) || { speed_mbps: 0, price: 0 };
        } else {
            internetPlanInfo = findItemById(jsonData.internetPlans_base, selectedInternetId) || { speed_mbps: 0, price: 0 };
        }
    
        const tvSelectedId = tvPlanEl.value;
        const tvPackage = findItemById(jsonData.tvPackages, tvSelectedId);
        const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
    
        let internetSpeedType = "";
        if (internetPlanInfo && internetPlanInfo.speed_mbps === 100) internetSpeedType = "100M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps === 500) internetSpeedType = "500M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps >= 1000) internetSpeedType = "1GB"; 
        
        let discountCondition = "";
        if (internetSpeedType) {
            discountCondition = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
        }
    
        let currentInternetDiscountAmount = 0;
        const discountEntry = jsonData.bundleInternetDiscounts.find(
            d => d.bundle_name === "μ”μ¦κ°€μ΅±κ²°ν•©" && d.condition === discountCondition
        );
        if (discountEntry) {
            currentInternetDiscountAmount = discountEntry.discount_amount;
        }
        
        detailYgInternetDiscountEl.textContent = getAdjustedPrice(currentInternetDiscountAmount).toLocaleString();
        detailYgInternetTypeEl.textContent = `(${discountCondition} μ μ© μ‹)`;
    
        let detailMobileD = 0;
        if (internetPlanInfo) {
            let mobileDiscountKey = internetPlanInfo.speed_mbps === 100 ? "100" : "500_1000"; 
            const tiers = yozoomGajokMobileDiscountReference[mobileDiscountKey]; 
            if (tiers) {
                const tier = tiers.find(t => t.lines === numMobileLines) || (numMobileLines > 0 && numMobileLines <=5 ? tiers.find(t => t.lines === Math.min(numMobileLines, 5)) : {discount:0});
                if (tier) detailMobileD = tier.discount;
            }
        }
        detailYgMobileDiscountEl.textContent = getAdjustedPrice(detailMobileD).toLocaleString();
    
        if(yozoomGajokInternetDiscountTiersEl) {
            yozoomGajokInternetDiscountTiersEl.innerHTML = '';
            ["100M", "500M", "1GB"].forEach(speed => {
                const standaloneDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ”μ¦κ°€μ΅±κ²°ν•©" && d.condition === `${speed} (λ‹¨λ…)`)?.discount_amount || 0;
                const tvBundleDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ”μ¦κ°€μ΅±κ²°ν•©" && d.condition === `${speed} + TV`)?.discount_amount || 0;
                const li = document.createElement('li');
                li.textContent = `${speed}: λ‹¨λ… μ‹ ${getAdjustedPrice(standaloneDiscount).toLocaleString()}μ›, TVκ²°ν•© μ‹ ${getAdjustedPrice(tvBundleDiscount).toLocaleString()}μ› ν• μΈ`;
                yozoomGajokInternetDiscountTiersEl.appendChild(li);
            });
        }
        if(yozoomGajokMobileDiscountTiersEl && internetPlanInfo) { 
            yozoomGajokMobileDiscountTiersEl.innerHTML = ''; 
            const speedKey = internetPlanInfo.speed_mbps === 100 ? "100" : "500_1000";
            (yozoomGajokMobileDiscountReference[speedKey] || []).forEach(tier => {
                const li = document.createElement('li');
                li.textContent = `${tier.lines}νμ„  κ²°ν•© μ‹ μ΄ ${getAdjustedPrice(tier.discount).toLocaleString()}μ› λ¨λ°”μΌ ν• μΈ (μ°Έκ³ μ©)`;
                yozoomGajokMobileDiscountTiersEl.appendChild(li);
            });
        }
    }
    
    function updateOnGajokDetails() {
        const selectedInternetId = internetPlanEl.value;
        let internetPlanForSpeed = findItemById(jsonData.internetPlans_base, selectedInternetId) || 
                                     findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId);
        if (!internetPlanForSpeed) {
            detailOgInternetDiscountEl.textContent = "0";
            detailOgMobileDiscountEl.textContent = "0%";
            if (onGajokInternetDiscountTiersEl) onGajokInternetDiscountTiersEl.innerHTML = '<li>μΈν„°λ„· μ”κΈμ λ¥Ό μ„ νƒν•΄μ£Όμ„Έμ”.</li>';
            return;
        }
        
        const standalonePlanForOnGajok = jsonData.internetPlans_base.find(p => p.speed_mbps === internetPlanForSpeed.speed_mbps);
        if (!standalonePlanForOnGajok) {
             detailOgInternetDiscountEl.textContent = "0";
             detailOgMobileDiscountEl.textContent = "0%";
             if (onGajokInternetDiscountTiersEl) onGajokInternetDiscountTiersEl.innerHTML = '<li>ν•΄λ‹Ή μ†λ„μ λ‹¨λ… μ”κΈμ  μ •λ³΄λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.</li>';
             return;
        }

        const internetPriceForCalc = standalonePlanForOnGajok.price; 
        const yearsKey = onGajokYearsEl.value;
        const internetYearsKey = internetUsageYearsEl.value;
        const internetDiscountRate = onGajokDiscountConfig.internet_discount_rate[yearsKey]?.[internetYearsKey] || 0;
        const mobileDiscountRate = onGajokDiscountConfig.mobileDiscountRate[yearsKey] || 0;
        const calculatedInternetDiscount = Math.floor(internetPriceForCalc * internetDiscountRate);
        
        detailOgInternetDiscountEl.textContent = getAdjustedPrice(calculatedInternetDiscount).toLocaleString();
        detailOgMobileDiscountEl.textContent = `${(mobileDiscountRate * 100).toFixed(0)}%`;
    
        if (onGajokInternetDiscountTiersEl) {
            onGajokInternetDiscountTiersEl.innerHTML = '';
            const yearTextOption = onGajokYearsEl.querySelector(`option[value="${yearsKey}"]`);
            const yearText = yearTextOption ? yearTextOption.textContent : yearsKey;

            const headerLi = document.createElement('li');
            headerLi.innerHTML = `<strong>${yearText}</strong>μ μΈν„°λ„· μ‚¬μ© κΈ°κ°„λ³„ ν• μΈμ¨ (κΈ°μ¤€: ${standalonePlanForOnGajok.name} ${getAdjustedPrice(internetPriceForCalc).toLocaleString()}μ›):`;
            onGajokInternetDiscountTiersEl.appendChild(headerLi);

            const subUl = document.createElement('ul');
            subUl.className = 'list-disc list-inside ml-4';
            onGajokInternetDiscountTiersEl.appendChild(subUl);

            const internetYearOptions = Array.from(internetUsageYearsEl.options);
            const ratesForSelectedYears = onGajokDiscountConfig.internet_discount_rate[yearsKey];

            for(const option of internetYearOptions) {
                const iYearsKey = option.value;
                const iYearsText = option.text;
                const rate = ratesForSelectedYears[iYearsKey] || 0;
                const exampleDiscount = Math.floor(internetPriceForCalc * rate);
                const li = document.createElement('li');
                li.innerHTML = `${iYearsText}: <strong>${(rate * 100).toFixed(0)}%</strong> (${getAdjustedPrice(exampleDiscount).toLocaleString()}μ›) ν• μΈ`;
                if(iYearsKey === internetYearsKey) {
                    li.style.fontWeight = 'bold';
                    li.style.color = '#dc2626';
                }
                subUl.appendChild(li);
            }
        }
    }
    
    function updateFamilySktDetails() { 
        const selectedInternetId = internetPlanEl.value;
         const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        let internetPlanInfo;
        if (selectedInternetType === 'bundle') {
            internetPlanInfo = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) || { speed_mbps: 0 };
        } else {
            internetPlanInfo = findItemById(jsonData.internetPlans_base, selectedInternetId) || { speed_mbps: 0 };
        }
    
        const tvSelectedId = tvPlanEl.value;
        const tvPackage = findItemById(jsonData.tvPackages, tvSelectedId);
    
        let internetSpeedType = "";
        if (internetPlanInfo && internetPlanInfo.speed_mbps === 100) internetSpeedType = "100M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps === 500) internetSpeedType = "500M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps >= 1000) internetSpeedType = "1GB";
    
        let discountCondition = "";
         if (internetSpeedType) {
            discountCondition = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
        }
        
        let currentInternetDiscountAmount = 0;
        const discountEntry = jsonData.bundleInternetDiscounts.find(
            d => d.bundle_name === "ν¨λ°€λ¦¬κ²°ν•©" && d.condition === discountCondition
        );
        if (discountEntry) {
            currentInternetDiscountAmount = discountEntry.discount_amount;
        }
        
        detailFsInternetDiscountEl.textContent = getAdjustedPrice(currentInternetDiscountAmount).toLocaleString();
         if(familyInternetDiscountTiersEl) {
            familyInternetDiscountTiersEl.innerHTML = '';
            ["100M", "500M", "1GB"].forEach(speed => {
                const standaloneDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "ν¨λ°€λ¦¬κ²°ν•©" && d.condition === `${speed} (λ‹¨λ…)`)?.discount_amount || 0;
                const tvBundleDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "ν¨λ°€λ¦¬κ²°ν•©" && d.condition === `${speed} + TV`)?.discount_amount || 0;
                 const li = document.createElement('li');
                li.textContent = `${speed}: λ‹¨λ… μ‹ ${getAdjustedPrice(standaloneDiscount).toLocaleString()}μ›, TVκ²°ν•© μ‹ ${getAdjustedPrice(tvBundleDiscount).toLocaleString()}μ› ν• μΈ`;
                familyInternetDiscountTiersEl.appendChild(li);
            });
        }
    }
    
    function updateMvnoSktDetails() { 
        const selectedInternetId = internetPlanEl.value;
         const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        let internetPlanInfo;
        if (selectedInternetType === 'bundle') {
            internetPlanInfo = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) || { speed_mbps: 0 };
        } else {
            internetPlanInfo = findItemById(jsonData.internetPlans_base, selectedInternetId) || { speed_mbps: 0 };
        }
        const tvSelectedId = tvPlanEl.value;
        const tvPackage = findItemById(jsonData.tvPackages, tvSelectedId);
    
        let internetSpeedType = "";
        if (internetPlanInfo && internetPlanInfo.speed_mbps === 100) internetSpeedType = "100M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps === 500) internetSpeedType = "500M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps >= 1000) internetSpeedType = "1GB";
        
        let discountCondition = "";
        if (internetSpeedType) {
            discountCondition = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
        }
        
        let currentInternetDiscountAmount = 0;
        const discountEntry = jsonData.bundleInternetDiscounts.find(
            d => d.bundle_name === "μ•λ°ν• κ²°ν•©" && d.condition === discountCondition
        );
        if (discountEntry) {
            currentInternetDiscountAmount = discountEntry.discount_amount;
        }
        
        detailMsInternetDiscountEl.textContent = getAdjustedPrice(currentInternetDiscountAmount).toLocaleString();
        if(mvnoInternetDiscountTiersEl) {
            mvnoInternetDiscountTiersEl.innerHTML = '';
             ["100M", "500M", "1GB"].forEach(speed => {
                const standaloneDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ•λ°ν• κ²°ν•©" && d.condition === `${speed} (λ‹¨λ…)`)?.discount_amount || 0;
                const tvBundleDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ•λ°ν• κ²°ν•©" && d.condition === `${speed} + TV`)?.discount_amount || 0;
                const li = document.createElement('li');
                li.textContent = `${speed}: λ‹¨λ… μ‹ ${getAdjustedPrice(standaloneDiscount).toLocaleString()}μ›, TVκ²°ν•© μ‹ ${getAdjustedPrice(tvBundleDiscount).toLocaleString()}μ› ν• μΈ`;
                mvnoInternetDiscountTiersEl.appendChild(li);
            });
        }
    }

    function handleCardChange() {
        const selectedCardId = affiliateCardSelectEl.value;
        cardTierSelectEl.innerHTML = '';
        if (selectedCardId === 'none') {
            cardTierGroupEl.classList.add('hidden');
            return;
        }

        const cardData = affiliateCards.skt.find(c => c.id === selectedCardId) || affiliateCards.skb.find(c => c.id === selectedCardId);
        
        if (cardData && cardData.tiers) {
            cardTierSelectEl.innerHTML = '<option value="none">μ‹¤μ  κµ¬κ°„ μ„ νƒ</option>';
            cardData.tiers.forEach((tier, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = tier.label;
                cardTierSelectEl.appendChild(option);
            });
            cardTierGroupEl.classList.remove('hidden');
        } else {
            cardTierGroupEl.classList.add('hidden');
        }
    }
    
    function calculatePlanDetails(overrides = {}, forceVatSetting = null) {
        const isVatIncluded = forceVatSetting !== null ? forceVatSetting : vatToggleEl.checked;

        const selectedInternetId = overrides.internetPlanId !== undefined ? overrides.internetPlanId : internetPlanEl.value;
        const selectedInternetTypeRadio = document.querySelector('input[name="internetType"]:checked').value;
        
        const selectedWifiId = wifiRouterEl.value;
        let selectedTvPackageId = tvPlanEl.value;
        let selectedAdditionalStbId = tvStbEl.value; 
        let selectedAdditionalTvId = additionalTvPlanEl.value;
        let selectedPhonePlanId = phonePlanEl.value;
    
        if (selectedInternetTypeRadio === 'standalone') {
            selectedTvPackageId = 'none';
            selectedAdditionalStbId = 'none';
            selectedAdditionalTvId = 'none';
            selectedPhonePlanId = 'none'; 
        }
    
        const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
        const isDongpanSalesChecked = dongpanSalesCheckEl.checked;
        const discountType = overrides.discountType !== undefined ? overrides.discountType : document.querySelector('input[name="discountType"]:checked').value; 
        const selectedBundleApplicationTime = document.querySelector('input[name="bundleApplicationTime"]:checked').value;
        const installationTime = document.querySelector('input[name="installationTime"]:checked').value; 
        const selectedYearsKeyOnGajok = overrides.onGajokYearsKey !== undefined ? overrides.onGajokYearsKey : onGajokYearsEl.value;
        const selectedInternetUsageKey = overrides.internetUsageYearsKey !== undefined ? overrides.internetUsageYearsKey : internetUsageYearsEl.value;
        
        let internetPriceAsSelectedByDropdown = 0; 
        let internetDiscountAmount = 0;
        let internetDiscountBreakdownText = "";
    
        let finalInternetPlan = null; 
         if (selectedInternetId !== 'none') {
             if (selectedInternetTypeRadio === 'bundle') {
                 finalInternetPlan = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId);
             } else {
                 finalInternetPlan = findItemById(jsonData.internetPlans_base, selectedInternetId);
             }
        }
        
        const tvPackage = (selectedInternetTypeRadio === 'bundle') ? findItemById(jsonData.tvPackages, selectedTvPackageId) : null;
    
        if (finalInternetPlan) { 
            internetPriceAsSelectedByDropdown = finalInternetPlan.price;
        } else { 
            finalInternetPlan = { id: 'none', price: 0, speed_mbps: 0, name: "λ―Έμ„ νƒ" }; 
        }
        
        let displayInternetBasePrice = internetPriceAsSelectedByDropdown; 
        let calculationBaseForInternetDiscount = internetPriceAsSelectedByDropdown; 
    
        if (discountType === "μ¨κ°€μ΅±ν• μΈ" && finalInternetPlan && finalInternetPlan.speed_mbps > 0) {
            const standalonePlanForOnGajok = jsonData.internetPlans_base.find(p => p.speed_mbps === finalInternetPlan.speed_mbps);
            if (standalonePlanForOnGajok) {
                calculationBaseForInternetDiscount = standalonePlanForOnGajok.price; 
                if (selectedBundleApplicationTime === 'pre' || selectedInternetTypeRadio === 'standalone') {
                    displayInternetBasePrice = standalonePlanForOnGajok.price; 
                } else { 
                    displayInternetBasePrice = internetPriceAsSelectedByDropdown; 
                }
            }
        }
        
        const wifiAddon = findItemById(jsonData.addOnServices, selectedWifiId);
        let originalWifiPrice = 0; 
        let currentWifiComponentCost = 0; 
        if (wifiAddon) {
            originalWifiPrice = wifiAddon.price; 
             if (wifiAddon.id === "wifi_router_yozoom_100M_tv") {
                 if (finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage) { 
                     currentWifiComponentCost = wifiAddon.price; 
                 } else {
                      currentWifiComponentCost = 0; 
                      originalWifiPrice = 0; 
                 }
            } else {
                currentWifiComponentCost = wifiAddon.price;
            }
        }
    
        let tvComponentCost = 0;
        if (tvPackage) {
            tvComponentCost = tvPackage.price;
        }
    
        let additionalStbComponentCost = 0;
        const additionalStbAddon = (selectedInternetTypeRadio === 'bundle' && tvPackage) ? findItemById(jsonData.addOnServices, selectedAdditionalStbId) : null;
        if (additionalStbAddon) {
            additionalStbComponentCost = additionalStbAddon.price;
        }
        
        let additionalTvComponentCost = 0;
        const additionalTvPackage = (selectedInternetTypeRadio === 'bundle' && tvPackage) ? findItemById(jsonData.additionalTvPackages, selectedAdditionalTvId) : null;
        if (additionalTvPackage) {
            additionalTvComponentCost = additionalTvPackage.price;
        }
    
        let phoneComponentCost = 0;
        const phonePlan = (selectedInternetTypeRadio === 'bundle' || !phonePlanEl.disabled) ? findItemById(jsonData.phonePlans, selectedPhonePlanId) : null;
        if (phonePlan) {
            phoneComponentCost = phonePlan.price;
        }
    
        if (finalInternetPlan && finalInternetPlan.price > 0 && discountType !== "noBundleDiscount") { 
            if (discountType === "μ¨κ°€μ΅±ν• μΈ") {
                let rate = 0;
                if (onGajokDiscountConfig.internet_discount_rate[selectedYearsKeyOnGajok] && onGajokDiscountConfig.internet_discount_rate[selectedYearsKeyOnGajok][selectedInternetUsageKey] !== undefined) {
                    rate = onGajokDiscountConfig.internet_discount_rate[selectedYearsKeyOnGajok][selectedInternetUsageKey];
                }
                
                internetDiscountAmount = Math.floor(calculationBaseForInternetDiscount * rate); 
                internetDiscountBreakdownText = `(μ¨κ°€μ΅±ν• μΈ ${ (rate * 100).toFixed(0)}% of ${calculationBaseForInternetDiscount.toLocaleString()}μ› μ μ©)`;
            } else { 
                let internetSpeedType = "";
                if (finalInternetPlan.speed_mbps === 100) internetSpeedType = "100M";
                else if (finalInternetPlan.speed_mbps === 500) internetSpeedType = "500M";
                else if (finalInternetPlan.speed_mbps >= 1000) internetSpeedType = "1GB";
    
                let conditionString = "";
                if (internetSpeedType) {
                    conditionString = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
                }
                
                const bundleDiscountInfo = jsonData.bundleInternetDiscounts.find(
                    d => d.bundle_name === discountType && d.condition === conditionString
                );
                if (bundleDiscountInfo) {
                    internetDiscountAmount = bundleDiscountInfo.discount_amount;
                    internetDiscountBreakdownText = `(${discountType} ${conditionString} ν• μΈ μ μ©)`;
                } else {
                    internetDiscountAmount = 0;
                    internetDiscountBreakdownText = `(${discountType} μ΅°κ±΄ λ¶μΌμΉ λλ” ν• μΈ μ—†μ)`;
                }
            }
            internetDiscountAmount = Math.min(displayInternetBasePrice, internetDiscountAmount); 
        } else { 
            internetDiscountAmount = 0; 
            internetDiscountBreakdownText = discountType === "noBundleDiscount" ? "(κ²°ν•© ν• μΈ μ—†μ)" : "";
        }
    
        let effectiveInternetDiscount = internetDiscountAmount;
        if (selectedBundleApplicationTime === 'post' && discountType !== "noBundleDiscount") { 
            effectiveInternetDiscount = 0;
        }
        
        let actualInternetCostComponent = displayInternetBasePrice - effectiveInternetDiscount;
    
        let wifiDiscountForOnGajok = 0;
        let actualWifiCostComponent = currentWifiComponentCost; 
    
        if (discountType === "μ¨κ°€μ΅±ν• μΈ" && wifiAddon && finalInternetPlan.speed_mbps < 1000 ) {
            let wifiBaseForOnGajokDiscount = 0;
            if (wifiAddon.id === "wifi_router_default") { 
                wifiBaseForOnGajokDiscount = wifiAddon.price;
            } else if (wifiAddon.id === "wifi_router_yozoom_100M_tv") {
                if (finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage) {
                     wifiBaseForOnGajokDiscount = wifiAddon.price; 
                }
            }

            if (wifiBaseForOnGajokDiscount > 0) {
                const wifiDiscountRate = onGajokDiscountConfig.internet_discount_rate[selectedYearsKeyOnGajok]?.[selectedInternetUsageKey] || 0;
                wifiDiscountForOnGajok = Math.floor(wifiBaseForOnGajokDiscount * wifiDiscountRate);
                if (selectedBundleApplicationTime === 'pre') {
                    actualWifiCostComponent = wifiBaseForOnGajokDiscount - wifiDiscountForOnGajok;
                } else { 
                    actualWifiCostComponent = wifiBaseForOnGajokDiscount; 
                }
            } else if (wifiAddon.id === "wifi_router_yozoom_100M_tv" && !(finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage)) {
                actualWifiCostComponent = 0; 
            }
        }
         if (selectedBundleApplicationTime === 'post' && discountType !== "μ¨κ°€μ΅±ν• μΈ") { 
             actualWifiCostComponent = currentWifiComponentCost;
        }
        
        let totalSumBeforeDiscountForAllServices = 
            internetPriceAsSelectedByDropdown + 
            originalWifiPrice + 
            (tvPackage ? tvPackage.price : 0) +
            (additionalStbAddon ? additionalStbAddon.price : 0) +
            (additionalTvPackage ? additionalTvPackage.price : 0) +
            (phonePlan ? phonePlan.price : 0);
    
        let totalActualDiscountIfApplied = internetDiscountAmount + wifiDiscountForOnGajok; 
    
        let finalMonthlyCostCalculated = 
            (displayInternetBasePrice - internetDiscountAmount) + 
            (originalWifiPrice - wifiDiscountForOnGajok) +  
            (tvPackage ? tvPackage.price : 0) +
            (additionalStbAddon ? additionalStbAddon.price : 0) +
            (additionalTvPackage ? additionalTvPackage.price : 0) +
            (phonePlan ? phonePlan.price : 0);
        
        let uiFinalMonthlyCostToDisplay;
        if (selectedBundleApplicationTime === 'pre') {
            uiFinalMonthlyCostToDisplay = finalMonthlyCostCalculated;
        } else { 
            uiFinalMonthlyCostToDisplay = totalSumBeforeDiscountForAllServices;
        }

        let cardDiscount = 0;
        let selectedCardName = null;
        let selectedCardTierLabel = null;
        const selectedCardId = affiliateCardSelectEl.value;
        const selectedTierIndex = cardTierSelectEl.value;

        if (selectedCardId !== 'none' && selectedTierIndex !== 'none') {
            const cardData = affiliateCards.skt.find(c => c.id === selectedCardId) || affiliateCards.skb.find(c => c.id === selectedCardId);
            if (cardData && cardData.tiers[selectedTierIndex]) {
                const tier = cardData.tiers[selectedTierIndex];
                cardDiscount = tier.discount;
                selectedCardName = cardData.name;
                selectedCardTierLabel = tier.label;
            }
        }
        uiFinalMonthlyCostToDisplay -= cardDiscount;

    
        let totalMobileDiscount = 0;
        const perLineDiscounts = [];
        if (numMobileLines > 0 && (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©' || discountType === 'μ¨κ°€μ΅±ν• μΈ')) {
            let yozoomTotalDiscount = 0;
            if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©' && finalInternetPlan) {
                let mobileDiscountKey = finalInternetPlan.speed_mbps === 100 ? "100" : "500_1000";
                const tiers = yozoomGajokMobileDiscountReference[mobileDiscountKey];
                const tier = tiers.find(t => t.lines === numMobileLines) || (numMobileLines > 0 && numMobileLines <= 5 ? tiers.find(t => t.lines === Math.min(numMobileLines, 5)) : { discount: 0 });
                if (tier) yozoomTotalDiscount = tier.discount;
            }
    
            for (let i = 0; i < numMobileLines; i++) {
                const mobilePlanSelect = document.getElementById(`mobilePlan${i}`);
                const contractCheckbox = document.getElementById(`selectiveContractCheck${i}`);
                if (!mobilePlanSelect || mobilePlanSelect.value === 'none') continue;
    
                const selectedPlan = allMobilePlans.find(p => p.id === mobilePlanSelect.value);
                if (!selectedPlan) continue;
    
                let bundleDiscount = 0;
                if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©') {
                    const activeLines = Array.from(document.querySelectorAll('[id^="mobilePlan"]')).filter(s => s.value !== 'none').length;
                    bundleDiscount = (activeLines > 0) ? Math.floor(yozoomTotalDiscount / activeLines) : 0;
                } else if (discountType === 'μ¨κ°€μ΅±ν• μΈ') {
                    const mobileDiscountRate = onGajokDiscountConfig.mobileDiscountRate[selectedYearsKeyOnGajok] || 0;
                    bundleDiscount = Math.floor(selectedPlan.price * mobileDiscountRate);
                }
    
                let contractDiscount = 0;
                if (contractCheckbox && contractCheckbox.checked) {
                    contractDiscount = Math.floor(selectedPlan.price * 0.25);
                }
    
                const totalPerLineDiscount = bundleDiscount + contractDiscount;
                perLineDiscounts.push({ plan: selectedPlan, discount: totalPerLineDiscount, bundleDiscount, contractDiscount });
                totalMobileDiscount += totalPerLineDiscount;
            }
        }
        
        let calculatedInstallationFee = 0;
        let feeDescriptionKey = 'none';
        let installationFeeSupport = 0;

        const getFeeKey = () => {
            const hasInternetService = !!finalInternetPlan && finalInternetPlan.price > 0;
            if (!hasInternetService) return 'none';

            const is1Giga = finalInternetPlan.speed_mbps >= 1000;
            const hasTvService = !!tvPackage;
            const hasAdditionalTvService = !!additionalTvPackage;
            const hasPhoneService = !!phonePlan;
            const isLandline = hasPhoneService && phonePlan.id.includes('landline');
            const isVoip = hasPhoneService && !isLandline;

            if (hasAdditionalTvService) return 'internet_tv_add';
            if (hasTvService && hasPhoneService) return 'internet_tv_phone';
            if (hasTvService) return is1Giga ? 'internet_1g_tv' : 'internet_tv';
            if (isLandline) return 'internet_phone_landline';
            if (isVoip) return 'internet_phone_voip';
            if (is1Giga) return 'internet_1g_standalone';

            return 'internet_standalone';
        };

        feeDescriptionKey = getFeeKey();

        if (installationTime === 'self_paid') {
            installationFeeSupport = jsonData.installationFees.weekday[feeDescriptionKey] ?? 0;
            calculatedInstallationFee = 0;
        } else {
            const timeKey = installationTime;
            calculatedInstallationFee = jsonData.installationFees[timeKey]?.[feeDescriptionKey] ?? 0;
        }
    
        let baseInternetGift = 0;
        let additionalDongpanCashSum = 0;
        let giftNote = "";
        let totalGiftAmount = 0;
        const isOttPlan = selectedInternetId.includes('_ott');
        const selectedCommission = parseInt(commissionSelectEl.value);

        if (isOttPlan && !isNaN(selectedCommission)) {
            const isStandalone = selectedInternetTypeRadio === 'standalone';
            const ruleset = isStandalone ? commissionData.SK.internet_only.commission_rules : commissionData.SK.internet_tv.commission_rules;
            const rule = ruleset.find(r => r.commission === selectedCommission);
            if (rule) {
                totalGiftAmount = rule.support_money_max || rule.support_money || 0;
            } else {
                giftNote = "μ„ νƒλ μμλ£μ— ν•΄λ‹Ήν•λ” μ‚¬μ€ν’ μ •μ±…μ„ μ°Ύμ„ μ μ—†μµλ‹λ‹¤.";
            }
        } else {
            const internetSpeedForGift = finalInternetPlan ? finalInternetPlan.speed_mbps : 0;
            const isTvBundledForGift = !!tvPackage;
            const giftKeyForBase = isTvBundledForGift ? "λ²λ“¤" : "λ‹¨λ…";
            const speedKeyForGift = String(internetSpeedForGift);
        
            if (giftTableSktBase[speedKeyForGift] && giftTableSktBase[speedKeyForGift][giftKeyForBase] !== undefined) {
                baseInternetGift = giftTableSktBase[speedKeyForGift][giftKeyForBase];
            }

            if (isDongpanSalesChecked) {
                let qualifyingDongpanMobiles = 0;
                for (let i = 0; i < numMobileLines; i++) {
                    const mobilePlanSelect = document.getElementById(`mobilePlan${i}`);
                    if (!mobilePlanSelect || mobilePlanSelect.value === 'none') continue;
                    const selectedPlan = allMobilePlans.find(p => p.id === mobilePlanSelect.value);
                    if (!selectedPlan) continue;
                    const mobileFee = selectedPlan.price;
                    
                    let mobileFeeTier = null;
                    if (mobileFee >= 33000 && mobileFee < 69000) mobileFeeTier = "33K";
                    else if (mobileFee >= 69000 && mobileFee < 79000) mobileFeeTier = "69K";
                    else if (mobileFee >= 79000) mobileFeeTier = "80K";

                    if (mobileFeeTier) {
                        qualifyingDongpanMobiles++;
                        let internetTypeForDongpan = speedKeyForGift;

                        let tvCategoryForDongpan = "λ‹¨λ…";
                        if (tvPackage) {
                            if (tvPackage.name.includes("μ΄μ½”λ…Έλ―Έ")) tvCategoryForDongpan = "Economy";
                            else if (tvPackage.name.includes("μ¤νƒ λ‹¤λ“")) tvCategoryForDongpan = "Standard";
                            else if (tvPackage.name.includes("ALL")) tvCategoryForDongpan = "All";
                        }

                        if (dongpanGiftTable[mobileFeeTier] && dongpanGiftTable[mobileFeeTier][internetTypeForDongpan] &&
                            dongpanGiftTable[mobileFeeTier][internetTypeForDongpan][tvCategoryForDongpan] !== undefined) {
                            additionalDongpanCashSum += dongpanGiftTable[mobileFeeTier][internetTypeForDongpan][tvCategoryForDongpan];
                        }
                    }
                }
                if (numMobileLines > 0 && qualifyingDongpanMobiles === 0 && additionalDongpanCashSum === 0) {
                    giftNote = "λ™ν μ¶”κ°€ μ‚¬μ€ν’: μ„ νƒλ λ¨λ°”μΌ μ”κΈμ κ°€ λ™ν μ‚¬μ€ν’ μ§€κΈ‰ κΈ°μ¤€(μ²«λ²μ§Έ νμ„  3.3λ§ μ΄μƒ λ“±)μ— ν•΄λ‹Ήν•μ§€ μ•μµλ‹λ‹¤.";
                } else if (numMobileLines === 0 && isDongpanSalesChecked) {
                    giftNote = "λ™ν μ¶”κ°€ μ‚¬μ€ν’: λ¨λ°”μΌ νμ„ μ΄ μ—†μ–΄ λ™ν μ¶”κ°€ μ‚¬μ€ν’ μ΅°κ±΄μ΄ μ¶©μ΅±λμ§€ μ•μ•μµλ‹λ‹¤."
                }
            }
            totalGiftAmount = baseInternetGift + additionalDongpanCashSum;
        }

        const discountTypeMapSkt = {"μ”μ¦κ°€μ΅±κ²°ν•©": "μ”μ¦κ°€μ΅±κ²°ν•©","μ¨κ°€μ΅±ν• μΈ": "μ¨κ°€μ΅±ν• μΈ", "ν¨λ°€λ¦¬κ²°ν•©": "ν¨λ°€λ¦¬κ²°ν•©", "μ•λ°ν• κ²°ν•©": "μ•λ°ν• κ²°ν•©", "noBundleDiscount": "κ²°ν•© ν• μΈ μ—†μ"};

        let wifiDisplayText = getAdjustedPrice(actualWifiCostComponent, isVatIncluded).toLocaleString();
        if (discountType === "μ¨κ°€μ΅±ν• μΈ" && wifiAddon && (wifiAddon.id === "wifi_router_default" || wifiAddon.id === "wifi_router_yozoom_100M_tv") && finalInternetPlan.speed_mbps < 1000 && wifiDiscountForOnGajok > 0) {
            let originalPriceForDisplay = 0;
             if (wifiAddon.id === "wifi_router_default") {
                 originalPriceForDisplay = wifiAddon.price;
            } else if (wifiAddon.id === "wifi_router_yozoom_100M_tv" && finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage) {
                 originalPriceForDisplay = wifiAddon.price;
            }
    
             if (originalPriceForDisplay > 0 && actualWifiCostComponent < originalPriceForDisplay && selectedBundleApplicationTime === 'pre') { 
                 wifiDisplayText = `${getAdjustedPrice(originalPriceForDisplay, isVatIncluded).toLocaleString()}μ›μ—μ„ ${getAdjustedPrice(wifiDiscountForOnGajok, isVatIncluded).toLocaleString()}μ› ν• μΈ β†’ ${getAdjustedPrice(actualWifiCostComponent, isVatIncluded).toLocaleString()}`;
            } else if (selectedBundleApplicationTime === 'post'){
                 wifiDisplayText = getAdjustedPrice(originalWifiPrice, isVatIncluded).toLocaleString();
            }
        } else if (selectedBundleApplicationTime === 'post') {
             wifiDisplayText = getAdjustedPrice(originalWifiPrice, isVatIncluded).toLocaleString();
        }

        return {
            finalMonthlyCost: uiFinalMonthlyCostToDisplay,
            totalGiftAmount: totalGiftAmount,
            totalBaseSum: totalSumBeforeDiscountForAllServices,
            internetDiscountAmount: internetDiscountAmount,
            totalMobileDiscount: totalMobileDiscount,
            installationFee: calculatedInstallationFee,
            installationFeeSupport: installationFeeSupport,
            baseInternetGift: baseInternetGift,
            additionalDongpanCashSum: additionalDongpanCashSum,
            cardDiscount: cardDiscount,
            selectedOptions: {
                internetPlan: finalInternetPlan,
                tvPackage: tvPackage,
                additionalStb: additionalStbAddon,
                additionalTv: additionalTvPackage,
                phonePlan: phonePlan,
                wifi: wifiAddon,
                discountType: discountType,
                discountTypeName: discountTypeMapSkt[discountType] || discountType,
                bundleApplicationTime: selectedBundleApplicationTime,
                onGajokYearsKey: selectedYearsKeyOnGajok,
                internetUsageYearsKey: selectedInternetUsageKey,
                isDongpan: isDongpanSalesChecked,
                numMobileLines: numMobileLines,
                selectedCardName: selectedCardName,
                selectedCardTierLabel: selectedCardTierLabel,
                isOtt: isOttPlan
            },
            perLineDiscounts: perLineDiscounts,
            installationFeeKey: feeDescriptionKey,
            internetDiscountBreakdownText: internetDiscountBreakdownText,
            wifiDisplayText: wifiDisplayText,
            displayInternetBasePrice: displayInternetBasePrice,
            giftNote: giftNote
        };
    }

    async function findBestDiscountAlternative(currentResults) {
        const currentDiscountType = currentResults.selectedOptions.discountType;
        let alternativeType = null;
        let alternativeName = '';

        if (currentDiscountType === 'μ”μ¦κ°€μ΅±κ²°ν•©') {
            alternativeType = 'μ¨κ°€μ΅±ν• μΈ';
            alternativeName = 'μ¨κ°€μ΅±ν• μΈ';
        } else if (currentDiscountType === 'μ¨κ°€μ΅±ν• μΈ') {
            alternativeType = 'μ”μ¦κ°€μ΅±κ²°ν•©';
            alternativeName = 'μ”μ¦κ°€μ΅±κ²°ν•©';
        } else {
            return { isBetter: false };
        }

        const simulationOverrides = {
            discountType: alternativeType,
            internetPlanId: currentResults.selectedOptions.internetPlan.id,
            onGajokYearsKey: currentResults.selectedOptions.onGajokYearsKey,
            internetUsageYearsKey: currentResults.selectedOptions.internetUsageYearsKey
        };

        const alternativeResults = calculatePlanDetails(simulationOverrides);

        const currentBenefit = currentResults.internetDiscountAmount + currentResults.totalMobileDiscount;
        const alternativeBenefit = alternativeResults.internetDiscountAmount + alternativeResults.totalMobileDiscount;

        const savings = alternativeBenefit - currentBenefit;
        
        if (savings > 500) {
            return {
                isBetter: true,
                name: alternativeName,
                value: alternativeType,
                benefitText: `μ›” ${getAdjustedPrice(savings).toLocaleString()}μ› μƒλ‹Ήμ ν†µμ‹ λΉ„λ¥Ό`
            };
        }

        return { isBetter: false };
    }

    async function displayResults(results) {
        const adjustedMonthlyCost = getAdjustedPrice(results.finalMonthlyCost);
        summaryMonthlyCostEl.textContent = `${adjustedMonthlyCost.toLocaleString()}μ›`;
        const monthlyCostContainer = summaryMonthlyCostEl.parentElement;
        const existingOriginalCost = monthlyCostContainer.querySelector('.original-cost-display');
        if (existingOriginalCost) {
            existingOriginalCost.remove();
        }
        
        const totalBaseWithCard = getAdjustedPrice(results.totalBaseSum + results.cardDiscount);
        const totalDiscountApplied = totalBaseWithCard - adjustedMonthlyCost;

        if (totalDiscountApplied > 0 && vatToggleEl.checked) { // Only show strikethrough for VAT-inclusive
            const originalCostEl = document.createElement('p');
            originalCostEl.className = 'text-sm text-slate-500 line-through -mt-1 original-cost-display';
            originalCostEl.textContent = `ν• μΈ μ „ ${totalBaseWithCard.toLocaleString()}μ›`;
            summaryMonthlyCostEl.insertAdjacentElement('afterend', originalCostEl);
        }
        summaryTotalGiftEl.textContent = `${results.totalGiftAmount.toLocaleString()}μ›`; // μ‚¬μ€ν’μ€ VAT λ―Έμ μ©
        summaryInternetDiscountEl.textContent = `- ${getAdjustedPrice(results.internetDiscountAmount + results.cardDiscount).toLocaleString()}μ›`;
        summaryMobileDiscountEl.textContent = `- ${getAdjustedPrice(results.totalMobileDiscount).toLocaleString()}μ›`;

        suggestionBarEl.classList.add('hidden');
        const suggestion = await findBestDiscountAlternative(results);

        if (suggestion.isBetter) {
            suggestionNameEl.textContent = suggestion.name;
            suggestionBenefitEl.textContent = suggestion.benefitText;
            suggestionBarEl.classList.remove('hidden');

            suggestionButtonEl.onclick = () => {
                const radioToSelect = document.querySelector(`input[name="discountType"][value="${suggestion.value}"]`);
                if (radioToSelect) {
                    radioToSelect.checked = true;
                    radioToSelect.dispatchEvent(new Event('change', { 'bubbles': true }));
                    calculateButton.click();
                }
            };
        }

        const { internetPlan, tvPackage, additionalStb, additionalTv, phonePlan, wifi, numMobileLines, discountTypeName, onGajokYearsKey, selectedCardName, selectedCardTierLabel, discountType } = results.selectedOptions;

        selectedInternetEl.textContent = internetPlan && internetPlan.price > 0 ? `${internetPlan.name} (${getAdjustedPrice(internetPlan.price).toLocaleString()}μ›)` : 'λ―Έμ„ νƒ';
        selectedTvEl.textContent = tvPackage ? `${tvPackage.name} (${getAdjustedPrice(tvPackage.price).toLocaleString()}μ›)` : 'λ―Έμ„ νƒ';
        selectedStbEl.textContent = additionalStb ? `${additionalStb.name} (${getAdjustedPrice(additionalStb.price).toLocaleString()}μ›)` : (tvPackage ? "κΈ°λ³Έ μ…‹ν†± μ‚¬μ©" : "λ―Έμ„ νƒ");
        selectedAdditionalTvEl.textContent = additionalTv ? `${additionalTv.name} (${getAdjustedPrice(additionalTv.price).toLocaleString()}μ›)` : 'λ―Έμ„ νƒ';
        selectedPhoneEl.textContent = phonePlan ? `${phonePlan.name} (${getAdjustedPrice(phonePlan.price).toLocaleString()}μ›)` : 'λ―Έμ„ νƒ';
        selectedWifiEl.textContent = wifi ? `${wifi.name} (${getAdjustedPrice(wifi.price).toLocaleString()}μ›)` : "λ―Έμ„ νƒ";
        selectedMobileCountEl.textContent = numMobileLines;
        selectedDiscountTypeEl.textContent = discountTypeName;

        onGajokYearsResultContainerEl.classList.toggle('hidden', discountType !== 'μ¨κ°€μ΅±ν• μΈ');
        if (discountType === 'μ¨κ°€μ΅±ν• μΈ') {
            const onGajokYearsOption = onGajokYearsEl.options[onGajokYearsEl.selectedIndex];
            selectedOnGajokYearsEl.textContent = onGajokYearsOption ? onGajokYearsOption.text : '';
        }

        totalBaseInternetCostEl.textContent = getAdjustedPrice(results.displayInternetBasePrice).toLocaleString();
        totalInternetDiscountAmountEl.textContent = getAdjustedPrice(results.internetDiscountAmount).toLocaleString();
        internetDiscountBreakdownEl.textContent = results.internetDiscountBreakdownText;
        
        cardDiscountSummaryContainerEl.classList.toggle('hidden', results.cardDiscount <= 0);
        if (results.cardDiscount > 0) {
            totalCardDiscountAmountEl.textContent = getAdjustedPrice(results.cardDiscount).toLocaleString();
            cardDiscountBreakdownEl.textContent = `(${selectedCardName} / ${selectedCardTierLabel} μ μ©)`;
        }

        wifiRouterRentalCostDisplayEl.textContent = results.wifiDisplayText;

        tvCostSummaryContainerEl.classList.toggle('hidden', !tvPackage);
        if (tvPackage) {
            tvBaseCostDisplayEl.textContent = getAdjustedPrice(tvPackage.price).toLocaleString();
            stbRentalCostDisplayEl.textContent = additionalStb ? getAdjustedPrice(additionalStb.price).toLocaleString() : '0';
        }
        additionalTvCostSummaryContainerEl.classList.toggle('hidden', !additionalTv);
        if (additionalTv) {
            additionalTvCostDisplayEl.textContent = getAdjustedPrice(additionalTv.price).toLocaleString();
        }
        phoneCostSummaryContainerEl.classList.toggle('hidden', !phonePlan);
        if (phonePlan) {
            phoneBaseCostDisplayEl.textContent = getAdjustedPrice(phonePlan.price).toLocaleString();
        }

        finalMonthlyCostEl.textContent = getAdjustedPrice(results.finalMonthlyCost).toLocaleString();
        finalCostLabelTextEl.textContent = "μµμΆ… μμƒ μ›” λ‚©λ¶€μ•΅";
        const totalActualDiscountIfApplied = results.totalBaseSum - (results.finalMonthlyCost + results.cardDiscount) ;
        if (results.selectedOptions.bundleApplicationTime === 'post' && totalActualDiscountIfApplied > 0) {
            finalCostLabelQualifierEl.textContent = ` (ν• μΈ μ „)`;
        } else if (totalActualDiscountIfApplied > 0 || results.cardDiscount > 0) {
            finalCostLabelQualifierEl.textContent = "(ν• μΈ μ μ©)";
        } else {
            finalCostLabelQualifierEl.textContent = "(ν• μΈ μ—†μ)";
        }

        giftBaseInternetEl.textContent = results.baseInternetGift.toLocaleString();
        additionalDongpanCashContainerEl.classList.toggle('hidden', !results.selectedOptions.isDongpan);
        giftAdditionalDongpanCashEl.textContent = results.additionalDongpanCashSum.toLocaleString();
        giftTotalEl.textContent = results.totalGiftAmount.toLocaleString();
        giftEligibilityNoteEl.textContent = results.giftNote;

        mobileDiscountBreakdownEl.innerHTML = '';
        mobileDiscountNoteEl.textContent = '';
        if (results.perLineDiscounts.length > 0) {
            mobileDiscountDetailsContainerEl.classList.remove('hidden');
            if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©') {
                let yozoomTotalDiscount = getAdjustedPrice(results.perLineDiscounts.reduce((sum, item) => sum + item.bundleDiscount, 0));
                mobileDiscountNoteEl.textContent = `* 'μ”μ¦κ°€μ΅±κ²°ν•©'μ μ΄ κ²°ν•©ν• μΈμ•΅ ${yozoomTotalDiscount.toLocaleString()}μ›μ„ ${results.perLineDiscounts.length}κ°μ νμ„ μ— λ™μΌν•κ² λ‚λ„μ–΄ μ μ©ν• μμƒμΉμ…λ‹λ‹¤.`;
            }
            results.perLineDiscounts.forEach(item => {
                const adjustedPlanPrice = getAdjustedPrice(item.plan.price);
                const adjustedDiscount = getAdjustedPrice(item.discount);
                const finalMobilePrice = adjustedPlanPrice - adjustedDiscount;
                let discountDetailText = `κ²°ν•© ${getAdjustedPrice(item.bundleDiscount).toLocaleString()}μ›`;
                if (item.contractDiscount > 0) {
                    discountDetailText += ` + μ„ νƒμ•½μ • ${getAdjustedPrice(item.contractDiscount).toLocaleString()}μ›`;
                }
                const p = document.createElement('p');
                p.innerHTML = `<span class="font-semibold">${item.plan.name}</span> (${adjustedPlanPrice.toLocaleString()}μ›) - <span class="text-green-600">ν΄λ€ν° ν• μΈ (${discountDetailText})</span> = <strong>${finalMobilePrice.toLocaleString()}μ›</strong> <a href="${item.plan.url}" target="_blank" class="text-sky-500 hover:text-sky-600 text-xs ml-1">(μƒμ„Έλ³΄κΈ°)</a>`;
                mobileDiscountBreakdownEl.appendChild(p);
            });
        } else {
            mobileDiscountDetailsContainerEl.classList.add('hidden');
        }

        installationCostResultEl.textContent = getAdjustedPrice(results.installationFee).toLocaleString();
        installationCostDescriptionEl.textContent = jsonData.installationFees.descriptions[results.installationFeeKey] || "";

        resultSection.classList.remove('hidden');
        messageScriptSectionEl.classList.remove('hidden');
        generateMessageScriptsSkt(results);
        generateTcoScript('100M');
        generatePenaltyAnalysisScript();
        generateWaiverInfoScript();
    }

    function generateComparisonScript() {
        const isBundleType = document.querySelector('input[name="internetType"]:checked').value === 'bundle';
        
        const planId100M = isBundleType ? "internet_100m_with_tv" : "internet_100m_standalone";
        const planId500M = isBundleType ? "internet_500m_with_tv" : "internet_500m_standalone";

        if (!document.querySelector(`#internetPlan option[value="${planId100M}"]`) || !document.querySelector(`#internetPlan option[value="${planId500M}"]`)) {
            alert("λΉ„κµν•  100M λλ” 500M μ”κΈμ λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤. μΈν„°λ„· μ ν•(λ‹¨λ…/λ²λ“¤)μ„ ν™•μΈν•΄μ£Όμ„Έμ”.");
            return;
        }

        const results100M = calculatePlanDetails({internetPlanId: planId100M});
        const results500M = calculatePlanDetails({internetPlanId: planId500M});

        const wiredScript100M = generateWiredScript(results100M, vatToggleEl.checked);
        const wiredScript500M = generateWiredScript(results500M, vatToggleEl.checked);
        
        const monthlyCostDifference = getAdjustedPrice(results500M.finalMonthlyCost) - getAdjustedPrice(results100M.finalMonthlyCost);
        const giftDifference = results500M.totalGiftAmount - results100M.totalGiftAmount;

        const comparisonScript = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] 100Mbps vs 500Mbps μƒν’ λΉ„κµ μ•λ‚΄

κ³ κ°λ‹κ»μ„ μ„ νƒν•μ‹  μµμ… κΈ°μ¤€μΌλ΅, μΈν„°λ„· μ†λ„λ§ λ³€κ²½ν–μ„ λ•μ μ”κΈκ³Ό ννƒμ„ λΉ„κµν•΄ λ“λ¦½λ‹λ‹¤.

--- 100M ---
${wiredScript100M}

[μµμΆ… μ”κΈ λ° ννƒ]
β–¶οΈ μ›” ${getAdjustedPrice(results100M.finalMonthlyCost).toLocaleString()}μ› (${results100M.selectedOptions.discountTypeName})
β–¶οΈ μ‚¬μ€ν’ ${results100M.totalGiftAmount.toLocaleString()}μ›

--- 500M ---
${wiredScript500M}

[μµμΆ… μ”κΈ λ° ννƒ]
β–¶οΈ μ›” ${getAdjustedPrice(results500M.finalMonthlyCost).toLocaleString()}μ› (${results500M.selectedOptions.discountTypeName})
β–¶οΈ μ‚¬μ€ν’ ${results500M.totalGiftAmount.toLocaleString()}μ›
--------------------

κ³ κ°λ‹, νΉμ‹ μ•κ³  κ³„μ…¨λ‚μ”?
μ§€κΈ μ„ νƒν•μ‹  100Mbps μ”κΈμ— μ›” ${monthlyCostDifference > 0 ? monthlyCostDifference.toLocaleString() : 'O'}μ›λ§ μ¶”κ°€ν•μ‹λ©΄,
β… μΈν„°λ„· μ†λ„λ” 5λ°° λΉ¨λΌμ§€κ³ ,
β… μ²« λ‹¬μ— λ°›μΌμ‹λ” μ‚¬μ€ν’μ€ ${giftDifference > 0 ? (giftDifference / 10000).toLocaleString() : 'O'}λ§μ› λ” μ»¤μ§‘λ‹λ‹¤!

μ¨ κ°€μ΅±μ΄ λ™μ‹μ— μ ‘μ†ν•΄λ„ λκΉ€ μ—†λ” 500Mbps μƒν’μΌλ΅ λ³€κ²½ μ›ν•μ‹λ©΄ νΈν•κ² λ§μ”€ν•΄μ£Όμ„Έμ”. π`;

        infoScriptEl.value = comparisonScript.trim();
        alert('100M vs 500M λΉ„κµ μ¤ν¬λ¦½νΈκ°€ μƒμ„±λμ—μµλ‹λ‹¤!');
    }

    function generateBundleComparisonScript() {
        const currentDiscountType = document.querySelector('input[name="discountType"]:checked').value;
        if (currentDiscountType !== 'μ”μ¦κ°€μ΅±κ²°ν•©' && currentDiscountType !== 'μ¨κ°€μ΅±ν• μΈ') {
            alert('λΉ„κµλ¥Ό μ„ν•΄ λ¨Όμ € \'μ”μ¦κ°€μ΅±κ²°ν•©\' λλ” \'μ¨κ°€μ΅±ν• μΈ\'μ„ μ„ νƒν•΄μ£Όμ„Έμ”.');
            return;
        }
        
        const onGajokYearsSelectedText = onGajokYearsEl.options[onGajokYearsEl.selectedIndex].text;

        const resultsYozoom = calculatePlanDetails({ discountType: 'μ”μ¦κ°€μ΅±κ²°ν•©' });
        const resultsOngajok = calculatePlanDetails({ discountType: 'μ¨κ°€μ΅±ν• μΈ' });

        const totalBenefitYozoom = resultsYozoom.internetDiscountAmount + resultsYozoom.totalMobileDiscount;
        const totalBenefitOngajok = resultsOngajok.internetDiscountAmount + resultsOngajok.totalMobileDiscount;

        let conclusion = '';
        if (totalBenefitOngajok > totalBenefitYozoom) {
            conclusion = `[μµμΆ… κ²°λ΅ ]\nκ³ κ°λ‹μ κ²½μ° κ°€μ΅± μ΄ μ‚¬μ© μ—°μ(${onGajokYearsSelectedText})κ°€ κΈΈμ–΄, 'μ¨κ°€μ΅±ν• μΈ'μ΄ μ›” ${getAdjustedPrice(totalBenefitOngajok - totalBenefitYozoom).toLocaleString()}μ› λ” μ λ¦¬ν•©λ‹λ‹¤. π‘`;
        } else if (totalBenefitYozoom > totalBenefitOngajok) {
            conclusion = `[μµμΆ… κ²°λ΅ ]\nκ³ κ°λ‹μ κ²½μ° 'μ”μ¦κ°€μ΅±κ²°ν•©'μ΄ μ›” ${getAdjustedPrice(totalBenefitYozoom - totalBenefitOngajok).toLocaleString()}μ› λ” μ λ¦¬ν•©λ‹λ‹¤. π‘`;
        } else {
            conclusion = `[μµμΆ… κ²°λ΅ ]\nλ‘ ν• μΈ μ ν•μ μ›” ν†µμ‹ λΉ„ μ μ•½ ν¨κ³Όλ” λ™μΌν•λ©°, κ³ κ°λ‹κ» νΈν• λ°©μ‹μΌλ΅ μ„ νƒν•μ‹λ©΄ λ©λ‹λ‹¤. π`;
        }

        const comparisonScript = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] μ”μ¦κ°€μ΅±κ²°ν•© vs μ¨κ°€μ΅±ν• μΈ λΉ„κµ μ•λ‚΄

κ³ κ°λ‹κ» κ°€μ¥ μ λ¦¬ν• ν• μΈ λ°©μ‹μ„ μ°ΎμΌμ‹¤ μ μλ„λ΅ λ‘ κ°€μ§€ κ²°ν•©μ μƒμ„Έ λ‚΄μ©μ„ λΉ„κµν•΄ λ“λ¦½λ‹λ‹¤.
(ν„μ¬ μ„ νƒν•μ‹  μΈν„°λ„·/TV/ν΄λ€ν° μ”κΈμ  κΈ°μ¤€)

1οΈβƒ£ μ”μ¦κ°€μ΅±κ²°ν•©
β€Ά μ›” μµμΆ… μ”κΈ: ${getAdjustedPrice(resultsYozoom.finalMonthlyCost).toLocaleString()}μ›
β€Ά μΈν„°λ„· ν• μΈ: -${getAdjustedPrice(resultsYozoom.internetDiscountAmount).toLocaleString()}μ›
β€Ά ν΄λ€ν° μ΄ ν• μΈ: -${getAdjustedPrice(resultsYozoom.totalMobileDiscount).toLocaleString()}μ›
β€Ά μ΄ μ›” ννƒ: -${getAdjustedPrice(totalBenefitYozoom).toLocaleString()}μ›

2οΈβƒ£ μ¨κ°€μ΅±ν• μΈ (${onGajokYearsSelectedText})
β€Ά μ›” μµμΆ… μ”κΈ: ${getAdjustedPrice(resultsOngajok.finalMonthlyCost).toLocaleString()}μ›
β€Ά μΈν„°λ„· ν• μΈ: -${getAdjustedPrice(resultsOngajok.internetDiscountAmount).toLocaleString()}μ›
β€Ά ν΄λ€ν° μ΄ ν• μΈ: -${getAdjustedPrice(resultsOngajok.totalMobileDiscount).toLocaleString()}μ›
β€Ά μ΄ μ›” ννƒ: -${getAdjustedPrice(totalBenefitOngajok).toLocaleString()}μ›
--------------------
${conclusion}`;

        infoScriptEl.value = comparisonScript.trim();
        alert('μ”μ¦κ°€μ΅±κ²°ν•© vs μ¨κ°€μ΅±ν• μΈ λΉ„κµ μ¤ν¬λ¦½νΈκ°€ μƒμ„±λμ—μµλ‹λ‹¤!');
    }


    function generateWiredScript(results, isVatIncluded) {
        let script = '[μ μ„  μƒν’]';
        const { internetPlan, tvPackage, additionalStb, additionalTv, phonePlan, wifi } = results.selectedOptions;
        
        script += `\nβ–¶οΈ ${internetPlan.name.split(' (')[0]}`;
        
        if (tvPackage) {
            let firstTvText = tvPackage.name.split(' (')[0];
            if (additionalStb) {
                firstTvText += ` + (μ¶”κ°€) ${additionalStb.name.split(' (')[0]}`;
            }
            script += `\nβ–¶οΈ ${firstTvText}`;
        }
        if (additionalTv) script += `\nβ–¶οΈ ${additionalTv.name.split(' (')[0]}`;
        if (phonePlan) script += `\nβ–¶οΈ ${phonePlan.name.split(' (')[0]}`;
        if (wifi && wifi.id !== 'wifi_router_not_selected') {
            script += `\nβ–¶οΈ ${wifi.name.split(' (')[0]}`;
            if (wifi.url) {
                 script += `\n   (μ •λ³΄: ${wifi.url})`;
            }
        }
        return script;
    }
    
    function generateMessageScriptsSkt(results) {
        // For customer script, always use VAT-exclusive prices
        const resultsForCustomer = calculatePlanDetails(results.selectedOptions, false);
        const wiredScriptForCustomer = generateWiredScript(resultsForCustomer, false);
        
        let finalSummaryScript = '\n\n[μµμΆ… μ”κΈ λ° ννƒ]';
        let monthlyCostText = `β–¶οΈ μ›” ${getAdjustedPrice(results.finalMonthlyCost, false).toLocaleString()}μ›(${results.selectedOptions.discountTypeName})`;
        if (results.cardDiscount > 0) {
            monthlyCostText += ` + μΉ΄λ“ μλ™μ΄μ²΄ μ²­κµ¬ν• μΈ`;
        }
        finalSummaryScript += `\n${monthlyCostText} (VAT λ³„λ„)`;

        if (results.installationFeeSupport > 0) {
            finalSummaryScript += `\nβ–¶οΈ μ„¤μΉλΉ„ ${results.installationFeeSupport.toLocaleString()}μ› μ§€μ›`;
        }

        finalSummaryScript += `\nβ–¶οΈ μ‚¬μ€ν’ ${results.totalGiftAmount.toLocaleString()}μ› (ν™•μ •)`;

        let ottHookScript = "";
        if (results.selectedOptions.isOtt) {
            ottHookScript = `\n\nβ¨ μ§€κΈ λ°”λ΅ μ ‘μν•΄μ•Ό ν•λ” μ΄μ ! β¨\n[κΈμΌ μ ‘μ μ‹] 70λ§μ› μƒλ‹Ήμ μΆ…ν•©OTT 6μΆ…(λ„·ν”λ¦­μ¤/ν‹°λΉ™/λ””μ¦λ‹ν”λ¬μ¤/μ›¨μ΄λΈ/μΏ ν΅ν”λ μ΄/μ§€μƒνλ‹¤μ‹λ³΄κΈ°) 3λ…„ λ¬΄λ£!\n[μµμΌ μ ‘μ μ‹] OTT ννƒμ€ μΆ…λ£λκ³ , κΈ°λ³Έ μ‚¬μ€ν’λ§ μ κ³µλ©λ‹λ‹¤.`;
        }

        infoScriptEl.value = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] μƒν’ & μ‚¬μ€ν’ μ”μ•½ μ•λ‚΄
μ•λ…•ν•μ„Έμ”, μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„° μΈν„°λ„· μ…λ‹λ‹¤.
κ³ κ°λ‹κ»μ„ μ¤λ μƒλ‹΄ λ°›μΌμ‹  μƒν’ μ•λ‚΄λ“λ¦½λ‹λ‹¤.
${wiredScriptForCustomer}${finalSummaryScript}${ottHookScript}`;

        // For memo script, use VAT-inclusive prices
        const { internetPlan, tvPackage, additionalStb, additionalTv, phonePlan, wifi, bundleApplicationTime, discountType, discountTypeName, isDongpan, onGajokYearsKey, numMobileLines, selectedCardName } = results.selectedOptions;
        const monthlyFeeTextForMemo = `μ›” ${results.totalBaseSum.toLocaleString()}μ›(ν• μΈμ „)${bundleApplicationTime === 'pre' && (results.totalBaseSum - (results.finalMonthlyCost + results.cardDiscount) > 0) ? ` / μ›” ${(results.finalMonthlyCost + results.cardDiscount).toLocaleString()}μ›(κ²°ν•©ν• μΈμ μ©)`: ''}${results.cardDiscount > 0 ? ` / μ›” ${results.finalMonthlyCost.toLocaleString()}μ›(μΉ΄λ“ν• μΈ μµμΆ…)` : ''}`;
        
        let giftBreakdown = `κΈ°λ³Έ ${results.baseInternetGift.toLocaleString()}μ›`;
        if(isDongpan && results.additionalDongpanCashSum > 0) {
            giftBreakdown += ` + λ™νμ¶”κ°€(λ¨λ°”μΌμ—°λ™) ${results.additionalDongpanCashSum.toLocaleString()}μ›`;
        }

        let productDescriptionMemo = internetPlan.name.split(' (')[0];
        if (wifi && wifi.id !== 'wifi_router_not_selected') {
            productDescriptionMemo += ` + ${wifi.name.split(' (')[0]}`;
        }
        if (tvPackage) {
            let tvBaseName = tvPackage.name.split(' (')[0];
            let stbName = additionalStb ? additionalStb.name.split(' (')[0] : (tvPackage.stb || (tvPackage.name.includes("μ¤λ§νΈ3") ? "μ¤λ§νΈ3" : ""));
            productDescriptionMemo += ` + ${tvBaseName}`;
            if (stbName) productDescriptionMemo += ` + ${stbName}`;
        }
        if (additionalTv) productDescriptionMemo += ` + (μ¶”κ°€TV) ${additionalTv.name.split(' (')[0]}`;
        if (phonePlan) productDescriptionMemo += ` + ${phonePlan.name.split(' (')[0]}`;
        
        let bundleTypeText = "";
        if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©') bundleTypeText = 'μ”κ°€';
        else if (discountType === 'μ¨κ°€μ΅±ν• μΈ') bundleTypeText = 'μ¨ν• ';

        let mobilePlansText = "ν•΄λ‹Ή μ—†μ";
        if (numMobileLines > 0 && results.perLineDiscounts.length > 0) {
            mobilePlansText = results.perLineDiscounts.map(item => item.plan.name).join(', ');
        }

        const baekmegaMemo = `\n\n<λ°±λ©”κ°€ κΈ°νƒ€ λ©”λ¨ μ–‘μ‹>
    κ³ κ°λ… :
    λ™νμ μ„ λ…μμ :
    μ—°λ½μ² :
    κΈ°μ΅΄ν†µμ‹ μ‚¬ :
    μ μ‹¬λ°μ†΅μ£Όμ† :
    μ„ νƒμ•½μ •μ—¬λ¶€ (12κ°μ›”/24κ°μ›”) :
    μ”κΈμ  : ${mobilePlansText}
    μ μ‹¬λΉ„ ν›„μ²­κµ¬ λ™μ (Y/N) : Y
    β… κ²°ν•©μ—¬λ¶€ (μ”κ°€/μ¨ν• ) : ${bundleTypeText}
    β… ν• μΈμ§€μ •(λ€ν‘μν• μΈorλ¶„ν• ν• μΈ) : λ¶„ν• ν• μΈ
    β… ν¨μ¤orμ‹ μ©μΉ΄λ“ μΈμ¦ : ν¨μ¤μΈμ¦`;

        const requiredGuidanceMemo = `\n\n<κ³ κ° μƒν™©μ—λ”°λ¥Έ ν•„μμ•λ‚΄μ‚¬ν•­ μ™„λ£>
    1.  κΈ°μ΅΄ κ°€μ΅± λλ” λ³ΈμΈ λ…μ νμ„  μλ” κ²½μ° μ μ§€ ν•„μ” μ•λ‚΄ μ™„λ£
    2. μ΄μ‚¬ κ³ κ° Y / μ¶”ν›„ μ†λ… λ°μƒ μ‹ κ΄€λ ¨ μ„λ¥ μ μ¶ λ™μ μκΈ
    3. μΈν„°λ„· μ„¤μΉ ν›„ κ³ κ°μ„Όν„°λ΅ ν›„κ²°ν•© μ”μ²­ μ•λ‚΄ μ™„λ£`;

        const newMemoFields = `\n\n<μ¶”κ°€ λ©”λ¨>
    μ΄λ¦„:
    ν•Έλ“ν° λ²νΈ:
    ν•Έλ“ν° ν†µμ‹ μ‚¬:
    μ£Όλ―Όλ²νΈ:
    μ„¤μΉν•  μ£Όμ†:
    μ‚¬μ€ν’ λ°›μ„ κ³„μΆλ²νΈ:
    μ‚¬μ€ν’(μƒ/ν„)/ μμ²΄μ§€κΈ‰:
    μƒν’μ •λ³΄:
    μ²­κµ¬ κΈμ•΅:
    μ ν΄μΉ΄λ“ λ°μμ‹:
    μ„¤μΉλΉ„ μ•λ‚΄μ™„:
    μΈμ¦μ—°λ½30λ¶„ν›„ κ°€λ¥:
    μ„¤μΉμΌμ •:
    κΈ°μ΅΄μ‚¬μ© μΈν„°λ„· ν†µμ‹ μ‚¬:`;

        memoScriptEl.value = `[SKB/SKT μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„° μƒλ‹΄ λ©”λ¨]
    1. μƒν’ : ${productDescriptionMemo}
    2. μ”κΈ : ${monthlyFeeTextForMemo}
    3. μ‚¬μ€ν’ μ΄μ•΅ : ${results.totalGiftAmount.toLocaleString()}μ› (${giftBreakdown}) (μμƒ)
    4. μ„¤μΉλΉ„ : ${results.installationFee.toLocaleString()}μ›
    5. κ²°ν•©μ μ©μ‹μ : ${bundleApplicationTime === 'pre' ? 'μ„ κ²°ν•©' : 'ν›„κ²°ν•©'}
    6. κΈ°νƒ€ : μ΄μ‚¬ μ—¬λ¶€ [ ] / ν¬λ§μ„¤μΉμΌμ [    λ…„  μ›”  μΌ]
    7. ν• μΈμ ν•: ${discountTypeName}
    ${onGajokYearsResultContainerEl.classList.contains('hidden') ? '' : `8. μ¨κ°€μ΅±μ΄μ—°μ: ${onGajokYearsEl.options[onGajokYearsEl.selectedIndex].text}`}
    9. λ¨λ°”μΌκ²°ν•©νμ„ : ${numMobileLines}κ°
    10. λ™ννλ§¤κ°€μ μ©: ${isDongpan ? 'Y' : 'N'}
    11. μ ν΄μΉ΄λ“: ${selectedCardName ? selectedCardName : 'λ―Έμ μ©'}` + (isDongpan ? baekmegaMemo : '') + requiredGuidanceMemo + newMemoFields;

        let productDescriptionComplete = `β–¶οΈ ${internetPlan.name.split(' (')[0]}`;
        if (wifi && wifi.id !== 'wifi_router_not_selected') productDescriptionComplete += `\nβ–¶οΈ ${wifi.name.split(' (')[0]}`;
        if (tvPackage) {
             let firstTvText = tvPackage.name.split(' (')[0];
             if (additionalStb) firstTvText += ` + (μ¶”κ°€) ${additionalStb.name.split(' (')[0]}`;
             productDescriptionComplete += `\nβ–¶οΈ ${firstTvText}`;
        }
        if (additionalTv) productDescriptionComplete += `\nβ–¶οΈ ${additionalTv.name.split(' (')[0]}`;
        if (phonePlan) productDescriptionComplete += `\nβ–¶οΈ ${phonePlan.name.split(' (')[0]}`;

        let descriptiveMonthlyFeeText = `μ›” ${getAdjustedPrice(results.finalMonthlyCost, false).toLocaleString()}μ› (${discountTypeName}${selectedCardName ? ` + μΉ΄λ“ μλ™μ΄μ²΄ μ²­κµ¬ν• μΈ` : ''}) (VAT λ³„λ„)`;

        let postInstallActionScript = '';
        if(results.selectedOptions.discountType !== 'noBundleDiscount') {
            postInstallActionScript = `\n
β οΈ [ν•„λ…] μ›” μ”κΈ ν• μΈμ„ μ„ν• λ§μ§€λ§‰ λ‹¨κ³„!

κ³ κ°λ‹, μ„¤μΉ ν›„ 30μΌ μ΄λ‚΄μ— μ§μ ‘ κ²°ν•© μ‹ μ²­μ„ μ™„λ£ν•μ…”μ•Ό λ§¤λ‹¬ μ”κΈ ν• μΈμ΄ μ μ©λ©λ‹λ‹¤.
μ•„λ λ²νΈλ΅ μ „ν™”ν•μ…”μ„ "μΈν„°λ„·μ΄λ‘ ν΄λ€ν°(λλ” TV) κ²°ν•© μ‹ μ²­ν•©λ‹λ‹¤"λΌκ³  λ§μ”€ν•΄μ£Όμ„Έμ”!
(κΈ°ν•μ΄ μ§€λ‚ ν• μΈμ„ λ†“μΉμ‹λ” μΌμ΄ μ—†λ„λ΅ μ§€κΈ λ°”λ΅ μ‹ μ²­ν•μ‹λ” κ²ƒμ„ κ¶ν•΄λ“λ¦½λ‹λ‹¤.)

β–  SK κ³ κ°λ‹ : ν•Έλ“ν°μ—μ„ 114λ²μΌλ΅ μ „ν™”`;
        }

        completeScriptEl.value = `[SKB/SKT μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] κ°€μ… μ™„λ£ μ•λ‚΄
    μ•λ…•ν•μ„Έμ”, κ³ κ°λ‹. μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„° SKλΈλ΅λ“λ°΄λ“/SKν…”λ μ½¤ λ¶€μ„μ…λ‹λ‹¤.
    β… κ³„μ•½μ΄ μ™„λ£λμ—μ–΄μ”, μ•„λ λ‚΄μ©μ€ κ³„μ•½μ„μ™€ λ™μΌν• ν¨λ ¥μ΄ μμΌλ‹ κΌΌκΌΌν μ½μ–΄μ£Όμ„Έμ”.
    β οΈ 3λ…„ μ•½μ •μ΄λ©°, μ•„λμ™€ κ°™μ€ μƒν™©μ— ν•΄λ‹Ήν•λ©΄ λ°›μΌμ…¨λ μ‚¬μ€ν’μ€ ν™μλ  μ μμµλ‹λ‹¤:
    β‘  1λ…„ μ΄λ‚΄ ν•΄μ§€ β‘΅ 3κ°μ›”(90μΌ) μ΄μƒ μ •μ§€ β‘Ά 1λ…„ μ΄λ‚΄ μ”κΈμ  ν•ν–¥ β‘£ 3κ°μ›” μ΄λ‚΄ λ…μλ³€κ²½ β‘¤ κ°ν†µ 1κ°μ›” μ΄λ‚΄ κ²°μ μλ‹¨ μ§€λ΅ λ³€κ²½
    β οΈ μ‹ κ· κ°€μ… ν›„ κΈ°μ΅΄ μΈν„°λ„·μ€ κΌ­ μ§μ ‘ ν•΄μ§€ν•΄μ£Όμ„Έμ”. μλ™ν•΄μ§€λμ§€ μ•μ•„ μ”κΈμ΄ μ΄μ¤‘ λ¶€κ³Όλ  μ μμµλ‹λ‹¤.
    β οΈ 3λ…„ μ΄λ‚΄ ν•΄μ§€ μ‹ ν†µμ‹ μ‚¬ λ³Έμ‚¬μ— μ„μ•½κΈ(ν• μΈ λ°ν™κΈ) λ° λ©΄μ λ μ¥λΉ„ μ„λ€λ£/μ„¤μΉλΉ„ λ“±μ΄ λ¶€κ³Όλ  μ μμµλ‹λ‹¤.
    β… κ°€μ… μƒν’ μ•λ‚΄
    ${productDescriptionComplete}
    β–¶οΈ ${descriptiveMonthlyFeeText}
    β–¶οΈ μ„¤μΉλΉ„ ${getAdjustedPrice(results.installationFee, true).toLocaleString()}μ› μ²« λ‹¬ λ¶€κ³Ό
    β–¶οΈ μ΄ μ‚¬μ€ν’ ${results.totalGiftAmount.toLocaleString()}μ› (${giftBreakdown}) (μμƒ)
    β…μ‚¬μ€ν’μ€ μ„¤μΉ ν›„ 7μΌ μ΄λ‚΄ μλ™μΌλ΅ μ§€κΈ‰λλ‚ ν‰μΌκΈ°μ¤€ 5μ‹ μ΄μ „ κ°ν†µ λ°›μ•λ‹¤κ³  λ¬Έμ μ£Όμ‹λ©΄ λ‹ΉμΌμ…κΈ λ„μ›€λ“λ¦¬κ² μµλ‹λ‹¤.${postInstallActionScript}
    π” ν•΄λ‹Ή μ—°λ½μ²λ΅ μ—°λ½μ΄ μ–΄λ ¤μΈ κ²½μ° κ±±μ •ν•μ§€ λ§μ„Έμ”! μ•„λ λ€ν‘λ²νΈλ΅ λ¬Έμμ£Όμ‹λ©΄ ν™•μΈν•μ—¬ μ—°λ½λ“λ¦¬κ² μµλ‹λ‹¤.
    [μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°λ¥Ό μ†κ°ν•΄μ£Όμ„Έμ”]
    μ§€μΈμ΄ μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°μ—μ„ μΈν„°λ„·/TV μ„¤μΉν•λ©΄ μ†κ°ν•΄μ£Όμ‹  λ¶„μ—κ² ν„κΈ ννƒμ„ λ“λ ¤μ”! (μμ„Έν• λ‚΄μ©μ€ λ¬Έμ)
    μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„° λ“λ¦Ό.`;
        
        if (usimDongpanCompleteScriptEl) {
            usimDongpanCompleteScriptEl.value = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] μ μ‹¬ μ ‘μ μ™„λ£ μ•λ‚΄
    μ•λ…•ν•μ„Έμ”, κ³ κ°λ‹.
    μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„° μΈν„°λ„· λ¶€μ„μ…λ‹λ‹¤.
    β… μ μ‹¬λ™ν μ ‘μκ°€ μ™„λ£λμ—μ–΄μ”, μ•„λ λ‚΄μ©μ€ κ³„μ•½μ„μ™€ λ™μΌν• ν¨λ ¥μ΄ μμΌλ‹ κΌΌκΌΌν μ½μ–΄μ£Όμ„Έμ”.β οΈ 12κ°μ›”/24κ°μ›” μ•½μ •μ΄λ©°, μ•„λμ™€ κ°™μ€ μƒν™©μ— ν•΄λ‹Ήν•λ©΄ λ°›μΌμ…¨λ μ‚¬μ€ν’μ€ ν™μ λ©λ‹λ‹¤.β‘  183μΌ μ΄λ‚΄ ν•΄μ§€ λ° μ”κΈμ  ν•ν–¥
    β‘΅ κ°ν†µ ν›„ λ¬΄ν†µν™” λ€μƒ
    β‘Ά 183μΌ μ΄λ‚΄ λ…μλ³€κ²½ ν†µμ‹ μ‚¬ λ³€κ²½ μ‹β‘£ 183μΌ μ΄λ‚΄ κ²°ν•© ν•΄μ§€
    β‘¤ μΈν„°λ„· κ°ν†µ ν›„ μµμ›” λ§μΌκΉμ§€ κΌ­ μ μ‹¬ κ°ν†µμ΄ ν•„μ”ν•΄μ”!
    β οΈ μ μ‹¬ κ°ν†µ μ™„λ£ λλ©΄ μ‚¬μ©ν•μ…¨λ μ μ‹¬κ³Ό κµμ²΄ν•μ—¬ κΈ°κΈ° μ „μ›μ„ 3~4ν κ»λ‹¤ ν‚¤μ‹λ©΄ λ©λ‹λ‹¤!β…μ‚¬μ€ν’μ€ μ„¤μΉ ν›„ 7μΌ μ΄λ‚΄ μλ™μΌλ΅ μ§€κΈ‰λλ‚ ν‰μΌκΈ°μ¤€ 5μ‹ μ΄μ „ κ°ν†µ λ°›μ•λ‹¤κ³  λ¬Έμ μ£Όμ‹λ©΄ λ‹ΉμΌμ…κΈ λ„μ›€λ“λ¦¬κ² μµλ‹λ‹¤.π” ν•΄λ‹Ή μ—°λ½μ²λ΅ μ—°λ½μ΄ μ–΄λ ¤μΈ κ²½μ° κ±±μ •ν•μ§€ λ§μ„Έμ”! μ•„λ λ€ν‘λ²νΈλ΅ λ¬Έμμ£Όμ‹λ©΄ ν™•μΈν•μ—¬ μ—°λ½λ“λ¦¬κ² μµλ‹λ‹¤. μ‹κ°„ μ–‘ν•΄ λ¶€νƒλ“λ ¤μ”.[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°λ¥Ό μ†κ°ν•΄μ£Όμ„Έμ”]
    μ§€μΈμ΄ μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°μ—μ„ μΈν„°λ„· μ„¤μΉν•λ©΄ μ†κ°ν•΄μ£Όμ‹  λ¶„μ—κ² 3λ§μ› λ“λ ¤μ”.
    μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„° λ“λ¦Ό.β μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„° λ€ν‘λ²νΈ 1577-8808 μ¤μ „ 9μ‹ ~ μ¤ν›„ 10μ‹ (μ—°μ¤‘λ¬΄ν΄)`;
        }
    
        if (sensitiveInfoLinkScriptEl) {
            sensitiveInfoLinkScriptEl.value = `[SK] μ•„λ λ§ν¬μ— κ³ κ°λ‹μ λ―Όκ°μ •λ³΄λ¥Ό μ…λ ¥ν•μ‹λ©΄ SKλ΅ κ³ κ°λ‹μ λ―Όκ°μ •λ³΄κ°€ μ§μ ‘ μ „μ†΅ν›„ μ ‘μ λ©λ‹λ‹¤.
μ…λ ¥ν›„ μ ‘μ μ™„λ£ λΌκ³  λ¬Έμ μ£Όμ‹λ©΄ λ‹΄λ‹Ή μƒλ‹΄μ›μ΄ μ ‘μ ν™•μΈν›„ ν•„μ μ•λ‚΄μ‚¬ν•­ μ•λ‚΄ λ“λ¦¬κ² μµλ‹λ‹¤.
https://sk-sensitiveinfo.com/`;
        }
    }
    
    function generateTcoScript(speed) {
        let scriptContent = '';
        if (speed === '100M') {
            scriptContent = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] 3λ…„ μ•½μ •, 1λ…„λ§ μ¨λ„ μ΄λ“μΈ μ΄μ  (100Mbps κΈ°μ¤€)

κ³ κ°λ‹, μ•½μ • κΈ°κ°„ λ•λ¬Έμ— κ³ λ―Όν•μ‹λ” λ§μ μ¶©λ¶„ν μ΄ν•΄ν•©λ‹λ‹¤.
κ·Έλμ„ 100Mbps μΈν„°λ„· κΈ°μ¤€μΌλ΅, 1λ…„ μ•½μ •κ³Ό 3λ…„ μ•½μ •μ μ‹¤μ  μ΄λΉ„μ©(TCO)μ„ κΌΌκΌΌν•κ² λΉ„κµν•΄ λ“λ Έμµλ‹λ‹¤.

κ²°λ΅ λ¶€ν„° λ§μ”€λ“λ¦¬λ©΄, 3λ…„ μ•½μ •μ€ 1λ…„(13κ°μ›”)λ§ μ‚¬μ©ν•κ³  ν•΄μ§€ν•΄λ„ 1λ…„ μ•½μ •λ³΄λ‹¤ **9λ§μ› μ΄μƒ μ €λ ΄ν•©λ‹λ‹¤.**

[μΈν„°λ„· λ‹¨λ… (100Mbps) μ΄λΉ„μ© λΉ„κµ]
--------------------------------
π† 1λ…„ μ•½μ •
- μ›” μ”κΈ: 31,900μ›
- 13κ°μ›” μ΄λΉ„μ©: μ•½ 414,700μ›

β… 3λ…„ μ•½μ • (13κ°μ›” μ‚¬μ© ν›„ ν•΄μ§€ μ‹)
- μ›” μ”κΈ: 22,000μ› (μ‚¬μ€ν’ 11λ§μ› ν¬ν•¨)
- 13κ°μ›” μ΄λΉ„μ©: μ•½ 315,600μ› (π‘‰ 9λ§μ› μ΄μƒ μ΄λ“!)
--------------------------------

β¨ κ°€μ¥ μ¤‘μ”ν• ν¬μΈνΈ!
3λ…„ μ•½μ •μ€ μ‹κ°„μ΄ μ§€λ‚ μλ΅ μ„μ•½κΈμ΄ ν¬κ² μ¤„μ–΄λ“­λ‹λ‹¤. μμƒλ³΄λ‹¤ μ¤λ μ‚¬μ©ν•μ‹¤μλ΅ 3λ…„ μ•½μ •μ΄ μ••λ„μ μΌλ΅ μ λ¦¬ν•©λ‹λ‹¤.

β€» TCO(μ΄ μ†μ  λΉ„μ©)λ€? μ›” μ”κΈ, μ‚¬μ€ν’ ννƒ, μ¤‘λ„ ν•΄μ§€ μ‹ μ„μ•½κΈκΉμ§€ λ¨λ‘ κ³„μ‚°ν–μ„ λ•, κ³ κ°λ‹κ»μ„ μ‹¤μ λ΅ λ¶€λ‹΄ν•μ‹λ” μ΄ κΈμ•΅μ…λ‹λ‹¤.
β€» μ¶μ²: Tμ›”λ“>μ μμ‚¬ν•­>ν• μΈλ°ν™κΈ λ¶€κ³ΌκΈ°μ¤€`;
        } else if (speed === '500M') {
            scriptContent = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] 3λ…„ μ•½μ •, 1λ…„λ§ μ¨λ„ μ΄λ“μΈ μ΄μ  (500Mbps κΈ°μ¤€)

κ³ κ°λ‹, μ•½μ • κΈ°κ°„ λ•λ¬Έμ— κ³ λ―Όν•μ‹λ” λ§μ μ¶©λ¶„ν μ΄ν•΄ν•©λ‹λ‹¤.
κ·Έλμ„ 500Mbps μΈν„°λ„· κΈ°μ¤€μΌλ΅, 1λ…„ μ•½μ •κ³Ό 3λ…„ μ•½μ •μ μ‹¤μ  μ΄λΉ„μ©(TCO)μ„ κΌΌκΌΌν•κ² λΉ„κµν•΄ λ“λ Έμµλ‹λ‹¤.

κ²°λ΅ λ¶€ν„° λ§μ”€λ“λ¦¬λ©΄, 3λ…„ μ•½μ •μ€ 1λ…„(13κ°μ›”)λ§ μ‚¬μ©ν•κ³  ν•΄μ§€ν•΄λ„ 1λ…„ μ•½μ •λ³΄λ‹¤ **20λ§μ› μ΄μƒ μ €λ ΄ν•©λ‹λ‹¤.**

[μΈν„°λ„· λ‹¨λ… (500Mbps) μ΄λΉ„μ© λΉ„κµ]
--------------------------------
π† 1λ…„ μ•½μ •
- μ›” μ”κΈ: 44,000μ›
- 13κ°μ›” μ΄λΉ„μ©: μ•½ 572,000μ›

β… 3λ…„ μ•½μ • (13κ°μ›” μ‚¬μ© ν›„ ν•΄μ§€ μ‹)
- μ›” μ”κΈ: 33,000μ› (μ‚¬μ€ν’ 17λ§μ› ν¬ν•¨)
- 13κ°μ›” μ΄λΉ„μ©: μ•½ 370,005μ› (π‘‰ 20λ§μ› μ΄μƒ μ΄λ“!)
--------------------------------

β¨ κ°€μ¥ μ¤‘μ”ν• ν¬μΈνΈ!
3λ…„ μ•½μ •μ€ μ‹κ°„μ΄ μ§€λ‚ μλ΅ μ„μ•½κΈμ΄ ν¬κ² μ¤„μ–΄λ“­λ‹λ‹¤. μμƒλ³΄λ‹¤ μ¤λ μ‚¬μ©ν•μ‹¤μλ΅ 3λ…„ μ•½μ •μ΄ μ••λ„μ μΌλ΅ μ λ¦¬ν•©λ‹λ‹¤.

β€» TCO(μ΄ μ†μ  λΉ„μ©)λ€? μ›” μ”κΈ, μ‚¬μ€ν’ ννƒ, μ¤‘λ„ ν•΄μ§€ μ‹ μ„μ•½κΈκΉμ§€ λ¨λ‘ κ³„μ‚°ν–μ„ λ•, κ³ κ°λ‹κ»μ„ μ‹¤μ λ΅ λ¶€λ‹΄ν•μ‹λ” μ΄ κΈμ•΅μ…λ‹λ‹¤.
β€» μ¶μ²: Tμ›”λ“>μ μμ‚¬ν•­>ν• μΈλ°ν™κΈ λ¶€κ³ΌκΈ°μ¤€`;
        }
        tcoComparisonResultScriptEl.value = scriptContent;
    }

    function generatePenaltyAnalysisScript() {
        penaltyAnalysisScriptEl.value = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] SKλΈλ΅λ“λ°΄λ“ μ„μ•½κΈ, μ •ν™•ν μ•λ ¤λ“λ¦½λ‹λ‹¤.

**1. SKBμ μ„μ•½κΈ κ³µμ‹**
SKBλ” μ•„λ κ³µμ‹μ— λ”°λΌ μ„μ•½κΈμ„ μ‚°μ •ν•©λ‹λ‹¤. (23λ…„ 9μ›” 27μΌ μ΄ν›„ κ°€μ…μ κΈ°μ¤€)
β–¶ μ„μ•½κΈ = (μ΄ ν• μΈλ°›μ€ κΈμ•΅) x (κ°λ©΄μ¨)
- μ΄ ν• μΈμ•΅: (μ •μƒκ°€-μ•½μ •κ°€) x μ΄μ© κ°μ›” μ
- κ°λ©΄μ¨: {μ”μ—¬ μ•½μ •μΌμ / (μ΄ μ•½μ •μΌμ - 240μΌ)}

**2. κΌ­ μ•„μ…”μ•Ό ν•  ν•µμ‹¬ ν¬μΈνΈ 1: '8κ°μ›”'μ λΉ„λ°€**
SKB μ•½κ΄€μƒ, κ°€μ… ν›„ μ²« 8κ°μ›” λ™μ•μ€ μ„μ•½κΈ κ°λ©΄μ΄ μ μ©λμ§€ μ•μµλ‹λ‹¤. μ΄ κΈ°κ°„μ—λ” ν• μΈλ°›μ€ κΈμ•΅μ΄ κ·Έλ€λ΅ μ„μ•½κΈμΌλ΅ λ„μ λμ–΄, μ΄λ° ν•΄μ§€ μ‹ λ¶€λ‹΄μ΄ κ°€μ¥ ν½λ‹λ‹¤.

**3. κΌ­ μ•„μ…”μ•Ό ν•  ν•µμ‹¬ ν¬μΈνΈ 2: '9κ°μ›”' μ΄ν›„μ λ³€ν™”**
9κ°μ›” μ°¨λ¶€ν„°λ” μ„μ•½κΈ κ°λ©΄μ΄ μ‹μ‘λμ–΄, μ‹κ°„μ΄ μ§€λ‚ μλ΅ μ„μ•½κΈμ΄ κ³„μ†ν•΄μ„ κ°μ†ν•λ” κµ¬μ΅°μ…λ‹λ‹¤.

(μμ‹: 100M μΈν„°λ„·, λ§¤λ‹¬ 14,300μ› ν• μΈ μ‹)
- 8κ°μ›” μ°¨ μ„μ•½κΈ: 114,400μ› (ν• μΈμ•΅ μ „μ•΅)
- 13κ°μ›” μ°¨ μ„μ•½κΈ: μ•½ 152,046μ›
- 18κ°μ›” μ°¨ μ„μ•½κΈ: μ•½ 164,964μ›
- 24κ°μ›” μ°¨ μ„μ•½κΈ: μ•½ 146,187μ› (λ‹¤μ‹ κ°μ† μ‹μ‘)

**4. κ²°λ΅ : κ°€μ¥ ν•©λ¦¬μ μΈ μ„ νƒκ³Ό 'μ•μ „μ¥μΉ'**
μ΄λ¬ν• κµ¬μ΅° λ•λ¬Έμ—, 1λ…„ μ΄μƒ μ‚¬μ©ν•μ‹¤ κ³„νμ΄λΌλ©΄ μ•μ„ λ³΄λ‚΄λ“λ¦° 'TCO λΉ„κµ' μλ£μ—μ„ λ³΄μ…¨λ“― 3λ…„ μ•½μ •μ΄ μ••λ„μ μΌλ΅ μ λ¦¬ν•©λ‹λ‹¤.

λν•, μ΄μ‚¬ μ‹ μ„¤μΉ λ¶κ°€ λ“± μ•½κ΄€μ— λ…μ‹λ μ •λ‹Ήν• μ‚¬μ κ°€ λ°μƒν•λ©΄ μ„μ•½κΈ μ—†μ΄ ν•΄μ§€κ°€ κ°€λ¥ν• 'μ„μ•½κΈ λ©΄μ 'λΌλ” μ•μ „μ¥μΉλ„ λ§λ ¨λμ–΄ μμΌλ‹ μ•μ‹¬ν•μ…”λ„ μΆ‹μµλ‹λ‹¤.

β€» μ¶μ²: Tμ›”λ“>μ μμ‚¬ν•­>ν• μΈλ°ν™κΈ λ¶€κ³ΌκΈ°μ¤€`;
    }

    function generateWaiverInfoScript() {
        waiverInfoScriptEl.value = `[μ›¨μ΄ν… μΈν„°λ„· ν†µν•©μ ‘μμ„Όν„°] κ³ κ°λ‹μ κ¶λ¦¬, 'μ„μ•½κΈ λ©΄μ  μ΅°κ±΄' μƒμ„Έ μ•λ‚΄

μ•λ…•ν•μ„Έμ”, κ³ κ°λ‹.
3λ…„ μ•½μ • κΈ°κ°„ μ¤‘ μκΈ°μΉ λ»ν• μƒν™©μ΄ λ°μƒν• κΉ κ±±μ •λμ‹¤ μ μμµλ‹λ‹¤.
κ³ κ°λ‹μ μ• κ¶λ¦¬λ¥Ό μ„ν•΄, μ•½κ΄€μ— λ…μ‹λ 'μ„μ•½κΈ λ©΄μ (ν•©λ²•μ  ν•΄μ§€)' μ΅°κ±΄λ“¤μ„ ν¬λ…ν•κ² μ•λ‚΄ν•΄ λ“λ¦½λ‹λ‹¤.

μ•„λ μ΅°κ±΄μ— ν•΄λ‹Ήλ  κ²½μ°, μ„μ•½κΈ μ—†μ΄ κ³„μ•½μ„ ν•΄μ§€ν•μ‹¤ μ μμµλ‹λ‹¤.

**1. μ„λΉ„μ¤ ν’μ§μ΄ κΈ°μ¤€μ— λ―Έλ‹¬ν•λ” κ²½μ°**
- μΈν„°λ„· μ†λ„κ°€ 'μµμ €λ³΄μ¥μ†λ„(SLA)' κΈ°μ¤€μ— μ§€μ†μ μΌλ΅ λ―Έλ‹¬ (μ›” 5ν μ΄μƒ μΈ΅μ • κΈ°λ΅ ν•„μ”)
- μ„λΉ„μ¤ μ¥μ• λ΅ A/Sλ¥Ό μ›” 3ν μ΄μƒ λ°›μ•μΌλ‚ κ°μ„ λμ§€ μ•μ„ κ²½μ°
- μ›” λ„μ  μ¥μ•  μ‹κ°„μ΄ ν†µμ‹ μ‚¬ κΈ°μ¤€(SKB 24μ‹κ°„)μ„ μ΄κ³Όν• κ²½μ°

**2. μ΄μ‚¬ λ“±μΌλ΅ μ„λΉ„μ¤ μ΄μ©μ΄ λ¶κ°€λ¥ν• κ²½μ°**
- μ΄μ‚¬ν• μ¥μ†κ°€ ν†µμ‹ μ‚¬μ μ„λΉ„μ¤ μ κ³µ λ¶κ°€ μ§€μ—­μΈ κ²½μ° (κ°€μ¥ μΌλ°μ μΈ λ©΄μ  μ‚¬μ )
- μ΄μ‚¬ν• κ±΄λ¬Όμ΄ νΉμ • ν†µμ‹ μ‚¬μ™€ λ…μ  κ³„μ•½ μƒνƒλΌ νƒ€μ‚¬ μΈν„°λ„· μ„¤μΉκ°€ λ¶κ°€λ¥ν• κ²½μ°

**3. κ°€μ…μ κ°μΈμ ν”ΌμΉ λ»ν•  μ‚¬μ •μ΄ μƒκΈ΄ κ²½μ°**
- κ³„μ•½μ λ³ΈμΈμ΄ κµ°μ— μ…λ€ν•λ” κ²½μ° (μ…μν†µμ§€μ„ λ“± μ¦λΉ™ μ„λ¥ ν•„μ”)
- κ³„μ•½μκ°€ μ‚¬λ§ν• κ²½μ°

μ΄μ²λΌ κ³ κ°λ‹μ„ λ³΄νΈν•κΈ° μ„ν• μ—¬λ¬ 'μ•μ „μ¥μΉ'κ°€ λ§λ ¨λμ–΄ μμµλ‹λ‹¤.
μ΄λ¬ν• μ΅°κ±΄λ“¤μ„ ν™•μΈν•μ‹κ³ , κ°€μ¥ κ²½μ μ μΈ 3λ…„ μ•½μ •μ„ μ•μ‹¬ν•κ³  μ„ νƒν•μ‹κΈΈ λ°”λλ‹λ‹¤.

β€» μ¶μ²: ν†µμ‹ μ‚¬ μ΄μ©μ•½κ΄€ λ° λ°©μ†΅ν†µμ‹ μ„μ›ν κ΄€λ ¨ κ·μ •`;
    }
    
    function copyToClipboard(elementId, feedbackElementId) {
        const textarea = document.getElementById(elementId);
        textarea.select();
        textarea.setSelectionRange(0, 99999); 
        try {
            document.execCommand('copy');
            const feedbackEl = document.getElementById(feedbackElementId);
            feedbackEl.textContent = 'λ³µμ‚¬λμ—μµλ‹λ‹¤!';
            setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
        } catch (err) {
            const feedbackEl = document.getElementById(feedbackElementId);
            feedbackEl.textContent = 'λ³µμ‚¬ μ‹¤ν¨';
            setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
        }
        window.getSelection().removeAllRanges(); 
    }

    function copySectionToClipboard(contentElementId, feedbackElementId) {
        const contentElement = document.getElementById(contentElementId);
        if (!contentElement) {
            console.error("Content element to copy not found:", contentElementId);
            return;
        }

        const tempTextArea = document.createElement('textarea');
        tempTextArea.value = contentElement.innerText;
        tempTextArea.style.position = 'fixed';
        tempTextArea.style.left = '-9999px';
        tempTextArea.style.top = '0';
        document.body.appendChild(tempTextArea);
        
        tempTextArea.select();
        tempTextArea.setSelectionRange(0, 99999);

        try {
            document.execCommand('copy');
            const feedbackEl = document.getElementById(feedbackElementId);
            if(feedbackEl) {
                feedbackEl.textContent = 'λ³µμ‚¬λμ—μµλ‹λ‹¤!';
                setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
            }
        } catch (err) {
            console.error('Copy failed', err);
            const feedbackEl = document.getElementById(feedbackElementId);
            if(feedbackEl) {
                feedbackEl.textContent = 'λ³µμ‚¬ μ‹¤ν¨';
                setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
            }
        } finally {
            document.body.removeChild(tempTextArea);
            window.getSelection().removeAllRanges();
        }
    }
    
    function setInitialDefaults() {
        initializeSelects();

        // Set default internet type to bundle
        const bundleRadio = document.querySelector('input[name="internetType"][value="bundle"]');
        if (bundleRadio) {
            bundleRadio.checked = true;
            bundleRadio.dispatchEvent(new Event('change', { bubbles: true }));
        }

        // Set default internet plan to 500M+OTT
        const internetPlanId = 'internet_500m_with_tv_ott';
        if (internetPlanEl.querySelector(`option[value="${internetPlanId}"]`)) {
            internetPlanEl.value = internetPlanId;
            internetPlanEl.dispatchEvent(new Event('change', { bubbles: true }));
        }

        // Set default TV plan to B tv ALL
        const tvPlanId = 'tv_all_smart3';
        if (tvPlanEl.querySelector(`option[value="${tvPlanId}"]`)) {
            tvPlanEl.value = tvPlanId;
        }

        // Set default affiliate card to the best one for 300k spend
        const cardId = 'skt_samsung';
        const cardTierIndex = '0';
        if (affiliateCardSelectEl.querySelector(`option[value="${cardId}"]`)) {
            affiliateCardSelectEl.value = cardId;
            handleCardChange(); // This populates the tier dropdown
            if (cardTierSelectEl.querySelector(`option[value="${cardTierIndex}"]`)) {
                cardTierSelectEl.value = cardTierIndex;
            }
        }
    
        // Keep other defaults
        const noBundleDiscountRadio = document.querySelector('input[name="discountType"][value="noBundleDiscount"]');
        if (noBundleDiscountRadio) {
            noBundleDiscountRadio.checked = true;
            const discountChangeEvent = new Event('change', { bubbles: true });
            noBundleDiscountRadio.dispatchEvent(discountChangeEvent);
        }
        
        wifiRouterEl.value = "wifi_router_default"; 
        tvStbEl.value = 'none'; 
        additionalTvPlanEl.value = 'none';
        phonePlanEl.value = 'none';
        dongpanSalesCheckEl.checked = false;

        const weekdayInstallRadio = document.querySelector('input[name="installationTime"][value="weekday"]');
        if(weekdayInstallRadio) weekdayInstallRadio.checked = true;
    
        updateTvSubOptionsState();
        manageWifiSelection();
    
        allDetailSectionsSkt.forEach(section => {
            let isVisible = false; 
            if (section.containerEl) {
                const isSelected = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`).checked;
                if (isSelected) { 
                    if (section.toggleEl) isVisible = section.toggleEl.checked;
                } else { 
                    if (section.toggleEl) section.toggleEl.checked = false;
                }
                section.containerEl.classList.toggle('hidden', !isVisible);
                if (isVisible && section.updateFn) section.updateFn();
            }
        });
        
        onGajokYearsGroupEl.classList.toggle('hidden', document.querySelector('input[name="discountType"]:checked').value !== 'μ¨κ°€μ΅±ν• μΈ');
        internetUsageYearsGroupEl.classList.toggle('hidden', document.querySelector('input[name="discountType"]:checked').value !== 'μ¨κ°€μ΅±ν• μΈ');
        dongpanUsimPolicyDetailsContainerEl.classList.toggle('hidden', !dongpanSalesCheckEl.checked);
        
        const isOttPlan = internetPlanEl.value.includes('_ott');
        document.getElementById('commissionSection').classList.toggle('hidden', !isOttPlan);

        resultSection.classList.add('hidden');
        messageScriptSectionEl.classList.add('hidden');
    
        detailsContainerEl.classList.add('hidden');
        toggleDetailsButtonEl.innerHTML = 'μƒμ„Έ μ”κΈ λ‚΄μ—­ νΌμ³λ³΄κΈ° β–Ό';
    
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    window.onload = setInitialDefaults;
    </script>
</body>
</html>