<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KT ê²°í•© í• ì¸ ê³„ì‚°ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
      
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
      
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8fafc; 
            padding: 2rem;
        }

        .input-group { margin-bottom: 1.5rem; }
        .input-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #334155; /* slate-700 */ }
        .input-field, .select-field { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #cbd5e1; /* slate-300 */ border-radius: 0.375rem; box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }
        .input-field:focus, .select-field:focus { border-color: #0ea5e9; /* sky-500 */ outline: none; box-shadow: 0 0 0 0.2rem rgba(14, 165, 233, 0.25); }
        .input-field:disabled, .select-field:disabled { background-color: #e2e8f0; /* slate-200 */ cursor: not-allowed; }
        .btn-primary { background-color: #0ea5e9; /* sky-500 */ color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-primary:hover { background-color: #0284c7; /* sky-600 */ }
        .btn-secondary { background-color: #64748b; /* slate-500 */ color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-secondary:hover { background-color: #475569; /* slate-600 */ }
        .section-title { font-size: 1.5rem; font-weight: 700; color: #0369a1; /* sky-700 */ margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #38bdf8 /* sky-400 */;}
        .result-card { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1.5rem; }
        .result-label { color: #475569; /* slate-600 */ }
        .result-value { color: #1e293b; /* slate-800 */ font-weight: 600;}
        .total-value { color: #f59e0b; /* amber-500 */ font-size: 1.5rem; font-weight: 700;}
        .mobile-line-item { border: 1px solid #e2e8f0; /* slate-200 */ padding: 1rem; border-radius: 0.375rem; margin-bottom: 0.75rem; }
        .radio-label { margin-right: 1rem; margin-bottom: 0.5rem; display: inline-flex; align-items: center; cursor: pointer;}
        .radio-input { margin-right: 0.5rem; accent-color: #0ea5e9; /* sky-500 */ }
        .info-box { background-color: #eff6ff; /* blue-50 */ border-left: 4px solid #3b82f6; /* blue-500 */ padding: 1rem; margin-top:0.5rem; margin-bottom:1rem; font-size: 0.875rem; color: #1e40af; /* blue-800 */;}
        .info-box ul { padding-left: 1.25rem; list-style-type: disc; }
        .info-box ul ul { padding-left: 1rem; list-style-type: circle;}
        .toggle-switch { position: relative; display: inline-block; width: 40px; height: 20px; margin-left: 10px; vertical-align: middle;}
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px;}
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%;}
        input:checked + .slider { background-color: #2196F3; } /* KT Sky Blue for toggle */
        input:checked + .slider:before { transform: translateX(20px); }
        .discount-details { background-color: #f0f9ff; border: 1px solid #bae6fd; padding: 1rem; border-radius: 0.375rem; font-size:0.875rem; }
        .discount-details ul { padding-left: 1.25rem; }
        .discount-details ul ul { padding-left: 1rem; }
        .summary-item { margin-bottom: 0.25rem; }
        .message-script-area { width: 100%; min-height: 150px; padding: 0.5rem; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-size: 0.875rem; white-space: pre-wrap; word-wrap: break-word; }
        .copy-button-container { text-align: right; margin-top: 0.5rem; }
        .copy-feedback { font-size: 0.75rem; color: green; margin-left: 0.5rem; }
    </style>
</head>
<body class="text-slate-800">
    <header class="bg-sky-700 text-white p-6 shadow-md">
        <div class="container mx-auto max-w-4xl flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold">KT ê²°í•© í• ì¸ ê³„ì‚°ê¸°</h1>
                <p class="text-sky-200 mt-1">ì„ íƒí•˜ì‹  ì„œë¹„ìŠ¤ì™€ í• ì¸ ìœ í˜•ì— ë”°ë¥¸ ì˜ˆìƒ ìš”ê¸ˆì„ ê³„ì‚°í•´ ë³´ì„¸ìš”.</p>
            </div>
            <div class="flex items-center text-sm">
                <span class="font-medium mr-2">VAT ë³„ë„</span>
                <label for="vatToggleSwitch" class="toggle-switch">
                    <input type="checkbox" id="vatToggleSwitch">
                    <span class="slider"></span>
                </label>
                <span class="font-medium ml-2">VAT í¬í•¨</span>
            </div>
        </div>
    </header>

    <main class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <section id="inputSection" class="mb-8">
            <h2 class="section-title">1. ì„œë¹„ìŠ¤ ì„ íƒ (3ë…„ ì•½ì • ê¸°ì¤€)</h2>
            <p class="mb-3 text-sm text-slate-600">ì•„ë˜ í•­ëª©ë“¤ì„ ì„ íƒí•˜ê±°ë‚˜ ì…ë ¥í•´ì£¼ì„¸ìš”. ëª¨ë“  ìš”ê¸ˆì€ KT í‘œì¤€ 3ë…„ ì•½ì • ê¸°ì¤€ì´ë©°, ìµœì¢… ê³„ì‚° ê²°ê³¼ì—ì„œ ë¶€ê°€ì„¸(VAT)ê°€ í¬í•¨ëœ ê¸ˆì•¡ê³¼ ë³„ë„ ê¸ˆì•¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
             
            <div class="mb-2 text-sm">
                <p class="font-semibold text-red-600">âš ï¸ ë¯¼ê°ì •ë³´</p>
                <p><a href="https://kt-sensitiveinfo.com" target="_blank" class="text-red-500 hover:text-red-700 underline font-medium break-all">https://kt-sensitiveinfo.com</a></p>
                <p class="text-slate-600">ã„´> ìœ„ ë§í¬ë¥¼ ê³ ê°ì—ê²Œ ë¬¸ìë¡œ ì „ì†¡í•´ì£¼ì„¸ìš”. (ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬ ê¸°ëŠ¥ ì´ìš©)</p>
            </div>
            <div class="mb-2 text-sm">
                <span class="font-semibold text-sky-700">ì°¸ê³  ìŠ¤í”„ë ˆë“œì‹œíŠ¸:</span>
                <a href="https://docs.google.com/spreadsheets/d/10d21RrhIPBiJr7RZIHnk0h1dB4GvTEcHCuXSyFYw1M4/edit?gid=0#gid=0" target="_blank" class="text-blue-600 hover:text-blue-700 underline font-medium">ë°”ë¡œê°€ê¸°</a>
            </div>
            <div class="mb-4 text-sm">
                <span class="font-semibold text-sky-700">KT ì¸í„°ë„· ìƒí’ˆì²­ì•½ ë³¸ì¸ì¸ì¦ ë§í¬:</span>
                <a href="https://online.kt.com/smart/simple/simpleCustomerInfoPop.do?prdcId=0F0BA335-ACD6-459E-BDB3-95CE61EEFE35" target="_blank" class="text-blue-600 hover:text-blue-700 underline font-medium">ë°”ë¡œê°€ê¸° (PASS ë˜ëŠ” ì‹ ìš©ì¹´ë“œ ì¸ì¦)</a>
            </div>

            <div class="input-group">
                <label class="input-label">ì¸í„°ë„· ìœ í˜• ì„ íƒ</label>
                <div class="flex items-center space-x-4">
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="bundle" class="radio-input">
                        ì¸í„°ë„· + TV ë²ˆë“¤
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="standalone" class="radio-input" checked>
                        ì¸í„°ë„· ë‹¨ë…
                    </label>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="input-group">
                    <label for="internetPlan" class="input-label">ì¸í„°ë„· ìš”ê¸ˆì œ</label>
                    <select id="internetPlan" class="select-field">
                    </select>
                </div>
                 
                <div class="input-group">
                    <label for="wifiRouterRental" class="input-label block mb-1">ì™€ì´íŒŒì´ ê³µìœ ê¸°</label>
                    <select id="wifiRouterRental" class="select-field">
                        <option value="1000" data-name="KTê³µìœ ê¸°">KTê³µìœ ê¸° (ì›” 1,000ì›, VATë³„ë„)</option>
                        <option value="0" data-name="GiGA WiFi home ax">GiGA WiFi home ax</option>
                        <option value="0" data-name="KT WiFi 7D">KT WiFi 7D</option>
                        <option value="0" data-name="KTê³µìœ ê¸° X">KTê³µìœ ê¸° X (ë¯¸ì‚¬ìš©)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="tvPlan" class="input-label">TV ìš”ê¸ˆì œ (1ë²ˆì§¸ TV, ê¸°ê°€ì§€ë‹ˆA í¬í•¨ê°€)</label>
                    <select id="tvPlan" class="select-field">
                        <option value="none" data-category="ì—†ìŒ" data-stb-included-price="0">ì„ íƒ ì•ˆí•¨</option>
                        <option value="KTTVë² ì´ì§" data-price="14000" data-category="ë² ì´ì§" data-stb-included-price="14000">KTTVë² ì´ì§ (236ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA (ì›” 14,000ì›, VATë³„ë„)</option>
                        <option value="KTTVë¼ì´íŠ¸" data-price="15000" data-category="ë¼ì´íŠ¸" data-stb-included-price="15000">KTTVë¼ì´íŠ¸ (240ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA (ì›” 15,000ì›, VATë³„ë„)</option>
                        <option value="KTTVì—ì„¼ìŠ¤" data-price="18000" data-category="ì—ì„¼ìŠ¤" data-stb-included-price="18000">KTTVì—ì„¼ìŠ¤ (266ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA (ì›” 18,000ì›, VATë³„ë„)</option>
                        <option value="KTTVì—ì„¼ìŠ¤ í”ŒëŸ¬ìŠ¤" data-price="22000" data-category="ì—ì„¼ìŠ¤ í”ŒëŸ¬ìŠ¤" data-stb-included-price="22000">KTTVì—ì„¼ìŠ¤ í”ŒëŸ¬ìŠ¤ (266+ì±„ë„) (ì›” 22,000ì›, VATë³„ë„)</option>
                        <option value="KTTVë„·í”Œë¦­ìŠ¤ HD" data-price="28273" data-category="ë„·í”Œë¦­ìŠ¤ HD" data-stb-included-price="28273">KTTVë„·í”Œë¦­ìŠ¤ HD (267ì±„ë„) (ì›” 28,273ì›, VATë³„ë„)</option>
                        <option value="KTTVë„·í”Œë¦­ìŠ¤ UHD" data-price="31455" data-category="ë„·í”Œë¦­ìŠ¤ UHD" data-stb-included-price="31455">KTTVë„·í”Œë¦­ìŠ¤ UHD (267ì±„ë„) (ì›” 31,455ì›, VATë³„ë„)</option>
                        <option value="KTTVí‚¤ì¦ˆëœë“œíŒ©ì´ˆì´ìŠ¤" data-price="19000" data-category="í‚¤ì¦ˆëœë“œ" data-stb-included-price="19000">KTTVí‚¤ì¦ˆëœë“œíŒ©ì´ˆì´ìŠ¤ (ì›” 19,000ì›, VATë³„ë„)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="additionalTvPlan" class="input-label">ì¶”ê°€ TV ì„ íƒ (2ë²ˆì§¸ TV)</label>
                    <select id="additionalTvPlan" class="select-field">
                        <option value="none" data-price="0" data-name="ì„ íƒ ì•ˆí•¨">ì„ íƒ ì•ˆí•¨</option>
                        <option value="KTTV ì¶”ê°€ë² ì´ì§" data-price="9700" data-name="ë² ì´ì§ (236ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA">KTTV ì¶”ê°€ë² ì´ì§ (236ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA (ì›” 9,700ì›, VATë³„ë„)</option>
                        <option value="KTTV ì¶”ê°€ë¼ì´íŠ¸" data-price="10200" data-name="ë¼ì´íŠ¸ (240ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA">KTTV ì¶”ê°€ë¼ì´íŠ¸ (240ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA (ì›” 10,200ì›, VATë³„ë„)</option>
                        <option value="KTTV ì¶”ê°€ì—ì„¼ìŠ¤" data-price="12200" data-name="ì—ì„¼ìŠ¤ (266ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA">KTTV ì¶”ê°€ì—ì„¼ìŠ¤ (266ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA (ì›” 12,200ì›, VATë³„ë„)</option>
                    </select>
                </div>
                 
                <div class="input-group">
                    <label for="phonePlan" class="input-label">ì§‘ì „í™” ìš”ê¸ˆì œ</label>
                    <select id="phonePlan" class="select-field">
                        <option value="none">ì„ íƒ ì•ˆí•¨</option>
                        <option value="ì¸í„°ë„·ì „í™” ìš°ë¦¬ë¼ë¦¬3000" data-price="5722">ìš°ë¦¬ë¼ë¦¬3000 (ì›” 5,722ì›, VATë³„ë„)</option>
                        <option value="ì§‘ì „í™” ìœ ì„ 3000" data-price="7722">ìœ ì„ 3000 (ì›” 7,722ì›, VATë³„ë„)</option>
                        <option value="ì§‘ì „í™” ìœ ë¬´ì„ 3000" data-price="7500">ìœ ë¬´ì„ 3000 (ì›” 7,500ì›, VATë³„ë„)</option>
                    </select>
                </div>
            </div>
             
            <div class="input-group">
                <label class="input-label">KT ë¶€ê°€ì„œë¹„ìŠ¤ (ì„ íƒ)</label>
                <div id="addonServicesContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="ê¸°ê°€ì§€ë‹ˆ3A" data-price="1000" class="radio-input mr-2">ê¸°ê°€ì§€ë‹ˆ3A (AI ì…‹í†±ë°•ìŠ¤) (ì›” 1,000ì›, VATë³„ë„)</label>
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="AI ì§€ë‹ˆ TV ì˜¬ì¸ì› ì‚¬ìš´ë“œë°”" data-price="5000" class="radio-input mr-2">AI ì§€ë‹ˆ TV ì˜¬ì¸ì› ì‚¬ìš´ë“œë°” (ì›” 5,000ì›, VATë³„ë„)</label>
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="ë²„ë””ì¦í­ê¸°" data-price="1500" class="radio-input mr-2">ë²„ë””ì¦í­ê¸° (ì›” 1,500ì›, VATë³„ë„)</label>
                    <label class="flex items-center"><input type="checkbox" name="addonService" value="ê¸°ê°€ì§€ë‹ˆ 4A" data-price="3000" class="radio-input mr-2">ê¸°ê°€ì§€ë‹ˆ 4A (ì›” 3,000ì›, VATë³„ë„)</label>
                </div>
            </div>
        </section>

        <section id="discountTypeSection" class="mb-8">
            <h2 class="section-title">2. ê²°í•© í• ì¸ ìœ í˜• ì„ íƒ</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <p class="mb-4 text-sm text-slate-600">ê°€ì¥ ìœ ë¦¬í•œ í• ì¸ ìœ í˜•ì„ ì„ íƒí•˜ê±°ë‚˜, ê° ìœ í˜•ë³„ ì˜ˆìƒ ìš”ê¸ˆì„ ë¹„êµí•´ë³´ì„¸ìš”.</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2">
                    <label class="radio-label"><input type="radio" name="discountType" value="none" class="radio-input"> ê²°í•© í• ì¸ ì—†ìŒ</label>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="totalAmountBundle" class="radio-input" checked> ì´ì•¡ ê²°í•©í• ì¸</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="totalAmountDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="fixedRateBundle" class="radio-input"> ì •ì•¡ ê²°í•©í• ì¸</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="fixedRateDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="premiumFamilyBundle" class="radio-input"> í”„ë¦¬ë¯¸ì—„ ê°€ì¡±ê²°í•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="premiumFamilyDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="premiumSingleBundle" class="radio-input"> í”„ë¦¬ë¯¸ì—„ ì‹±ê¸€ê²°í•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="premiumSingleDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="mvnoBundle" class="radio-input"> ì•Œëœ°í° ê²°í•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="mvnoDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="familyBundle" class="radio-input"> íŒ¨ë°€ë¦¬ ê²°í•© (ì¸í„°ë„· ì¶”ê°€íšŒì„ )</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="familyBundleDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="separateFamilyBundle" class="radio-input"> ë”°ë¡œ ì‚´ì•„ë„ ê°€ì¡±ê²°í•©</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="separateFamilyDetailsToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-1 text-xs text-slate-500">(ìƒì„¸ë³´ê¸°)</span>
                    </div>
                </div>

                <div id="totalAmountDetailsContainer" class="mt-4 hidden discount-details"></div>
                <div id="fixedRateDetailsContainer" class="mt-4 hidden discount-details"></div>
                <div id="premiumFamilyDetailsContainer" class="mt-4 hidden discount-details"></div>
                <div id="premiumSingleDetailsContainer" class="mt-4 hidden discount-details"></div>
                <div id="familyBundleDetailsContainer" class="mt-4 hidden discount-details"></div>
                <div id="separateFamilyDetailsContainer" class="mt-4 hidden discount-details"></div>
                <div id="mvnoDetailsContainer" class="mt-4 hidden discount-details"></div>

                <div class="input-group mt-6">
                    <label class="input-label">ëª¨ë°”ì¼ íšŒì„  ì •ë³´ (ìµœëŒ€ 10íšŒì„ )</label>
                    <div class="flex items-center mb-2">
                        <label for="mobileLinesCount" class="mr-2 text-sm text-slate-700">ê²°í•©í•  ëª¨ë°”ì¼ íšŒì„  ìˆ˜:</label>
                        <input type="number" id="mobileLinesCount" min="0" max="10" value="0" class="input-field w-20 text-center">
                    </div>
                    <div id="mobileLinesContainer" class="space-y-3"></div>
                </div>
                <div class="input-group mt-6">
                    <label for="dongpanSalesCheckKt" class="input-label flex items-center cursor-pointer">
                        <input type="checkbox" id="dongpanSalesCheckKt" class="radio-input h-5 w-5 mr-2">
                        KT ë™íŒìœ ì‹¬ íŒë§¤ ì‹œ ì¶”ê°€ ì‚¬ì€í’ˆ ì ìš© ë° ì•ˆë‚´ ë³´ê¸°
                    </label>
                    <div id="dongpanPolicyDetailsContainerKt" class="mt-3 hidden info-box">
                        <h4 class="font-semibold text-sm mb-2">KT ì¸í„°ë„· ìœ ì‹¬ ê°œí†µ ì ˆì°¨ ì•ˆë‚´ (ìƒë‹´ì› ì°¸ê³ ìš©)</h4>
                        <p class="text-xs mb-1"><strong>ì‹ ì²­ ë° ì¸ì¦:</strong></p>
                        <ul class="list-disc list-inside text-xs space-y-0.5 mb-2">
                            <li>KT ì¸í„°ë„· ìœ ì‹¬ ê°œí†µ ì‹ ì²­ì„œ ë§í¬: <a href="http://online.kt.com/index.jsp?prdcID=6C463388-3BDF-4E68-BE73-975E05BDA182" target="_blank" class="text-blue-700 font-bold hover:text-blue-800 underline text-lg">ë°”ë¡œê°€ê¸°</a> (PASS ë˜ëŠ” ì‹ ìš©ì¹´ë“œ ì¸ì¦ í•„ìš”)</li>
                            <li>KT ë™íŒ ê²°í•© ë³¸ì¸ì¸ì¦ ë§í¬ (ê²°í•©ë§Œ ì²´í¬): <a href="https://online.kt.com/smart/simple/simpleCustomerInfoPop.do?prdcId=65278B4C-20F1-47FA-9EEF-56E9B574D346" target="_blank" class="text-blue-600 hover:underline font-semibold">ë°”ë¡œê°€ê¸°</a></li>
                        </ul>
                        <p class="text-xs mb-1"><strong>ê²°í•© ê°€ëŠ¥ íšŒì„ :</strong> ì¸í„°ë„· + ìœ ì‹¬ ë™íŒ + ê°€ì¡± ìœ ì‹¬ 2íšŒì„  (ì´ 3íšŒì„ ê¹Œì§€ ê°€ëŠ¥)</p>
                        <p class="text-xs mb-1"><strong>ì ‘ìˆ˜ ê³¼ì •:</strong> ë°±ë©”ê°€ ì ‘ìˆ˜ì›¹(speedonline.kr) KT(ì¼ë°˜) > ëª¨ë°”ì¼ íƒ­ìœ¼ë¡œ ì ‘ìˆ˜</p>
                        <p class="text-xs mb-1"><strong>ì ‘ìˆ˜ ì‹œ í•„ìˆ˜ ê¸°ì¬ ì‚¬í•­ (ê¸°íƒ€ë©”ëª¨ ì–‘ì‹):</strong></p>
                        <ul class="list-disc list-inside text-xs space-y-0.5 mb-2">
                            <li>ì¸í„°ë„· ê°œí†µ ì™„ë£Œ ì‹œ: "[ê°œí†µ ì™„ë£Œ / ìœ ì‹¬ ë°œì†¡ ìš”ì²­]"</li>
                            <li>ì´ë¯¸ ê°œí†µëœ ê³ ê° 30ì¼ ì´ë‚´ ë™íŒ ì‹œ: "[ê°œí†µì™„ë£Œ ì¼ì, ê°œí†µë²ˆí˜¸ ê¸°ì¬ / ìœ ì‹¬ ë°œì†¡ ìš”ì²­]"</li>
                            <li>ê³ ê° ìœ ì‹¬ ìˆ˜ë ¹ í›„ ê°œí†µ ìš”ì²­ ì‹œ: "[ê³ ê° ìœ ì‹¬ ìˆ˜ë ¹ ì™„ë£Œ / ê°œí†µ ì§„í–‰ ìš”ì²­]"</li>
                        </ul>
                        <p class="text-xs mb-1"><strong>ê°œí†µ ì§„í–‰ ë° ìœ ì˜ì‚¬í•­:</strong></p>
                        <ul class="list-disc list-inside text-xs space-y-0.5 mb-2">
                            <li>ê³ ê°ì—ê²Œ ìœ„ì•½ê¸ˆ í™•ì¸ ë° ë™ì˜ ë¬¸ì ë°œì†¡ í›„ ì²˜ë¦¬. ë¯¸ë™ì˜ ì‹œ 10ë¶„ í›„ ê°•ì œ ë™ì˜ ì²˜ë¦¬ ê°€ëŠ¥.</li>
                            <li>USIM êµì²´ ë° ì „ì› ON ì„±ê³µ í›„ ì„ íƒì•½ì • ë° ìœ ë¬´ì„  ê²°í•© í•„ìˆ˜ (ì™„ë£Œ ì‹œ ê°œí†µ ì™„ë£Œ ì²˜ë¦¬).</li>
                            <li>ìœ ì‹¬ ê°œí†µ ìµœëŒ€ 4ì‹œê°„ ì†Œìš” ê°€ëŠ¥. ì‚¬ì „ ë™ì˜ ë¬¸ì ì²˜ë¦¬ ì‹œ ë¹ ë¥¸ ê°œí†µ.</li>
                            <li>KT USIM ê°œí†µ ì „ê¹Œì§€ ê¸°ì¡´ USIM ì‚¬ìš©, ì‹ í˜¸ ëŠê¸°ë©´ êµì²´. ê¸°ê¸° ìˆ˜íšŒ ì¬ì‹œë™ í•„ìš”.</li>
                        </ul>
                        <p class="text-xs mb-1"><strong>ë¹„ìš© ë° ìˆ˜ìˆ˜ë£Œ ì£¼ì˜ì‚¬í•­:</strong></p>
                        <ul class="list-disc list-inside text-xs space-y-0.5">
                            <li>ìœ ì‹¬ ë‹¹ì¼ ë°œì†¡ ë§ˆê° 15ì‹œ.</li>
                            <li>ìœ ì‹¬ ë¹„ìš© 7,700ì› / ë²ˆí˜¸ì´ë™ ìˆ˜ìˆ˜ë£Œ 800ì› ì²« ë‹¬ ì²­êµ¬.</li>
                            <li>ì¸í„°ë„·/ìœ ì‹¬ ì¤‘ í•˜ë‚˜ë¼ë„ ì„¤ì¹˜/ê°œí†µ ë¶ˆê°€ ì‹œ ìˆ˜ìˆ˜ë£Œ ì§€ê¸‰ ë¶ˆê°€.</li>
                            <li>ì¸í„°ë„· ê°œí†µì›” ê¸°ì¤€ ìµì›” ë§ê¹Œì§€ ìœ ì‹¬ ê°œí†µ ì‹œ ìˆ˜ìˆ˜ë£Œ ì¸ì •.</li>
                            <li>ì„ íƒì•½ì • ë¯¸ì ìš© ì‹œ ìˆ˜ìˆ˜ë£Œ ì§€ê¸‰ ë¶ˆê°€.</li>
                            <li>ì¸í„°ë„·/ìœ ì‹¬ ëª…ì˜ì ìƒì´í•´ë„ ìœ ì‹¬ ìˆ˜ìˆ˜ë£Œ ì§€ê¸‰ ê°€ëŠ¥.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
          
        <section id="installationSection" class="mb-8">
            <h2 class="section-title">3. ì„¤ì¹˜ ì˜µì…˜</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label class="input-label">ì„¤ì¹˜ í¬ë§ ì‹œì  (ì„¤ì¹˜ë¹„ ë³€ë™)</label>
                <div class="space-y-2">
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekday" class="radio-input" checked> í‰ì¼ ì£¼ê°„</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekend" class="radio-input"> ì£¼ë§/ì•¼ê°„ (í• ì¦ ì ìš©)</label>
                </div>
                <div class="mt-4">
                    <label class="flex items-center">
                        <input type="checkbox" id="installationFeeSelfPay" class="radio-input mr-2">
                        <span class="text-sm font-medium">ì„¤ì¹˜ë¹„ ìì²´ì§€ê¸‰ (ì‚¬ì€í’ˆì—ì„œ ì°¨ê°ë˜ì§€ ì•ŠìŒ)</span>
                    </label>
                </div>
            </div>
        </section>

        <section id="affiliateCardSection" class="mb-8">
            <h2 class="section-title">4. ì œíœ´ì¹´ë“œ ì¶”ê°€ í• ì¸ (ì„ íƒ ì‚¬í•­)</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label for="affiliateCard" class="input-label">ì œíœ´ì¹´ë“œ ì„ íƒ</label>
                <select id="affiliateCard" class="select-field">
                    <option value="none">í• ì¸ ë¯¸ì ìš©</option>
                    <option value="woori">ìš°ë¦¬ì¹´ë“œ</option>
                    <option value="lotte">ë¡¯ë°ì¹´ë“œ</option>
                    <option value="nh">ë†í˜‘ì¹´ë“œ</option>
                    <option value="shinhan">ì‹ í•œì¹´ë“œ</option>
                    <option value="samsung">ì‚¼ì„±ì¹´ë“œ</option>
                    <option value="hyundai">í˜„ëŒ€ì¹´ë“œ</option>
                    <option value="bc">BCë°”ë¡œì¹´ë“œ</option>
                    <option value="hana">í•˜ë‚˜ì¹´ë“œ</option>
                </select>
                 
                <div id="cardTierContainer" class="mt-4 hidden">
                    <label class="input-label">ì „ì›” ì‹¤ì  êµ¬ê°„ ì„ íƒ</label>
                    <div id="cardTiers" class="space-y-2">
                    </div>
                </div>
            </div>
        </section>

        <section id="commissionSection" class="mb-8 hidden">
            <h2 class="section-title">5. ìˆ˜ìˆ˜ë£Œ ì •ì±… ì„ íƒ (OTTìƒí’ˆìš©)</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label for="commissionTier" class="input-label">íŒë§¤ìˆ˜ìˆ˜ë£Œ ì„ íƒ</label>
                <select id="commissionTier" class="select-field">
                    <!-- Options will be populated by JavaScript -->
                </select>
                 <div id="commissionNotes" class="mt-3 text-xs text-slate-500"></div>
            </div>
        </section>

        <div class="text-center mb-8 flex justify-center items-center">
            <button id="calculateButton" class="btn-primary text-lg">ì˜ˆìƒ ìš”ê¸ˆ ê³„ì‚°í•˜ê¸°</button>
            <button id="resetButton" class="btn-secondary text-lg ml-4">ì´ˆê¸°í™”</button>
        </div>

        <section id="resultSection" class="hidden">
            <h2 class="section-title">ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
             
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-4">âœ… ìµœì¢… ìš”ê¸ˆ ë° í˜œíƒ ìš”ì•½ (VAT í¬í•¨)</h3>
                <div class="grid grid-cols-2 gap-6 text-center">
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-sm text-slate-600">ğŸ–¥ï¸ ì¸í„°ë„·/TV ì›” ìµœì¢… ìš”ê¸ˆ</p>
                        <p id="summaryPreDiscountCost" class="text-sm text-slate-500" style="display: none;"></p>
                        <p id="summaryFinalCost" class="text-3xl font-bold text-red-600 my-2">0 ì›</p>
                        <p id="summaryCardApplied" class="text-xs text-slate-500 h-4"></p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <p class="text-sm text-slate-600">ğŸ ìµœëŒ€ í˜œíƒ ê¸ˆì•¡</p>
                        <p id="summaryGiftTotal" class="text-3xl font-bold text-green-700 my-2">0 ì›</p>
                        <p id="summaryGiftBreakdown" class="text-xs text-slate-500"></p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-sm text-slate-600">ğŸ“‰ ì¸í„°ë„· ìš”ê¸ˆ í• ì¸</p>
                        <p id="summaryInternetDiscount" class="text-xl font-bold text-sky-600 my-2">0 ì›</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <p class="text-sm text-slate-600">ğŸ“± íœ´ëŒ€í° ìš”ê¸ˆ í• ì¸</p>
                        <p id="summaryMobileDiscount" class="text-xl font-bold text-green-700 my-2">0 ì›</p>
                    </div>
                </div>

                <div class="text-center mt-6">
                    <button id="toggleDetailsButton" class="text-sm text-slate-500 hover:text-sky-600 bg-slate-100 px-4 py-2 rounded-full">
                        ìƒì„¸ ìš”ê¸ˆ ë‚´ì—­ í¼ì³ë³´ê¸° â–¼
                    </button>
                </div>
            </div>

            <div id="recommendationBox" class="result-card bg-sky-50 border-l-4 border-sky-400 my-4 hidden">
                <h3 id="recommendationTitle" class="text-lg font-semibold text-sky-800"></h3>
                <p id="recommendationBody" class="text-sm text-slate-700 mt-2"></p>
                <div id="recommendationAction" class="text-right mt-3"></div>
            </div>

            <div id="expandedDetailsContainer" class="hidden">
                <div class="result-card">
                    <h3 class="text-2xl font-bold text-blue-700 mb-4">ğŸ“‹ ìƒì„¸ ìš”ê¸ˆ ë‚´ì—­ (VAT ë³„ë„)</h3>
                    <div class="grid grid-cols-2 gap-x-4 gap-y-1 text-sm">
                        <p><strong>ì„ íƒ ì¸í„°ë„·:</strong> <span id="selectedInternet"></span></p>
                        <p><strong>ëª¨ë°”ì¼ íšŒì„  ìˆ˜:</strong> <span id="selectedMobileCount"></span></p>
                        <p><strong>ì„ íƒ TV (1ë²ˆì§¸):</strong> <span id="selectedTv"></span></p>
                        <p><strong>ì ìš© í• ì¸ ìœ í˜•:</strong> <span id="selectedDiscountType"></span></p>
                        <p><strong>ì„ íƒ ì¶”ê°€ TV (2ë²ˆì§¸):</strong> <span id="selectedAdditionalTv"></span></p>
                        <p><strong>ì„ íƒ ì§‘ì „í™”:</strong> <span id="selectedPhone"></span></p>
                        <p><strong>ì„ íƒ ì™€ì´íŒŒì´:</strong> <span id="selectedWifi"></span></p>
                        <div></div> <div class="col-span-2" id="selectedWifiDetails"></div> 
                    </div>
                </div>

                <div class="result-card">
                    <h3 class="text-lg font-semibold text-blue-700 mb-3">ğŸ–¥ï¸ ì¸í„°ë„·/TV ìš”ê¸ˆ ê³„ì‚° ê³¼ì • (VAT ë³„ë„)</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span>ì›” ê¸°ë³¸ë£Œ í•©ê³„ (ì¸í„°ë„·/TV/ì „í™” ë“±)</span><span id="detailInternetBase">0 ì›</span></div>
                        <div class="flex justify-between"><span>ì›” ì™€ì´íŒŒì´ ê³µìœ ê¸° ì„ëŒ€ë£Œ</span><span id="detailWifiFee">0 ì›</span></div>
                        <div class="flex justify-between text-green-600"><span>ì›” ì´ ì¸í„°ë„· ê²°í•© í• ì¸ì•¡ (ì˜ˆìƒ)</span><span id="detailInternetDiscountTotal">0 ì›</span></div>
                        <hr class="my-2">
                        <div class="flex justify-between font-bold text-base"><span>í• ì¸ ì ìš© í›„ ì›” ë‚©ë¶€ì•¡ (VAT ë³„ë„)</span><span id="detailFinalCostPreVat" class="text-slate-700">0 ì›</span></div>
                        <div class="flex justify-between font-bold text-base"><span>ë¶€ê°€ì„¸ (VAT 10%)</span><span id="detailVatAmount" class="text-slate-700">0 ì›</span></div>
                        <hr class="my-2">
                        <div class="flex justify-between font-bold text-xl"><span>ìµœì¢… ì˜ˆìƒ ì›” ë‚©ë¶€ì•¡ (VAT í¬í•¨)</span><span id="detailFinalCost" class="text-red-600">0 ì›</span></div>
                          
                        <div id="detailCardDiscountContainer" class="hidden flex justify-between font-bold text-blue-600">
                            <span>ì œíœ´ì¹´ë“œ ì¶”ê°€ í• ì¸ (<span id="selectedCardName"></span>)</span>
                            <span id="detailCardDiscount">- 0 ì›</span>
                        </div>
                        <hr id="finalCardCostSeparator" class="my-2 hidden">
                        <div id="detailFinalCardCostContainer" class="hidden flex justify-between font-bold text-xl">
                            <span>âœ¨ ì¹´ë“œ ì ìš© ìµœì¢… ë‚©ë¶€ì•¡ (VAT í¬í•¨)</span>
                            <span id="detailFinalCardCost" class="text-fuchsia-600">0 ì›</span>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <h3 class="text-lg font-semibold text-blue-700 mb-3">ğŸ“± ëª¨ë°”ì¼ ìš”ê¸ˆ í• ì¸ ìƒì„¸ (VAT í¬í•¨)</h3>
                    <div id="mobileDiscountDetailContainer" class="p-3 bg-blue-50 rounded-md text-sm">
                        <p>ê²°í•© ìœ í˜•ì— ë”°ë¥¸ ëª¨ë°”ì¼ í• ì¸ ë‚´ì—­ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                </div>

                <div class="result-card">
                    <h3 class="text-lg font-semibold text-blue-700 mb-3">ğŸ ì‚¬ì€í’ˆ í˜œíƒ ìƒì„¸</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span>ê¸°ë³¸ ì‚¬ì€í’ˆ (í˜„ê¸ˆ)</span><span id="giftCash">0 ì›</span></div>
                        <div class="flex justify-between"><span>ê¸°ë³¸ ì‚¬ì€í’ˆ (ìƒí’ˆê¶Œ)</span><span id="giftVoucher">0 ì›</span></div>
                        <div class="flex justify-between"><span>ì¼ë°˜ì „í™” ì¶”ê°€ ìƒí’ˆê¶Œ</span><span id="giftPhoneVoucher">0 ì›</span></div>
                        <div class="flex justify-between"><span>ì¶”ê°€ TV ì‚¬ì€í’ˆ (í˜„ê¸ˆ)</span><span id="giftAdditionalTv">0 ì›</span></div>
                        <div id="dongpanCashContainerKt" class="flex justify-between hidden"><span>ë™íŒ ì¶”ê°€ í˜„ê¸ˆ ì‚¬ì€í’ˆ (KT)</span><span id="giftDongpanAdditionalCashKt">0 ì›</span></div>
                        <hr class="my-1 border-dashed">
                        <div class="flex justify-between font-bold text-base mt-2">
                            <span>ì´ ì‚¬ì€í’ˆ í•©ê³„</span>
                            <span id="giftTotal" class="text-green-700">0 ì›</span>
                        </div>
                    </div>
                </div>
            </div>
             
            <section id="installationFeeSection" class="hidden">
                <div class="result-card">
                    <h3 class="text-lg font-semibold text-blue-700 mb-3">âš™ï¸ ì„¤ì¹˜ë¹„ (ì²« ë‹¬ 1íšŒ ì²­êµ¬, VAT í¬í•¨)</h3>
                    <div class="text-center">
                        <p id="installationFeeResult" class="text-2xl font-bold text-slate-800 my-2">0 ì›</p>
                        <p id="installationFeeDescription" class="text-sm text-slate-500"></p>
                    </div>
                </div>
            </section>
        </section>

        <section id="messageScriptSection" class="hidden mt-12">
            <h2 class="section-title">ğŸ“„ ê³ ê° ì•ˆë‚´ ë¬¸ì ìŠ¤í¬ë¦½íŠ¸ (ìƒë‹´ì› ì°¸ê³ ìš©)</h2>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">1. ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„° ì „ì‚° ë©”ëª¨</h3>
                <textarea id="memoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('memoScript', 'copyFeedbackMemo')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackMemo" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">2. ìƒí’ˆ ì•ˆë‚´ ë¬¸ì</h3>
                <div class="mb-3 text-right">
                    <button id="generateComparisonButton" class="btn-primary text-xs py-1 px-3">âš¡ 100M vs 500M ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±</button>
                    <button id="generateDiscountTypeComparisonButton" class="btn-primary text-xs py-1 px-3 ml-2">âš¡ ì´ì•¡ vs ì •ì•¡ ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±</button>
                </div>
                <textarea id="infoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('infoScript', 'copyFeedbackInfo')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackInfo" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">3. ê°€ì… ì™„ë£Œ ë¬¸ì</h3>
                <textarea id="completeScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('completeScript', 'copyFeedbackComplete')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackComplete" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">4. [ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] ìœ ì‹¬ ì ‘ìˆ˜ ì™„ë£Œ ì•ˆë‚´</h3>
                <textarea id="usimCompleteScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('usimCompleteScript', 'copyFeedbackUsimComplete')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackUsimComplete" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">5. ë¯¼ê°ì •ë³´ ì „ì†¡ìš© ë§í¬ (ê³ ê° ë°œì†¡ìš©)</h3>
                <textarea id="sensitiveInfoLinkScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('sensitiveInfoLinkScript', 'copyFeedbackSensitiveInfo')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackSensitiveInfo" class="copy-feedback"></span>
                </div>
            </div>
             
             
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">6. (ê³ ê° ì„¤ë“ìš©) 1ë…„ vs 3ë…„ ì•½ì • ìµœì¢… ë¹„ìš© ë¹„êµ</h3>
                <textarea id="tcoComparisonScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('tcoComparisonScript', 'copyFeedbackTco')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackTco" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">7. (ì „ë¬¸ê°€ìš©) KT ìœ„ì•½ê¸ˆ ì‚°ì • ë°©ì‹ ìƒì„¸ ë¶„ì„</h3>
                <textarea id="penaltyAnalysisScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('penaltyAnalysisScript', 'copyFeedbackPenalty')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackPenalty" class="copy-feedback"></span>
                </div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-sky-600 mb-3">8. (ìƒì„¸ ì•ˆë‚´) ìœ„ì•½ê¸ˆ ë©´ì œ ì¡°ê±´ ì´ì •ë¦¬</h3>
                <textarea id="penaltyWaiverScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('penaltyWaiverScript', 'copyFeedbackWaiver')" class="btn-secondary text-xs">ë³µì‚¬í•˜ê¸°</button>
                    <span id="copyFeedbackWaiver" class="copy-feedback"></span>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-6 mt-12 bg-sky-800 text-sky-200 text-sm">
        <p>ë³¸ ê³„ì‚°ê¸°ëŠ” ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°ì—ì„œ ì œê³µí•©ë‹ˆë‹¤.</p>
        <p>&copy; 2024 KT ê²°í•© í• ì¸ ê³„ì‚°ê¸°. ëª¨ë“  ì •ë³´ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤.</p>
    </footer>

    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script>
        // script.js (Modified version with VAT handling and updated features)

        let isVatIncluded = false; // VAT toggle state
          
        // Helper function for VAT conversion (Request 4)
        function toPreVat(price) {
            return Math.round(price / 1.1);
        }
          
        // (Request 4: All prices converted to pre-VAT)
        const internetPlans_KT = {
            "KTì¸í„°ë„·(ë‹¨ë…) 100mb": { basePrice: 20000, speed: 100, type: "100M" },
            "KTì¸í„°ë„·(ë‹¨ë…) 500mb": { basePrice: 30000, speed: 500, type: "500M" },
            "KTì¸í„°ë„·(ë‹¨ë…) 500mb+OTT": { basePrice: 30000, speed: 500, type: "500M", isOttPlan: true },
            "KTì¸í„°ë„·(ë‹¨ë…) 1GB": { basePrice: 35000, speed: 1000, type: "1G" },
            "KTì¸í„°ë„·(ë‹¨ë…) 1GB+OTT": { basePrice: 35000, speed: 1000, type: "1G", isOttPlan: true },
            "KTì¸í„°ë„·ë²ˆë“¤100mb": { basePrice: 20000, speed: 100, type: "100M" },
            "KTì¸í„°ë„·ë²ˆë“¤500mb": { basePrice: 25000, speed: 500, type: "500M" },
            "KTì¸í„°ë„·ë²ˆë“¤500mb+OTT": { basePrice: 25000, speed: 500, type: "500M", isOttPlan: true },
            "KTì¸í„°ë„·ë²ˆë“¤1GB": { basePrice: 30000, speed: 1000, type: "1G" },
            "KTì¸í„°ë„·ë²ˆë“¤1GB+OTT": { basePrice: 30000, speed: 1000, type: "1G", isOttPlan: true }
        };
          
        const tvPlans_KT = {
            "KTTVë² ì´ì§": { basePrice: 14000, category: "ë² ì´ì§", stbIncluded: "ê¸°ê°€ì§€ë‹ˆA" }, // 15400 -> 14000
            "KTTVë¼ì´íŠ¸": { basePrice: 15000, category: "ë¼ì´íŠ¸", stbIncluded: "ê¸°ê°€ì§€ë‹ˆA" }, // 16500 -> 15000
            "KTTVì—ì„¼ìŠ¤": { basePrice: 18000, category: "ì—ì„¼ìŠ¤", stbIncluded: "ê¸°ê°€ì§€ë‹ˆA" }, // 19800 -> 18000
            "KTTVì—ì„¼ìŠ¤ í”ŒëŸ¬ìŠ¤": { basePrice: 22000, category: "ì—ì„¼ìŠ¤ í”ŒëŸ¬ìŠ¤", stbIncluded: "ê¸°ê°€ì§€ë‹ˆA" }, // 24200 -> 22000
            "KTTVë„·í”Œë¦­ìŠ¤ HD": { basePrice: toPreVat(31100), category: "ë„·í”Œë¦­ìŠ¤ HD", stbIncluded: "ê¸°ê°€ì§€ë‹ˆA" },
            "KTTVë„·í”Œë¦­ìŠ¤ UHD": { basePrice: toPreVat(34600), category: "ë„·í”Œë¦­ìŠ¤ UHD", stbIncluded: "ê¸°ê°€ì§€ë‹ˆA" },
            "KTTVí‚¤ì¦ˆëœë“œíŒ©ì´ˆì´ìŠ¤": { basePrice: 19000, category: "í‚¤ì¦ˆëœë“œ", stbIncluded: "ê¸°ê°€ì§€ë‹ˆA" } // 20900 -> 19000
        };
          
        const additionalTvPlans_KT = {
            "none": { basePrice: 0, name: "ì„ íƒ ì•ˆí•¨" },
            "KTTV ì¶”ê°€ë² ì´ì§": { basePrice: 9700, name: "ë² ì´ì§ (236ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA" }, // 10670 -> 9700
            "KTTV ì¶”ê°€ë¼ì´íŠ¸": { basePrice: 10200, name: "ë¼ì´íŠ¸ (240ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA" }, // 11220 -> 10200
            "KTTV ì¶”ê°€ì—ì„¼ìŠ¤": { basePrice: 12200, name: "ì—ì„¼ìŠ¤ (266ì±„ë„) + ê¸°ê°€ì§€ë‹ˆA" } // 13420 -> 12200
        };
          
        const phonePlans_KT = {
            "ì¸í„°ë„·ì „í™” ìš°ë¦¬ë¼ë¦¬3000": { basePrice: toPreVat(6294) },
            "ì§‘ì „í™” ìœ ì„ 3000": { basePrice: toPreVat(8494) },
            "ì§‘ì „í™” ìœ ë¬´ì„ 3000": { basePrice: 7500 } // 8250 -> 7500
        };
          
        const wifiOptions_KT = {
            "KTê³µìœ ê¸°": { fee: 1000, name: "KTê³µìœ ê¸°", url: null, promotion: null }, // 1100 -> 1000
            "GiGA WiFi home ax": { fee: 0, name: "GiGA WiFi home ax", url: "https://product.kt.com/wDic/productDetail.do?ItemCode=1401", promotion: "'ë² ì´ì§(500Mbps)' ìš”ê¸ˆì œ ì‹ ê·œ ê°€ì… ì‹œ ë¬´ë£Œ ì œê³µ" },
            "KT WiFi 7D": { fee: 0, name: "KT WiFi 7D", url: "https://product.kt.com/wDic/productDetail.do?ItemCode=1633", promotion: "'ì—ì„¼ìŠ¤(1Gbps)' ì´ìƒ ìš”ê¸ˆì œ ì‹ ê·œ ê°€ì… ì‹œ ë¬´ë£Œ ì œê³µ (25ë…„ 8/31ê¹Œì§€, ì„ ì°©ìˆœ 5ë§Œëª…)" },
            "KTê³µìœ ê¸° X": { fee: 0, name: "KTê³µìœ ê¸° X (ë¯¸ì‚¬ìš©)", url: null, promotion: null }
        };
          
          
        const ktAddonServices = {
            "ê¸°ê°€ì§€ë‹ˆ3A": { price: 1000, name: "ê¸°ê°€ì§€ë‹ˆ3A (AI ì…‹í†±ë°•ìŠ¤)"}, // 1100 -> 1000
            "AI ì§€ë‹ˆ TV ì˜¬ì¸ì› ì‚¬ìš´ë“œë°”": { price: 5000, name: "AI ì§€ë‹ˆ TV ì˜¬ì¸ì› ì‚¬ìš´ë“œë°”"}, // 5500 -> 5000
            "ë²„ë””ì¦í­ê¸°": { price: 1500, name: "ë²„ë””ì¦í­ê¸°"}, // 1650 -> 1500
            "ê¸°ê°€ì§€ë‹ˆ 4A": { price: 3000, name: "ê¸°ê°€ì§€ë‹ˆ 4A"} // 3300 -> 3000
        };
          
        // (Request 5: Replaced affiliate card data)
        const affiliateCardDiscounts = {
            "woori": {
                name: "ìš°ë¦¬ì¹´ë“œ",
                phone: "1588-9955", // Placeholder
                tiers: [
                    { usage: 400000, discount: 25000, label: "40ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 800000, discount: 26000, label: "80ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 1200000, discount: 27000, label: "120ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            },
            "lotte": {
                name: "ë¡¯ë°ì¹´ë“œ",
                phone: "1588-8100",
                tiers: [
                    { usage: 400000, discount: 20000, label: "40ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 800000, discount: 22000, label: "80ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            },
            "nh": {
                name: "ë†í˜‘ì¹´ë“œ",
                phone: "1644-4000", // Placeholder
                tiers: [
                    { usage: 400000, discount: 14000, label: "40ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 800000, discount: 19000, label: "80ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            },
            "shinhan": {
                name: "ì‹ í•œì¹´ë“œ",
                phone: "1544-7000",
                tiers: [
                    { usage: 300000, discount: 15000, label: "30ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            },
            "samsung": {
                name: "ì‚¼ì„±ì¹´ë“œ",
                phone: "1588-8700",
                tiers: [
                    { usage: 300000, discount: 18000, label: "30ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 700000, discount: 19000, label: "70ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            },
            "hyundai": {
                name: "í˜„ëŒ€ì¹´ë“œ",
                phone: "1577-6000",
                tiers: [
                    { usage: 500000, discount: 30000, label: "50ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 1000000, discount: 35000, label: "100ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            },
            "bc": {
                name: "BCë°”ë¡œì¹´ë“œ",
                phone: "1588-4000",
                tiers: [
                    { usage: 300000, discount: 15000, label: "30ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 700000, discount: 18000, label: "70ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            },
            "hana": {
                name: "í•˜ë‚˜ì¹´ë“œ",
                phone: "1800-1111", // Placeholder
                tiers: [
                    { usage: 300000, discount: 10000, label: "30ë§Œì› ì´ìƒ ì‚¬ìš©" },
                    { usage: 800000, discount: 15000, label: "80ë§Œì› ì´ìƒ ì‚¬ìš©" }
                ]
            }
        };
          
        // Mobile plans remain VAT included as they are typically reported that way
        const mobilePlans_KT = [
            { "category": "90K", "name": "ë””ì¦ˆë‹ˆ+ ì´ˆì´ìŠ¤ ìŠ¤í˜ì…œ", "network": "5G", "price": 110000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1470" },
            { "category": "90K", "name": "(ìœ íŠœë¸Œ í”„ë¦¬ë¯¸ì—„) ì´ˆì´ìŠ¤ ìŠ¤í˜ì…œ", "network": "5G", "price": 110000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1499" },
            { "category": "90K", "name": "ë„·í”Œë¦­ìŠ¤ ì´ˆì´ìŠ¤ ìŠ¤í˜ì…œ", "network": "5G", "price": 110000, "url": "https://product.kt.com/wDic/simple/mNetflixMain.do" },
            { "category": "90K", "name": "í‹°ë¹™/ì§€ë‹ˆ/ë°€ë¦¬ ì´ˆì´ìŠ¤ ìŠ¤í˜ì…œ", "network": "5G", "price": 110000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1601" },
            { "category": "90K", "name": "ë„·í”Œë¦­ìŠ¤ ì´ˆì´ìŠ¤ ë² ì´ì§", "network": "5G", "price": 90000, "url": "https://product.kt.com/wDic/simple/mNetflixMain.do" },
            { "category": "90K", "name": "í‹°ë¹™/ì§€ë‹ˆ/ë°€ë¦¬ ì´ˆì´ìŠ¤ ë² ì´ì§", "network": "5G", "price": 90000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1601" },
            { "category": "90K", "name": "ë””ì¦ˆë‹ˆ+ ì´ˆì´ìŠ¤ ë² ì´ì§", "network": "5G", "price": 90000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1470" },
            { "category": "90K", "name": "(ìœ íŠœë¸Œ í”„ë¦¬ë¯¸ì—„) ì´ˆì´ìŠ¤ ë² ì´ì§", "network": "5G", "price": 90000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1499" },
            { "category": "61K", "name": "ë°ì´í„°ON í”„ë¦¬ë¯¸ì—„", "network": "LTE", "price": 89000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1248" },
            { "category": "61K", "name": "ë² ì´ì§", "network": "5G", "price": 80000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1283" },
            { "category": "61K", "name": "5G ì‹¬í”Œ 110GB", "network": "5G", "price": 69000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1406&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "61K", "name": "ë°ì´í„°ON ë¹„ë””ì˜¤ í”ŒëŸ¬ìŠ¤", "network": "LTE", "price": 69000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1248" },
            { "category": "61K", "name": "5G ì‹¬í”Œ 90GB", "network": "5G", "price": 67000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1406&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "61K", "name": "5G ì‹¬í”Œ 70GB", "network": "5G", "price": 65000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1406&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "61K", "name": "5G ì‹¬í”Œ 50GB", "network": "5G", "price": 63000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1406&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "61K", "name": "5G ì‹¬í”Œ 30GB", "network": "5G", "price": 61000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1406&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 21GB", "network": "5G", "price": 58000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 21GB (ì´ì›”)", "network": "5G", "price": 58000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 14GB", "network": "5G", "price": 55000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 14GB (ì´ì›”)", "network": "5G", "price": 55000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 10GB", "network": "5G", "price": 50000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 10GB (ì´ì›”)", "network": "5G", "price": 50000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ì‹œë‹ˆì–´ ë² ì´ì§", "network": "5G", "price": 49000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1558&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 7GB", "network": "5G", "price": 45000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 7GB (ì´ì›”)", "network": "5G", "price": 45000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ì‹œë‹ˆì–´ Aí˜•", "network": "5G", "price": 44000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1558&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ì‹œë‹ˆì–´ Bí˜•", "network": "5G", "price": 42000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1558&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ì‹œë‹ˆì–´ Cí˜•", "network": "5G", "price": 41000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1558&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 5GB", "network": "5G", "price": 37000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" },
            { "category": "37K", "name": "5G ìŠ¬ë¦¼ 4GB (ì´ì›”)", "network": "5G", "price": 37000, "url": "https://product.kt.com/wDic/productDetail.do?ItemCode=1284&CateCode=6002&filter_code=81&option_code=109&pageSize=10" }
        ].sort((a, b) => b.price - a.price);
          
        // (Request 4: All discount amounts converted to pre-VAT)
        const newKtDiscountRules = {
            "ì´ì•¡ê²°í•©í• ì¸": {
                "100M": {
                    "ë‹¨ë…": {"ëª¨ë°”ì¼_22000ë¯¸ë§Œ": 1500, "ëª¨ë°”ì¼_64900ë¯¸ë§Œ": 3000, "ëª¨ë°”ì¼_64900ì´ìƒ": 5000}, // 1650->1500, 3300->3000, 5500->5000
                    "TV":    {"ëª¨ë°”ì¼_22000ë¯¸ë§Œ": 1500, "ëª¨ë°”ì¼_64900ë¯¸ë§Œ": 3000, "ëª¨ë°”ì¼_64900ì´ìƒ": 5000}
                },
                "500M": {
                    "ë‹¨ë…": {"ëª¨ë°”ì¼_22000ë¯¸ë§Œ": 7000, "ëª¨ë°”ì¼_22000ì´ìƒ": 10000}, // 7700->7000, 11000->10000
                    "TV":    {"ëª¨ë°”ì¼_22000ë¯¸ë§Œ": 2000, "ëª¨ë°”ì¼_22000ì´ìƒ": 5000} // 2200->2000, 5500->5000
                },
                "1G": {
                    "ë‹¨ë…": {"ëª¨ë°”ì¼_22000ë¯¸ë§Œ": 7000, "ëª¨ë°”ì¼_22000ì´ìƒ": 10000},
                    "TV":    {"ëª¨ë°”ì¼_ê²°í•©ì‹œ": 5000}
                }
            },
            "í”„ë¦¬ë¯¸ì—„ê°€ì¡±ê²°í•©": {
                "500M_TV": 5000, "1G_TV": 5000,
                "500M_ë‹¨ë…": 5000, "1G_ë‹¨ë…": 10000
            },
            "í”„ë¦¬ë¯¸ì—„ì‹±ê¸€ê²°í•©": {
                "500M_ë‹¨ë…": 5000, "1G_ë‹¨ë…": 5000
            },
            "íŒ¨ë°€ë¦¬ê²°í•©": {
                "100M_TV": 5000, "100M_ë‹¨ë…": 5000,
                "500M_TV": 5000, "500M_ë‹¨ë…": 10000,
                "1G_TV": 5000,    "1G_ë‹¨ë…": 10000
            },
            "ì•Œëœ°í°ê²°í•©": {
                "100M_TV": 3000, "100M_ë‹¨ë…": 3000, // 3300->3000
                "500M_TV": 5000, "500M_ë‹¨ë…": 10000,
                "1G_TV": 5000,    "1G_ë‹¨ë…": 10000
            }
        };
          
        // Dongpan gifts remain as cash amounts (no VAT applicable)
        const dongpanGiftRules_New = {
            "37K ìš”ê¸ˆì œ": {
                "100Mb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 150000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "100Mb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 150000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "500Mb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 160000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "500Mb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 160000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "1Gb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 170000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "1Gb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 170000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "100Mb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 200000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 60000 },
                "100Mb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 200000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 60000 },
                "500Mb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 220000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 60000 },
                "500Mb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 220000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 60000 },
                "1Gb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 240000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 60000 },
                "1Gb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 240000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 60000 }
            },
            "61K ìš”ê¸ˆì œ": {
                "100Mb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 270000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "100Mb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 270000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "500Mb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 280000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "500Mb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 280000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "1Gb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 290000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "1Gb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 290000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "100Mb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 320000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 120000 },
                "100Mb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 320000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 120000 },
                "500Mb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 340000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 130000 },
                "500Mb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 340000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 120000 },
                "1Gb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 360000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 130000 },
                "1Gb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 360000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 120000 }
            },
            "90K ìš”ê¸ˆì œ": {
                "100Mb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 310000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "100Mb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 310000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "500Mb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 320000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "500Mb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 320000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "1Gb ë‹¨ë… ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 330000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "1Gb ë‹¨ë… íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 330000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": "ì œê³µ ë¶ˆê°€" },
                "100Mb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 360000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 130000 },
                "100Mb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 360000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 130000 },
                "500Mb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 380000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 140000 },
                "500Mb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 380000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 130000 },
                "1Gb+TV ì¼ë°˜": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 400000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 140000 },
                "1Gb+TV íŒ¨ë°€ë¦¬": { "ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ": { "ìœ ì‹¬": 400000 }, "ê°€ì¡± ì‚¬ì€í’ˆ": 130000 }
            }
        };
          
        // (Request 4: Installation fees remain VAT included as they are typically charged that way)
        const ktInstallationFees_new = {
            "weekday": {
                "internet_only": { "description": "ì¸í„°ë„· ë‹¨ë…", "cost": 36000 },
                "internet_tv": { "description": "ì¸í„°ë„· + TV", "cost": 56200 },
                "internet_landline": { "description": "ì¸í„°ë„· + ì¼ë°˜ì „í™”", "cost": 68000 },
                "internet_voip": { "description": "ì¸í„°ë„· + 070ì „í™”", "cost": 60000 },
                "internet_tv_landline": { "description": "ì¸í„°ë„· + TV + ì¼ë°˜ì „í™”", "cost": 88200 },
                "internet_tv_voip": { "description": "ì¸í„°ë„· + TV + 070ì „í™”", "cost": 80200 },
                "internet_tv_additional_tv": { "description": "ì¸í„°ë„· + TV + TV ì¶”ê°€", "cost": 71600 }
            },
            "weekend_night": {
                "internet_only": { "description": "ì¸í„°ë„· ë‹¨ë… (ì£¼ë§/ì•¼ê°„)", "cost": 45000 },
                "internet_tv": { "description": "ì¸í„°ë„· + TV (ì£¼ë§/ì•¼ê°„)", "cost": 71250 },
                "internet_landline": { "description": "ì¸í„°ë„· + ì¼ë°˜ì „í™” (ì£¼ë§/ì•¼ê°„)", "cost": 86000 },
                "internet_voip": { "description": "ì¸í„°ë„· + 070ì „í™” (ì£¼ë§/ì•¼ê°„)", "cost": 78000 },
                "internet_tv_landline": { "description": "ì¸í„°ë„· + TV + ì¼ë°˜ì „í™” (ì£¼ë§/ì•¼ê°„)", "cost": 112250 },
                "internet_tv_voip": { "description": "ì¸í„°ë„· + TV + 070ì „í™” (ì£¼ë§/ì•¼ê°„)", "cost": 104250 },
                "internet_tv_additional_tv": { "description": "ì¸í„°ë„· + TV + TV ì¶”ê°€ (ì£¼ë§/ì•¼ê°„)", "cost": 90500 }
            }
        };
          
        // Gifts remain as cash amounts (no VAT applicable)
        const ottCommissionRules_KT = {
            "internet_tv": {
                "description": "KT ì¸í„°ë„· + TV ê²°í•© ìƒí’ˆ ì •ì±… (OTT 6ì¢… 3ë…„ ë¬´ë£Œ í˜œíƒ ì œê³µ)",
                "general_notes": [ "1ê¸°ê°€ ì¸í„°ë„· ì ‘ìˆ˜ ì‹œ íŒë§¤ì ìˆ˜ìˆ˜ë£Œì— 10,000ì› ì¶”ê°€" ],
                "commission_rules": [
                    { "commission": 80000, "support_money_min": 350000, "support_money_max": 400000, "plan_tier": "premium", "plan_names": "ì§€ë‹ˆ TV ì—ì„¼ìŠ¤", "notes": [] },
                    { "commission": 70000, "support_money_min": 350000, "support_money_max": 400000, "plan_tier": "basic", "plan_names": "ì§€ë‹ˆ TV ë² ì´ì§", "notes": [] },
                    { "commission": 70000, "support_money_min": 410000, "support_money_max": 440000, "plan_tier": "premium", "plan_names": "ì§€ë‹ˆ TV ì—ì„¼ìŠ¤", "notes": [ "ì§€ì›ê¸ˆ 430,000ì›ê¹Œì§€ëŠ” OTT í˜œíƒ ì œê³µ ê°€ëŠ¥", "ì§€ì›ê¸ˆ 440,000ì›ë¶€í„°ëŠ” OTT í¬í•¨ ì‹œ ìˆ˜ìˆ˜ë£Œ 10,000ì› ì°¨ê°" ] },
                    { "commission": 60000, "support_money_min": 410000, "support_money_max": 440000, "plan_tier": "basic", "plan_names": "ì§€ë‹ˆ TV ë² ì´ì§", "notes": [ "ì§€ì›ê¸ˆ 430,000ì›ê¹Œì§€ëŠ” OTT í˜œíƒ ì œê³µ ê°€ëŠ¥", "ì§€ì›ê¸ˆ 440,000ì›ë¶€í„°ëŠ” OTT í¬í•¨ ì‹œ ìˆ˜ìˆ˜ë£Œ 10,000ì› ì°¨ê°" ] },
                    { "commission": 60000, "support_money_min": 450000, "support_money_max": 500000, "plan_tier": "premium", "plan_names": "ì§€ë‹ˆ TV ì—ì„¼ìŠ¤", "notes": [ "ê¸°ë³¸ì ìœ¼ë¡œ OTT í˜œíƒ ë¯¸í¬í•¨", "OTT í¬í•¨ ì‹œ ìˆ˜ìˆ˜ë£Œ 10,000ì› ì°¨ê°" ] },
                    { "commission": 30000, "support_money_min": 450000, "support_money_max": 500000, "plan_tier": "basic", "plan_names": "ì§€ë‹ˆ TV ë² ì´ì§", "notes": [ "ê¸°ë³¸ì ìœ¼ë¡œ OTT í˜œíƒ ë¯¸í¬í•¨", "OTT í¬í•¨ ì‹œ ìˆ˜ìˆ˜ë£Œ 10,000ì› ì°¨ê°" ] },
                    { "commission": 30000, "support_money_min": 510000, "support_money_max": 550000, "plan_tier": "premium", "plan_names": "ì§€ë‹ˆ TV ì—ì„¼ìŠ¤", "notes": [ "ê¸°ë³¸ì ìœ¼ë¡œ OTT í˜œíƒ ë¯¸í¬í•¨", "OTT í¬í•¨ ì‹œ ìˆ˜ìˆ˜ë£Œ 10,000ì› ì°¨ê°" ] },
                    { "commission": 20000, "support_money_min": 510000, "support_money_max": 550000, "plan_tier": "basic", "plan_names": "ì§€ë‹ˆ TV ë² ì´ì§", "notes": [ "ê¸°ë³¸ì ìœ¼ë¡œ OTT í˜œíƒ ë¯¸í¬í•¨", "OTT í¬í•¨ ì‹œ ìˆ˜ìˆ˜ë£Œ 10,000ì› ì°¨ê°" ] }
                ]
            },
            "internet_only": {
                "description": "KT ì¸í„°ë„· ë‹¨ë… ìƒí’ˆ ì •ì±… (500ë©”ê°€ ê¸°ì¤€, OTT 6ì¢… 3ë…„ ë¬´ë£Œ í˜œíƒ ì œê³µ)",
                "general_notes": [],
                "commission_rules": [
                    { "commission": 60000, "support_money": 110000, "payout_method": "ìƒí’ˆê¶Œ 40,000ì› + í˜„ê¸ˆ 70,000ì›" },
                    { "commission": 40000, "support_money_min": 140000, "support_money_max": 180000, "payout_method": "ìƒí’ˆê¶Œ 40,000ì› + ë‚˜ë¨¸ì§€ í˜„ê¸ˆ" },
                    { "commission": 30000, "support_money_min": 200000, "support_money_max": 250000, "payout_method": "ìƒí’ˆê¶Œ 40,000ì› + ë‚˜ë¨¸ì§€ í˜„ê¸ˆ" }
                ]
            }
        };

        const giftTable = {
            "ë² ì´ì§": {
                "100ë‹¨ë…": { cash: 50000, voucher: 40000 }, "500ë‹¨ë…": { cash: 100000, voucher: 40000 }, "1Gë‹¨ë…": { cash: 90000, voucher: 50000 },
                "100ë²ˆë“¤": { cash: 310000, voucher: 60000 }, "500ë²ˆë“¤": { cash: 390000, voucher: 60000 }, "ê¸°ê°€ë²ˆë“¤": { cash: 360000, voucher: 90000 }
            },
            "ë¼ì´íŠ¸": {
                "100ë‹¨ë…": { cash: 50000, voucher: 40000 }, "500ë‹¨ë…": { cash: 100000, voucher: 40000 }, "1Gë‹¨ë…": { cash: 90000, voucher: 50000 },
                "100ë²ˆë“¤": { cash: 310000, voucher: 60000 }, "500ë²ˆë“¤": { cash: 380000, voucher: 70000 }, "ê¸°ê°€ë²ˆë“¤": { cash: 350000, voucher: 100000 }
            },
            "ì—ì„¼ìŠ¤": {
                "100ë‹¨ë…": { cash: 50000, voucher: 40000 }, "500ë‹¨ë…": { cash: 100000, voucher: 40000 }, "1Gë‹¨ë…": { cash: 90000, voucher: 50000 },
                "100ë²ˆë“¤": { cash: 310000, voucher: 60000 }, "500ë²ˆë“¤": { cash: 420000, voucher: 30000 }, "ê¸°ê°€ë²ˆë“¤": { cash: 320000, voucher: 30000 }
            },
            "ì—ì„¼ìŠ¤ í”ŒëŸ¬ìŠ¤": {
                "100ë‹¨ë…": { cash: 50000, voucher: 40000 }, "500ë‹¨ë…": { cash: 100000, voucher: 40000 }, "1Gë‹¨ë…": { cash: 90000, voucher: 50000 },
                "100ë²ˆë“¤": { cash: 310000, voucher: 60000 }, "500ë²ˆë“¤": { cash: 420000, voucher: 30000 }, "ê¸°ê°€ë²ˆë“¤": { cash: 320000, voucher: 30000 }
            },
            "ë„·í”Œë¦­ìŠ¤ HD": {
                "100ë‹¨ë…": { cash: 50000, voucher: 40000 }, "500ë‹¨ë…": { cash: 100000, voucher: 40000 }, "1Gë‹¨ë…": { cash: 90000, voucher: 50000 },
                "100ë²ˆë“¤": { cash: 310000, voucher: 60000 }, "500ë²ˆë“¤": { cash: 390000, voucher: 60000 }, "ê¸°ê°€ë²ˆë“¤": { cash: 360000, voucher: 90000 }
            },
            "ë„·í”Œë¦­ìŠ¤ UHD": {
                "100ë‹¨ë…": { cash: 50000, voucher: 40000 }, "500ë‹¨ë…": { cash: 100000, voucher: 40000 }, "1Gë‹¨ë…": { cash: 90000, voucher: 50000 },
                "100ë²ˆë“¤": { cash: 310000, voucher: 60000 }, "500ë²ˆë“¤": { cash: 390000, voucher: 60000 }, "ê¸°ê°€ë²ˆë“¤": { cash: 360000, voucher: 90000 }
            },
            "í‚¤ì¦ˆëœë“œ": {
                "100ë‹¨ë…": { cash: 50000, voucher: 40000 }, "500ë‹¨ë…": { cash: 100000, voucher: 40000 }, "1Gë‹¨ë…": { cash: 90000, voucher: 50000 },
                "100ë²ˆë“¤": { cash: 310000, voucher: 60000 }, "500ë²ˆë“¤": { cash: 390000, voucher: 60000 }, "ê¸°ê°€ë²ˆë“¤": { cash: 360000, voucher: 90000 }
            }
        };
          
        // (Request 4: Mobile discounts remain VAT included as they apply to VAT-included mobile bills)
        const kt_total_mobile_fee_discounts = {
            "100M": {
                "tier1_under_22000": { "internet_discount": 1650, "mobile_discount": 0, "total_discount": 1650 },
                "tier2_22000_to_64899": { "internet_discount": 3300, "mobile_discount": 0, "total_discount": 3300 },
                "tier3_64900_to_108899": { "internet_discount": 5500, "mobile_discount": 3300, "total_discount": 8800 },
                "tier4_108900_to_141899": { "internet_discount": 5500, "mobile_discount": 14300, "total_discount": 19800 },
                "tier5_141900_to_174899": { "internet_discount": 5500, "mobile_discount": 18700, "total_discount": 24200 },
                "tier6_over_174900": { "internet_discount": 5500, "mobile_discount": 23100, "total_discount": 28600 }
            },
            "500M_1G": {
                "tier1_under_22000": { "internet_discount": 2200, "mobile_discount": 0, "total_discount": 2200 },
                "tier2_22000_to_64899": { "internet_discount": 5500, "mobile_discount": 0, "total_discount": 5500 },
                "tier3_64900_to_108899": { "internet_discount": 5500, "mobile_discount": 5500, "total_discount": 11000 },
                "tier4_108900_to_141899": { "internet_discount": 5500, "mobile_discount": 16610, "total_discount": 22110 },
                "tier5_141900_to_174899": { "internet_discount": 5500, "mobile_discount": 22100, "total_discount": 27610 },
                "tier6_over_174900": { "internet_discount": 5500, "mobile_discount": 27610, "total_discount": 33110 }
            }
        };
          
          
        // ------------------- DOM Element Selectors -------------------
        const internetPlanEl = document.getElementById('internetPlan');
        const wifiRouterRentalEl = document.getElementById('wifiRouterRental');
        const tvPlanEl = document.getElementById('tvPlan');
        const additionalTvPlanEl = document.getElementById('additionalTvPlan');
        const phonePlanEl = document.getElementById('phonePlan');
        const addonServicesContainerEl = document.getElementById('addonServicesContainer');
        const mobileLinesCountEl = document.getElementById('mobileLinesCount');
        const mobileLinesContainerEl = document.getElementById('mobileLinesContainer');
        const dongpanSalesCheckKtEl = document.getElementById('dongpanSalesCheckKt');
        const dongpanPolicyDetailsContainerKtEl = document.getElementById('dongpanPolicyDetailsContainerKt');
        const discountTypeRadios = document.querySelectorAll('input[name="discountType"]');
          
        const totalAmountDetailsToggleEl = document.getElementById('totalAmountDetailsToggle');
        const totalAmountDetailsContainerEl = document.getElementById('totalAmountDetailsContainer');
          
        const fixedRateDetailsToggleEl = document.getElementById('fixedRateDetailsToggle');
        const fixedRateDetailsContainerEl = document.getElementById('fixedRateDetailsContainer');
      
        const premiumFamilyDetailsToggleEl = document.getElementById('premiumFamilyDetailsToggle');
        const premiumFamilyDetailsContainerEl = document.getElementById('premiumFamilyDetailsContainer');
          
        const premiumSingleDetailsToggleEl = document.getElementById('premiumSingleDetailsToggle');
        const premiumSingleDetailsContainerEl = document.getElementById('premiumSingleDetailsContainer');
          
        const familyBundleDetailsToggleEl = document.getElementById('familyBundleDetailsToggle');
        const familyBundleDetailsContainerEl = document.getElementById('familyBundleDetailsContainer');
          
        const separateFamilyDetailsToggleEl = document.getElementById('separateFamilyDetailsToggle');
        const separateFamilyDetailsContainerEl = document.getElementById('separateFamilyDetailsContainer');
          
        const mvnoDetailsToggleEl = document.getElementById('mvnoDetailsToggle');
        const mvnoDetailsContainerEl = document.getElementById('mvnoDetailsContainer');
          
        const calculateButton = document.getElementById('calculateButton');
        const resetButton = document.getElementById('resetButton');
        const resultSection = document.getElementById('resultSection');
          
        const toggleDetailsButton = document.getElementById('toggleDetailsButton');
        const expandedDetailsContainer = document.getElementById('expandedDetailsContainer');
          
        const summaryPreDiscountCostEl = document.getElementById('summaryPreDiscountCost');
        const summaryFinalCostEl = document.getElementById('summaryFinalCost');
        const summaryInternetDiscountEl = document.getElementById('summaryInternetDiscount');
        const summaryGiftTotalEl = document.getElementById('summaryGiftTotal');
        const summaryMobileDiscountEl = document.getElementById('summaryMobileDiscount');
          
        const selectedInternetEl = document.getElementById('selectedInternet');
        const selectedTvEl = document.getElementById('selectedTv');
        const selectedAdditionalTvEl = document.getElementById('selectedAdditionalTv');
        const selectedPhoneEl = document.getElementById('selectedPhone');
        const selectedWifiEl = document.getElementById('selectedWifi');
        const selectedMobileCountEl = document.getElementById('selectedMobileCount');
        const selectedDiscountTypeEl = document.getElementById('selectedDiscountType');
        const selectedWifiDetailsEl = document.getElementById('selectedWifiDetails');
          
          
        const detailInternetBaseEl = document.getElementById('detailInternetBase');
        const detailWifiFeeEl = document.getElementById('detailWifiFee');
        const detailInternetDiscountTotalEl = document.getElementById('detailInternetDiscountTotal');
        // (Request 4: Added Pre-VAT and VAT elements)
        const detailFinalCostPreVatEl = document.getElementById('detailFinalCostPreVat');
        const detailVatAmountEl = document.getElementById('detailVatAmount');
        const detailFinalCostEl = document.getElementById('detailFinalCost');
          
        const giftCashEl = document.getElementById('giftCash');
        const giftVoucherEl = document.getElementById('giftVoucher');
        const giftPhoneVoucherEl = document.getElementById('giftPhoneVoucher');
        const giftAdditionalTvEl = document.getElementById('giftAdditionalTv');
        const dongpanCashContainerKtEl = document.getElementById('dongpanCashContainerKt');
        const giftDongpanAdditionalCashKtEl = document.getElementById('giftDongpanAdditionalCashKt');
        const giftTotalEl = document.getElementById('giftTotal');
        const mobileDiscountDetailContainerEl = document.getElementById('mobileDiscountDetailContainer');
          
        // --- New selectors for installation fee ---
        const installationFeeSectionEl = document.getElementById('installationFeeSection');
        const installationFeeResultEl = document.getElementById('installationFeeResult');
        const installationFeeDescriptionEl = document.getElementById('installationFeeDescription');
          
        // --- Message Script Selectors ---
        const messageScriptSectionEl = document.getElementById('messageScriptSection');
        const memoScriptEl = document.getElementById('memoScript');
        const infoScriptEl = document.getElementById('infoScript');
        const completeScriptEl = document.getElementById('completeScript');
        const sensitiveInfoLinkScriptEl = document.getElementById('sensitiveInfoLinkScript');
        const usimCompleteScriptEl = document.getElementById('usimCompleteScript');
        const tcoComparisonScriptEl = document.getElementById('tcoComparisonScript');
        const penaltyAnalysisScriptEl = document.getElementById('penaltyAnalysisScript');
        const penaltyWaiverScriptEl = document.getElementById('penaltyWaiverScript');
          
        // (Request 2: Removed Gemini API related selectors)
      
        // âœ¨ New Button Selector
        const generateComparisonButtonEl = document.getElementById('generateComparisonButton');
        const generateDiscountTypeComparisonButtonEl = document.getElementById('generateDiscountTypeComparisonButton');
      
        const affiliateCardEl = document.getElementById('affiliateCard');
        const cardTierContainerEl = document.getElementById('cardTierContainer');
        const cardTiersEl = document.getElementById('cardTiers');
        const summaryCardAppliedEl = document.getElementById('summaryCardApplied');
        const detailCardDiscountContainerEl = document.getElementById('detailCardDiscountContainer');
        const selectedCardNameEl = document.getElementById('selectedCardName');
        const detailCardDiscountEl = document.getElementById('detailCardDiscount');
        const detailFinalCardCostContainerEl = document.getElementById('detailFinalCardCostContainer');
        const detailFinalCardCostEl = document.getElementById('detailFinalCardCost');
        const finalCardCostSeparatorEl = document.getElementById('finalCardCostSeparator');

        // --- New Commission Section selectors ---
        const commissionSectionEl = document.getElementById('commissionSection');
        const commissionTierEl = document.getElementById('commissionTier');
        const commissionNotesEl = document.getElementById('commissionNotes');
        const vatToggleSwitchEl = document.getElementById('vatToggleSwitch');
          
        // ------------------- Event Listeners -------------------
        vatToggleSwitchEl.addEventListener('change', function() {
            isVatIncluded = this.checked;
            if (!resultSection.classList.contains('hidden')) {
                calculateAndDisplayResults();
            }
        });

        mobileLinesCountEl.addEventListener('input', updateMobileLinesInputs);
        calculateButton.addEventListener('click', calculateAndDisplayResults);
        resetButton.addEventListener('click', resetCalculator);
      
        affiliateCardEl.addEventListener('change', () => {
            const selectedCard = affiliateCardEl.value;
            cardTiersEl.innerHTML = ''; // Clear previous options
      
            if (selectedCard === 'none') {
                cardTierContainerEl.classList.add('hidden');
                return;
            }
      
            const cardData = affiliateCardDiscounts[selectedCard];
            if (cardData) {
                cardData.tiers.forEach((tier, index) => {
                    const label = document.createElement('label');
                    label.className = 'radio-label';
                    label.innerHTML = `
                        <input type="radio" name="cardTier" value="${tier.discount}" class="radio-input" ${index === 0 ? 'checked' : ''}>
                        ${tier.label} (ì›” ${tier.discount.toLocaleString()}ì› í• ì¸)
                    `;
                    cardTiersEl.appendChild(label);
                });
                cardTierContainerEl.classList.remove('hidden');
            }
        });
      
        if (generateComparisonButtonEl) {
            generateComparisonButtonEl.addEventListener('click', generateComparisonScript);
        }
      
        if (generateDiscountTypeComparisonButtonEl) {
            generateDiscountTypeComparisonButtonEl.addEventListener('click', generateDiscountTypeComparisonScript);
        }
          
        toggleDetailsButton.addEventListener('click', () => {
            expandedDetailsContainer.classList.toggle('hidden');
            const isHidden = expandedDetailsContainer.classList.contains('hidden');
            toggleDetailsButton.innerHTML = isHidden ? 'ìƒì„¸ ìš”ê¸ˆ ë‚´ì—­ í¼ì³ë³´ê¸° â–¼' : 'ìƒì„¸ ìš”ê¸ˆ ë‚´ì—­ ì ‘ê¸° â–²';
        });
          
        if(dongpanSalesCheckKtEl) {
            dongpanSalesCheckKtEl.addEventListener('change', function() {
                if (dongpanPolicyDetailsContainerKtEl) {
                    dongpanPolicyDetailsContainerKtEl.classList.toggle('hidden', !this.checked);
                }
                if (!resultSection.classList.contains('hidden')) {
                    calculateAndDisplayResults();
                }
            });
        }
      
        // (Request 2: Removed Gemini API button listeners)
      
        const allDetailSections = [
            { radioValue: 'totalAmountBundle', toggleEl: totalAmountDetailsToggleEl, containerEl: totalAmountDetailsContainerEl, updateFn: updateTotalAmountDetails },
            { radioValue: 'fixedRateBundle', toggleEl: fixedRateDetailsToggleEl, containerEl: fixedRateDetailsContainerEl, updateFn: updateFixedRateDetails },
            { radioValue: 'premiumFamilyBundle', toggleEl: premiumFamilyDetailsToggleEl, containerEl: premiumFamilyDetailsContainerEl, updateFn: updatePremiumFamilyDetails },
            { radioValue: 'premiumSingleBundle', toggleEl: premiumSingleDetailsToggleEl, containerEl: premiumSingleDetailsContainerEl, updateFn: updatePremiumSingleDetails },
            { radioValue: 'familyBundle', toggleEl: familyBundleDetailsToggleEl, containerEl: familyBundleDetailsContainerEl, updateFn: updateFamilyBundleDetails },
            { radioValue: 'separateFamilyBundle', toggleEl: separateFamilyDetailsToggleEl, containerEl: separateFamilyDetailsContainerEl, updateFn: updateSeparateFamilyDetails },
            { radioValue: 'mvnoBundle', toggleEl: mvnoDetailsToggleEl, containerEl: mvnoDetailsContainerEl, updateFn: updateMvnoDetails }
        ];
          
        function updateMobilePlanOptions() {
            const selectedDiscountType = document.querySelector('input[name="discountType"]:checked').value;
             
            document.querySelectorAll('.mobile-plan-select').forEach((select, index) => {
                let isPremiumLineRuleActive = (selectedDiscountType === 'premiumFamilyBundle' && index < 2) || selectedDiscountType === 'premiumSingleBundle';
                let needsReset = false;
      
                for (const option of select.options) {
                    const price = parseInt(option.value);
                    if (price > 0) {
                        if (isPremiumLineRuleActive && price < 77000) {
                            option.disabled = true;
                            if (option.selected) {
                                needsReset = true;
                            }
                        } else {
                            option.disabled = false;
                        }
                    }
                }
      
                if (needsReset) {
                    const firstAvailablePremium = Array.from(select.options).find(opt => !opt.disabled && parseInt(opt.value) >= 77000);
                    if (firstAvailablePremium) {
                            select.value = firstAvailablePremium.value;
                    } else {
                            select.value = "0";
                    }
                    select.dispatchEvent(new Event('change'));
                }
            });
        }
          
        function updateInternetPlanOptions() {
            const selectedDiscountType = document.querySelector('input[name="discountType"]:checked').value;
            const restrictedTypes = ['separateFamilyBundle', 'premiumFamilyBundle', 'premiumSingleBundle'];
            const isRestricted = restrictedTypes.includes(selectedDiscountType);
      
            let wasChanged = false;
      
            for (const option of internetPlanEl.options) {
                if (!option.dataset.speed) continue;
                const speed = parseInt(option.dataset.speed);
                if (speed < 500) { // 500M ë¯¸ë§Œ(ì¦‰, 100M)ì„ ì œí•œ
                    if (isRestricted) {
                        option.disabled = true;
                        if (option.selected) {
                            internetPlanEl.value = 'none';
                            wasChanged = true;
                        }
                    } else {
                        option.disabled = false;
                    }
                }
            }
      
            if (wasChanged) {
                const first500M = Array.from(internetPlanEl.options).find(opt => parseInt(opt.dataset.speed) === 500 && !opt.disabled);
                if (first500M) {
                    internetPlanEl.value = first500M.value;
                }
                internetPlanEl.dispatchEvent(new Event('change'));
            }
        }
          
        discountTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                const newlySelectedRadioValue = this.value;
                const oldMobileCount = parseInt(mobileLinesCountEl.value);
      
                allDetailSections.forEach(section => {
                    if (section.containerEl && section.toggleEl) {
                        let isVisible = false;
                        if (newlySelectedRadioValue === section.radioValue) {
                            isVisible = section.toggleEl.checked;
                            if (isVisible && section.updateFn) {
                                section.updateFn();
                            }
                        } else {
                            section.toggleEl.checked = false;
                            isVisible = false;
                        }
                        section.containerEl.classList.toggle('hidden', !isVisible);
                    }
                });
      
                if (newlySelectedRadioValue === 'premiumSingleBundle') {
                    mobileLinesCountEl.value = 1;
                    mobileLinesCountEl.disabled = true;
                } else if (newlySelectedRadioValue === "none" || newlySelectedRadioValue === "familyBundle" || newlySelectedRadioValue === "mvnoBundle") {
                    mobileLinesCountEl.value = 0;
                    mobileLinesCountEl.disabled = true;
                } else {
                    mobileLinesCountEl.disabled = false;
                        if (oldMobileCount === 0 && !mobileLinesCountEl.disabled) {
                            mobileLinesCountEl.value = 1;
                        } else {
                            mobileLinesCountEl.value = oldMobileCount;
                        }
                }
      
                updateMobileLinesInputs();
                 
                updateMobilePlanOptions();
                updateInternetPlanOptions();
            });
        });
          
          
        allDetailSections.forEach(section => {
            if (section.toggleEl && section.containerEl && section.updateFn) {
                section.toggleEl.addEventListener('change', function() {
                    const radioForThisToggle = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`);
                    if (radioForThisToggle && radioForThisToggle.checked) {
                        section.containerEl.classList.toggle('hidden', !this.checked);
                        if (this.checked) {
                            section.updateFn();
                        }
                    } else {
                        section.containerEl.classList.add('hidden');
                        this.checked = false;
                    }
                });
            }
        });
      
        const internetTypeRadios = document.querySelectorAll('input[name="internetType"]');
        internetTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                populateInternetPlans();
                handleInternetTypeChange();
            });
        });
          
          
        // ------------------- Functions -------------------
          
        function populateInternetPlans() {
            const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
            const currentInternetPlan = internetPlanEl.value;
            internetPlanEl.innerHTML = '<option value="none">ì„ íƒ ì•ˆí•¨</option>';

            for (const planKey in internetPlans_KT) {
                const plan = internetPlans_KT[planKey];
                let displayText = "";
                let matchesType = false;

                // Skip OTT plans for speeds less than 500M
                if (plan.isOttPlan && plan.speed < 500) {
                    continue;
                }

                const speedText = plan.speed >= 1000 ? `${plan.speed / 1000}G` : `${plan.speed}M`;
                const ottText = plan.isOttPlan ? "+OTT 6ì¢… 3ë…„ ë¬´ë£Œ" : "";

                if (selectedInternetType === "bundle") {
                    if (planKey.includes("ë²ˆë“¤")) {
                        displayText = `ì¸í„°ë„· ${speedText}${ottText} (TV ê²°í•© ì‹œ) (ì›” ${plan.basePrice.toLocaleString()}ì›, VATë³„ë„)`;
                        matchesType = true;
                    }
                } else {
                    if (planKey.includes("(ë‹¨ë…)")) {
                        displayText = `ì¸í„°ë„·(ë‹¨ë…) ${speedText}${ottText} (ì›” ${plan.basePrice.toLocaleString()}ì›, VATë³„ë„)`;
                        matchesType = true;
                    }
                }

                if (matchesType) {
                    const option = document.createElement('option');
                    option.value = planKey;
                    option.textContent = displayText;
                    option.dataset.price = plan.basePrice;
                    option.dataset.speed = plan.speed;
                    option.dataset.type = plan.type;
                    if (plan.isOttPlan) {
                        option.dataset.isOttPlan = "true";
                    }
                    internetPlanEl.appendChild(option);
                }
            }

            if (Array.from(internetPlanEl.options).some(opt => opt.value === currentInternetPlan)) {
                internetPlanEl.value = currentInternetPlan;
            }

            updateInternetPlanOptions();
            internetPlanEl.dispatchEvent(new Event('change'));
        }
          
        function handleInternetTypeChange() {
            const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
            const isStandalone = selectedInternetType === 'standalone';
      
            tvPlanEl.disabled = isStandalone;
            additionalTvPlanEl.disabled = isStandalone;
      
            if (isStandalone) {
                tvPlanEl.value = "none";
                additionalTvPlanEl.value = "none";
                // Set default standalone plan if current selection is invalid
                if (!internetPlanEl.value.includes("(ë‹¨ë…)")) {
                    internetPlanEl.value = "KTì¸í„°ë„·(ë‹¨ë…) 100mb";
                }
            } else {
                // Set default bundle plan if current selection is invalid
                if (!internetPlanEl.value.includes("ë²ˆë“¤")) {
                    internetPlanEl.value = "KTì¸í„°ë„·ë²ˆë“¤100mb";
                }
      
                if (tvPlanEl.value === "none") {
                    tvPlanEl.value = "KTTVë² ì´ì§";
                }
            }
            tvPlanEl.dispatchEvent(new Event('change'));
            internetPlanEl.dispatchEvent(new Event('change'));
            updateCommissionSectionVisibility();
        }
          
          
        internetPlanEl.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
             
            wifiRouterRentalEl.disabled = false;
            const ktRouterOption = Array.from(wifiRouterRentalEl.options).find(opt => opt.dataset.name === "KTê³µìœ ê¸°");
            if (ktRouterOption) {
                // (Request 4: Updated display price)
                ktRouterOption.textContent = 'KTê³µìœ ê¸° (ì›” 1,000ì›)';
            }
      
            if (!selectedOption || selectedOption.value === 'none') {
                updateDiscountTypeAvailability();
                updateCommissionSectionVisibility();
                return;
            }
      
            const internetSpeed = parseInt(selectedOption.dataset.speed);
             
            if (internetSpeed >= 1000) { 
                if (ktRouterOption) {
                    ktRouterOption.selected = true;
                    ktRouterOption.textContent = 'KTê³µìœ ê¸° (1G ì´ìƒ ë¬´ë£Œ)';
                    wifiRouterRentalEl.disabled = true;
                }
            } 
            updateDiscountTypeAvailability();
            updateCommissionSectionVisibility();
        });
          
          
        tvPlanEl.addEventListener('change', () => {
            const isTvSelected = tvPlanEl.value !== 'none';
            // When TV plan changes, we need to re-evaluate which commission tiers are available for OTT plans.
            updateCommissionSectionVisibility();
        });

        commissionTierEl.addEventListener('change', () => {
            const selectedOption = commissionTierEl.options[commissionTierEl.selectedIndex];
            if (!selectedOption || !selectedOption.dataset.notes) {
                commissionNotesEl.innerHTML = '';
                return;
            }

            try {
                const notes = JSON.parse(selectedOption.dataset.notes);
                if (notes && notes.length > 0) {
                    commissionNotesEl.innerHTML = '<strong>ì°¸ê³ ì‚¬í•­:</strong><ul class="list-disc list-inside pl-2 mt-1">' + notes.map(note => `<li>${note}</li>`).join('') + '</ul>';
                } else {
                    commissionNotesEl.innerHTML = '';
                }
            } catch(e) {
                commissionNotesEl.innerHTML = '';
            }
        });
          
        additionalTvPlanEl.addEventListener('change', () => {
            if (tvPlanEl.value === 'none' && additionalTvPlanEl.value !== 'none') {
                additionalTvPlanEl.value = 'none';
            }
        });
          

        // !!! FIX: Refactored updateMobileLinesInputs function !!!
        function updateMobileLinesInputs() {
            const count = parseInt(mobileLinesCountEl.value) || 0;
            const selectedDiscountType = document.querySelector('input[name="discountType"]:checked').value;

            // 1. Capture current state (including checkbox)
            const currentState = [];
            document.querySelectorAll('.mobile-line-item').forEach((item, i) => {
                const select = item.querySelector(`#mobilePlan${i}`);
                const checkbox = item.querySelector(`#selectiveContract${i}`);
                if (select && checkbox) {
                    currentState.push({
                        value: select.value,
                        checked: checkbox.checked
                    });
                }
            });

            mobileLinesContainerEl.innerHTML = '';

            for (let i = 0; i < count; i++) {
                const div = document.createElement('div');
                div.className = 'mobile-line-item py-2 space-y-2';
                div.innerHTML = `
                    <div>
                        <label for="mobilePlan${i}" class="block text-sm font-medium text-slate-600 mb-1">íšŒì„  ${i + 1} ìš”ê¸ˆì œ ì„ íƒ</label>
                        <div class="flex items-center space-x-2">
                            <label for="selectiveContract${i}" class="flex items-center text-sm font-medium text-slate-600 cursor-pointer hover:text-sky-600 p-2 rounded-md bg-slate-50 border border-slate-200">
                                <input type="checkbox" id="selectiveContract${i}" class="selective-contract-checkbox radio-input h-4 w-4 mr-2">
                                ì„ íƒì•½ì •
                            </label>
                            <select id="mobilePlan${i}" class="input-field mobile-plan-select flex-grow">
                                <option value="0" data-name="ìš”ê¸ˆì œ ì„ íƒì—†ìŒ" data-url="">ìš”ê¸ˆì œ ì„ íƒì—†ìŒ</option>
                                ${mobilePlans_KT.map(plan => `
                                    <option value="${plan.price}" data-name="${plan.name}" data-url="${plan.url}">
                                        ${plan.name} (${plan.price.toLocaleString()}ì›)
                                    </option>
                                `).join('')}
                            </select>
                        </div>
                    </div>
                `;
                mobileLinesContainerEl.appendChild(div);

                const newSelect = document.getElementById(`mobilePlan${i}`);
                const newCheckbox = document.getElementById(`selectiveContract${i}`);

                // 2. Determine the value to set (Prioritize existing state, then defaults)
                let valueToSet = currentState[i] ? currentState[i].value : "0";
                let checkedState = currentState[i] ? currentState[i].checked : false;

                // Apply defaults only if the line is new or the existing value is "0"
                if (valueToSet === "0") {
                    if (selectedDiscountType === 'premiumFamilyBundle') {
                        if (i === 0) valueToSet = "80000"; // Assuming first line should also default if not set
                        else if (i === 1) valueToSet = "80000";
                        else if (i > 1) valueToSet = "69000";
                    } else if (selectedDiscountType === 'premiumSingleBundle') {
                        if (i === 0) valueToSet = "80000";
                    }
                }
                 
                // 3. Set the value and state
                if (newSelect.querySelector(`option[value="${valueToSet}"]`)) {
                   newSelect.value = valueToSet;
                } else {
                   // Fallback if the previously selected value is no longer valid (e.g., due to restrictions)
                   newSelect.value = "0"; 
                }
                newCheckbox.checked = checkedState;
            }

            // 4. Add event listeners and update availability
            document.querySelectorAll('.mobile-plan-select, .selective-contract-checkbox').forEach(el => {
                el.addEventListener('change', () => {
                    const currentDiscountType = document.querySelector('input[name="discountType"]:checked').value;
                    const section = allDetailSections.find(s => s.radioValue === currentDiscountType);
                    if (section && section.toggleEl.checked && section.updateFn) {
                        section.updateFn();
                    }
                    updateDiscountTypeAvailability();
                });
            });

            updateMobilePlanOptions();
            updateDiscountTypeAvailability();
        }
          
          
        function getSelectedInternetInfo(planName) {
            if (!planName || planName === 'none' || !internetPlans_KT[planName]) {
                return { basePrice: 0, modemFee: 0, type: "none", speed: 0 };
            }
      
            let basePrice = internetPlans_KT[planName].basePrice;
            // Note: The logic below seems redundant as the basePrice is already defined correctly in the constant based on the planName key.
            // const selectedOption = Array.from(internetPlanEl.options).find(opt => opt.value === planName);
            // if (selectedOption && selectedOption.value !== 'none' && selectedOption.text.includes("KTì¸í„°ë„·ë²ˆë“¤")) {
            //     basePrice = internetPlans_KT[planName].basePrice;
            // }
      
            return { ...internetPlans_KT[planName], basePrice: basePrice };
        }
          
        function getMobileTierKey(totalMobileBaseCost, numMobileLines, internetSpeedType) {
            const discountType = document.querySelector('input[name="discountType"]:checked').value;
            if (numMobileLines > 0 && totalMobileBaseCost === 0 && discountType === 'totalAmountBundle') {
                 totalMobileBaseCost = 37000;
            }
            if (numMobileLines === 0 || totalMobileBaseCost === 0) return null;
      
            if (internetSpeedType === "100M") {
                if (totalMobileBaseCost < 22000) return "ëª¨ë°”ì¼_22000ë¯¸ë§Œ";
                if (totalMobileBaseCost < 64900) return "ëª¨ë°”ì¼_64900ë¯¸ë§Œ";
                return "ëª¨ë°”ì¼_64900ì´ìƒ";
            } else {
                if (totalMobileBaseCost < 22000) return "ëª¨ë°”ì¼_22000ë¯¸ë§Œ";
                return "ëª¨ë°”ì¼_22000ì´ìƒ";
            }
        }
          
        function getMobileTierKeyFor500MUp(totalMobileBaseCost, numMobileLines){
            if (numMobileLines === 0 || totalMobileBaseCost === 0) return null;
            if (totalMobileBaseCost < 22000) return "ëª¨ë°”ì¼_22000ë¯¸ë§Œ";
            return "ëª¨ë°”ì¼_22000ì´ìƒ";
        }
          
        function getMobileTierKeyForSeparateFamily(totalMobileBaseCost, numMobileLines){
            if (numMobileLines === 0 || totalMobileBaseCost === 0) return null;
            if (totalMobileBaseCost < 22000) return "ëª¨ë°”ì¼_22000ë¯¸ë§Œ";
            return "ëª¨ë°”ì¼_22000ì´ìƒ";
        }
          
        // --- NEW/MODIFIED FUNCTIONS for Discount Details ---
      
        function copyDiscountDetailsToClipboard(type) {
            let textToCopy = '';
            switch(type) {
                case 'totalAmountBundle':
                    textToCopy = `[KT ì´ì•¡ ê²°í•©í• ì¸ ì•ˆë‚´]
    KT íœ´ëŒ€í°ì„ ì“°ëŠ” ê°€ì¡±ì´ ë§ì„ìˆ˜ë¡, ìš”ê¸ˆ ì´ì•¡ì´ ë†’ì„ìˆ˜ë¡ ìœ ë¦¬í•œ ê²°í•©ì…ë‹ˆë‹¤.
      
    â–  í•µì‹¬ í˜œíƒ (ì¸í„°ë„·+ëª¨ë°”ì¼)
    - 100M: ìµœëŒ€ 28,600ì› í• ì¸
    - 500M/1G: ìµœëŒ€ 33,110ì› í• ì¸
    * í• ì¸ì•¡ì€ ê²°í•©í•˜ëŠ” íœ´ëŒ€í° ìš”ê¸ˆ ì´ì•¡ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
      
    â–  ì£¼ìš” ì¡°ê±´
    - ìµœëŒ€ ì¸í„°ë„· 1íšŒì„  + íœ´ëŒ€í° 5íšŒì„ ê¹Œì§€ ê²°í•© ê°€ëŠ¥
    - ëŒ€í‘œì ê¸°ì¤€ ì§ê³„ ê°€ì¡± ë²”ìœ„ë§Œ ê°€ëŠ¥ (ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ í•„ìš”)
      
    â–  ì£¼ì˜ì‚¬í•­
    - ê¸°ì¡´ 'ë¬´ì„ ë¬´ì„ ' íœ´ëŒ€í° ê²°í•©ê³¼ëŠ” ì¤‘ë³µ ë¶ˆê°€í•©ë‹ˆë‹¤.`;
                    break;
                case 'fixedRateBundle':
                    textToCopy = `[KT ì •ì•¡ ê²°í•©í• ì¸ ì•ˆë‚´]
    ì¸í„°ë„·ê³¼ íœ´ëŒ€í°ì„ ê°„ë‹¨í•˜ê²Œ ê²°í•©í•˜ê³  ì‹¶ì„ ë•Œ ì¢‹ì€ ì„ íƒì…ë‹ˆë‹¤.
      
    â–  í•µì‹¬ í˜œíƒ
    - ì¸í„°ë„· ìš”ê¸ˆ: 5,500ì› í• ì¸
    - íœ´ëŒ€í° ìš”ê¸ˆ: ì›”ì •ì•¡ ì´ì•¡ì— ë”°ë¼ ìµœëŒ€ 7,000ì› ì¶”ê°€ í• ì¸
      
    â–  íŠ¹ë³„ í˜œíƒ!
    - 500Mbps ì´ìƒ ì¸í„°ë„·ë§Œ ë‹¨ë…ìœ¼ë¡œ ê°€ì… ì‹œ, 'TMê²°í•©í• ì¸(5,500ì›)'ì´ ì¤‘ë³µ ì ìš©ë˜ì–´ ì¸í„°ë„·ì—ì„œë§Œ ì´ 11,000ì› í• ì¸ë©ë‹ˆë‹¤.
      
    â–  ì£¼ìš” ì¡°ê±´
    - ì¸í„°ë„· 1íšŒì„  + íœ´ëŒ€í° 10íšŒì„ ê¹Œì§€ ê²°í•© ê°€ëŠ¥
      
    â–  ì£¼ì˜ì‚¬í•­
    - ì¸í„°ë„·+TV ë²ˆë“¤ ìƒí’ˆì˜ ê²½ìš° ì¸í„°ë„· í• ì¸ 5,500ì›ë§Œ ì ìš©ë©ë‹ˆë‹¤.
    - íŒ¨ë°€ë¦¬ ìíšŒì„  í• ì¸ê³¼ ì¸í„°ë„· í• ì¸ì€ ì¤‘ë³µ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`;
                    break;
                case 'premiumFamilyBundle':
                    textToCopy = `[KT í”„ë¦¬ë¯¸ì—„ ê°€ì¡±ê²°í•© ì•ˆë‚´]
    ê³ ê°€ ìš”ê¸ˆì œ(7.7ë§Œ ì´ìƒ) ì“°ëŠ” ê°€ì¡±ì´ 2ëª… ì´ìƒì¼ ë•Œ ê°•ë ¥ ì¶”ì²œí•˜ëŠ” ê²°í•©ì…ë‹ˆë‹¤.
      
    â–  í•µì‹¬ í˜œíƒ
    - 2ë²ˆì§¸ íšŒì„ ë¶€í„° 7.7ë§Œ ì´ìƒ ìš”ê¸ˆì œëŠ” ì›”ì •ì•¡ì˜ 25% í• ì¸! (ì„ íƒì•½ì •ê³¼ ì¤‘ë³µ ì‹œ ìµœëŒ€ 50%!)
    - 1ë²ˆì§¸ íšŒì„ ì€ 'ì´ì•¡ê²°í•©í• ì¸'ìœ¼ë¡œ ì¶”ê°€ í• ì¸ ì ìš©
      
    â–  ì£¼ìš” ì¡°ê±´
    - 500M ì´ìƒ ì¸í„°ë„· ì‚¬ìš© í•„ìˆ˜
    - ê²°í•© ê°€ì¡± ì¤‘ 2ëª… ì´ìƒì´ 7.7ë§Œ ì› ì´ìƒ ìš”ê¸ˆì œ ì‚¬ìš©
      
    â–  ì£¼ì˜ì‚¬í•­
    - 100M ì¸í„°ë„·ì€ ê°€ì… ë¶ˆê°€í•©ë‹ˆë‹¤.
    - í• ì¸ì„ í•œ ëª…ì—ê²Œ ëª°ì•„ì¤„ ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.`;
                    break;
                case 'premiumSingleBundle':
                    textToCopy = `[KT í”„ë¦¬ë¯¸ì—„ ì‹±ê¸€ê²°í•© ì•ˆë‚´]
    í˜¼ìì„œ ê³ ê°€ ìš”ê¸ˆì œ(7.7ë§Œ ì´ìƒ)ì™€ ë¹ ë¥¸ ì¸í„°ë„·ì„ ì“¸ ë•Œ ìµœê³ ì˜ ì„ íƒì…ë‹ˆë‹¤.
      
    â–  í•µì‹¬ í˜œíƒ
    - íœ´ëŒ€í° ìš”ê¸ˆ ì›”ì •ì•¡ì˜ 25% í• ì¸ (ì„ íƒì•½ì •ê³¼ ì¤‘ë³µ ì‹œ ìµœëŒ€ 50%!)
    - 500M ì´ìƒ ì¸í„°ë„· ë‹¨ë… ì‚¬ìš© ì‹œ 5,500ì› ì¶”ê°€ í• ì¸
      
    â–  ì£¼ìš” ì¡°ê±´
    - 500M ì´ìƒ ì¸í„°ë„· ì‚¬ìš© í•„ìˆ˜
    - ë³¸ì¸ íœ´ëŒ€í° 1íšŒì„ ì´ 7.7ë§Œ ì› ì´ìƒ ìš”ê¸ˆì œ ì‚¬ìš©
      
    â–  ì£¼ì˜ì‚¬í•­
    - 100M ì¸í„°ë„·ì€ ê°€ì… ë¶ˆê°€í•©ë‹ˆë‹¤.
    - ì¸í„°ë„·+TV ê²°í•© ì‹œì—ëŠ” ê°€ì…ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
                    break;
                case 'familyBundle':
                    textToCopy = `[KT íŒ¨ë°€ë¦¬ ê²°í•© ì•ˆë‚´]
    ê¸°ì¡´ì— KT ì¸í„°ë„·ì„ ì“°ëŠ” ê°€ì¡±ì´ ìˆì„ ë•Œ, ì¶”ê°€ íšŒì„ ì„ ì €ë ´í•˜ê²Œ ì´ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
      
    â–  í•µì‹¬ í˜œíƒ (ì¶”ê°€ íšŒì„  ê¸°ì¤€)
    - 100M ì¸í„°ë„·: 5,500ì› í• ì¸
    - 500M/1G ì¸í„°ë„·: 11,000ì› í• ì¸
      
    â–  ì£¼ìš” ì¡°ê±´
    - ë³¸ì¸ ë˜ëŠ” ì§ê³„ ê°€ì¡± ì¤‘ ê¸°ì¡´ KT ì¸í„°ë„· ì‚¬ìš©ì(ëª¨íšŒì„ ) í•„ìš”
    - ì‹ ê·œ ì„¤ì¹˜ í›„ 1ê°œì›” ë‚´ ê²°í•© ì‹ ì²­ í•„ìˆ˜
      
    â–  ì£¼ì˜ì‚¬í•­
    - ë²•ì¸ ëª…ì˜ëŠ” ê°€ì… ë¶ˆê°€í•©ë‹ˆë‹¤.`;
                    break;
                case 'separateFamilyBundle':
                    textToCopy = `[KT ë”°ë¡œ ì‚´ì•„ë„ ê°€ì¡±ê²°í•© ì•ˆë‚´]
    ë©€ë¦¬ ì‚¬ëŠ” ê°€ì¡±ë„ KT ì¸í„°ë„·ì„ ì“´ë‹¤ë©´ ì¶”ê°€ í• ì¸ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ê²°í•© ìƒí’ˆì…ë‹ˆë‹¤.
      
    â–  í•µì‹¬ í˜œíƒ
    - 500M ì¸í„°ë„·/TV: ê°ê° 2,200ì› ì¶”ê°€ í• ì¸
    - 1G ì¸í„°ë„·/TV: ê°ê° 3,300ì› ì¶”ê°€ í• ì¸
    * ê¸°ì¡´ 'ì´ì•¡ ê²°í•©í• ì¸'ê³¼ ì¤‘ë³µ ì ìš©ë©ë‹ˆë‹¤.
      
    â–  ì£¼ìš” ì¡°ê±´
    - ê¸°ì¤€ ê°€ì¡±(ë² ì´ìŠ¤ íšŒì„ )ì´ KT ì¸í„°ë„·+íœ´ëŒ€í° ì‚¬ìš©
    - 25ë…„ 3ì›” ì´í›„ ì‹ ê·œ ê°€ì…ì
    - ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ ë“± ì„œë¥˜ ì œì¶œ í•„ìš”
      
    â–  ì£¼ì˜ì‚¬í•­
    - 100M ì¸í„°ë„·ì€ í• ì¸ í˜œíƒì´ ì—†ìŠµë‹ˆë‹¤.
    - ê¸°ì¡´ 'ë­‰ì¹˜ë©´ì˜¬ë ˆ' ì‚¬ìš©ìëŠ” ë² ì´ìŠ¤ íšŒì„  ì§€ì • ë¶ˆê°€
    - 'íŒ¨ë°€ë¦¬ ê²°í•©' ìíšŒì„ ì€ ì¤‘ë³µ ì ìš© ë¶ˆê°€
    - ê°œí†µ í›„ ìµì›” ë§ê¹Œì§€ ê²°í•© ì‹ ì²­ í•„ìˆ˜`;
                    break;
                case 'mvnoBundle':
                    textToCopy = `[KT ì•Œëœ°í° ê²°í•© ì•ˆë‚´]
    KTë§ ì•Œëœ°í° ìœ ì €ë¥¼ ìœ„í•œ ì¸í„°ë„· ìš”ê¸ˆ í• ì¸ ìƒí’ˆì…ë‹ˆë‹¤.
      
    â–  í•µì‹¬ í˜œíƒ (ì¸í„°ë„· ìš”ê¸ˆë§Œ í• ì¸)
    - 100M: 3,300ì› í• ì¸
    - 500M/1G(ë‹¨ë…): 11,000ì› í• ì¸
    - 500M/1G(TVê²°í•©): 5,500ì› í• ì¸
      
    â–  ì£¼ìš” ì¡°ê±´
    - ì§€ì •ëœ KTë§ ì•Œëœ°í° í†µì‹ ì‚¬ ì‚¬ìš© ê³ ê°
    - ì¸í„°ë„· ì„¤ì¹˜ í›„, ì‚¬ìš© ì¤‘ì¸ ì•Œëœ°í° ê³ ê°ì„¼í„°ë¡œ ì§ì ‘ ê²°í•© ì‹ ì²­
      
    â–  ì£¼ì˜ì‚¬í•­
    - ê°œì¸/ë²•ì¸ ì‚¬ì—…ìëŠ” ê²°í•© ë¶ˆê°€í•©ë‹ˆë‹¤.
    - ì›¹(ì˜¨ë¼ì¸)ì„ í†µí•´ ê°œí†µí•œ ì•Œëœ°í°ë§Œ ê²°í•© ê°€ëŠ¥í•©ë‹ˆë‹¤. (ìš°ì²´êµ­, ëŒ€ë¦¬ì  ê°œí†µê±´ ë¶ˆê°€)
    - ê²°í•© ê°€ëŠ¥ ì•Œëœ°í° í†µì‹ ì‚¬: 1. ì— ëª¨ë°”ì¼ 2. ë¯¸ë‹ˆê²Œì´íŠ¸(ì‰ì´í¬ëª¨ë°”ì¼) 3. ìœ ë‹ˆì»´ì¦ˆ(ëª¨ë¹™) 4. í† ìŠ¤ëª¨ë°”ì¼ 5. êµ­ë¯¼ì€í–‰(ë¦¬ë¸Œëª¨ë°”ì¼) 6. ë”í”¼ì—”ì—˜ (í¼ìŠ¤íŠ¸ëª¨ë°”ì¼) 7. ì—ë¥´ì—˜ (ì˜¤íŒŒìŠ¤ë„·ëª¨ë°”ì¼)
        8. ê³ ê³ íŒ©í† ë¦¬ 9. ìŠ¤ë§ˆí…”  10. ì½”ë“œëª¨ë°”ì¼ 11. í”„ë¦¬í‹° 12. ë‹ˆì˜¤ë¼ì½”ë¦¬ì•„ 13. ìŠ¤í”¼ì¸ ëª¨ë°”ì¼ 14.ì•„ì´ì¦ˆë¹„ì „ 15. ìŠ¤ì¹´ì´ë¼ì´í”„(CUê´€ë ¨ê³¼ ë°€ë¦¬ì˜ì„œì¬ ìš”ê¸ˆì œëŠ” ê²°í•©ì´ ë¶ˆê°€)
        `;
                    break;
            }
             
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert('ì•ˆë‚´ ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }).catch(err => {
                console.error('Could not copy text: ', err);
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            });
        }
      
        function updateTotalAmountDetails() {
            totalAmountDetailsContainerEl.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-bold text-sky-800 text-base">ğŸ’¸ ì´ì•¡ ê²°í•©í• ì¸</h4>
                    <button onclick="copyDiscountDetailsToClipboard('totalAmountBundle')" class="btn-secondary text-xs py-1 px-2 rounded-md">ë‚´ìš© ë³µì‚¬</button>
                </div>
                <p class="text-sm text-sky-700 bg-sky-100 p-2 rounded-md mb-3">
                    "KT íœ´ëŒ€í° ì“°ëŠ” ê°€ì¡±ì´ ë§ì„ìˆ˜ë¡, ìš”ê¸ˆ ì´ì•¡ì´ ë†’ì„ìˆ˜ë¡ ìœ ë¦¬í•´ìš”!"
                </p>
                <div class="mb-3">
                    <h5 class="font-semibold text-slate-700 text-sm mb-1">ğŸ í•µì‹¬ í˜œíƒ</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-slate-600">
                        <li>ì¸í„°ë„·ê³¼ ëª¨ë°”ì¼ ìš”ê¸ˆì„ <strong>ì´ì¤‘ìœ¼ë¡œ í• ì¸!</strong></li>
                        <li><strong>100M ì¸í„°ë„· ê¸°ì¤€:</strong> ìµœëŒ€ <strong class="text-green-600">28,600ì›</strong> í• ì¸</li>
                        <li><strong>500M/1G ì¸í„°ë„· ê¸°ì¤€:</strong> ìµœëŒ€ <strong class="text-green-600">33,110ì›</strong> í• ì¸</li>
                    </ul>
                </div>
                <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                    <h5 class="font-bold text-amber-800 text-sm mb-1">âš ï¸ ê¼­ í™•ì¸í•˜ì„¸ìš”!</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-amber-700">
                        <li>ê¸°ì¡´ 'ë¬´ì„ ë¬´ì„ ' ê²°í•© ìƒí’ˆê³¼ëŠ” ì¤‘ë³µ ê°€ì…ì´ ì•ˆë¼ìš”.</li>
                        <li>ìµœëŒ€ ì¸í„°ë„· 1íšŒì„  + íœ´ëŒ€í° 5íšŒì„ ê¹Œì§€ ê²°í•© ê°€ëŠ¥í•´ìš”.</li>
                    </ul>
                </div>
            `;
        }
          
        function updateFixedRateDetails() {
            fixedRateDetailsContainerEl.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-bold text-teal-800 text-base">ğŸ’µ ì •ì•¡ ê²°í•©í• ì¸</h4>
                    <button onclick="copyDiscountDetailsToClipboard('fixedRateBundle')" class="btn-secondary text-xs py-1 px-2 rounded-md">ë‚´ìš© ë³µì‚¬</button>
                </div>
                <p class="text-sm text-teal-700 bg-teal-100 p-2 rounded-md mb-3">
                    "ê°„ë‹¨í•˜ê²Œ ì¸í„°ë„·ê³¼ íœ´ëŒ€í° ìš”ê¸ˆì„ ëª¨ë‘ í• ì¸ë°›ëŠ” ì‹¤ì†í˜• ê²°í•©!"
                </p>
                <div class="mb-3">
                    <h5 class="font-semibold text-slate-700 text-sm mb-1">ğŸ í•µì‹¬ í˜œíƒ</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-slate-600">
                        <li><strong>ì¸í„°ë„· ìš”ê¸ˆ:</strong> ê¸°ë³¸ <strong class="text-green-600">5,500ì›</strong> í• ì¸</li>
                        <li><strong>íœ´ëŒ€í° ìš”ê¸ˆ:</strong> ì›”ì •ì•¡ ì´ì•¡ ë”°ë¼ ìµœëŒ€ <strong class="text-green-600">7,000ì›</strong> ì¶”ê°€ í• ì¸</li>
                        <li class="font-bold text-blue-600"><strong>âœ¨íŠ¹ë³„ í˜œíƒ:</strong> 500M ì´ìƒ ì¸í„°ë„·ë§Œ ê°€ì… ì‹œ, TMí• ì¸(5,500ì›)ì´ ì¤‘ë³µ ì ìš©ë˜ì–´ ì¸í„°ë„·ì—ì„œë§Œ ì´ <strong>11,000ì› í• ì¸!</strong></li>
                    </ul>
                </div>
                <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                    <h5 class="font-bold text-amber-800 text-sm mb-1">âš ï¸ ê¼­ í™•ì¸í•˜ì„¸ìš”!</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-amber-700">
                        <li>ì¸í„°ë„·+TV ê²°í•© ì‹œì—ëŠ” ì¸í„°ë„· 5,500ì› í• ì¸ë§Œ ì ìš©ë¼ìš”.</li>
                        <li>íŒ¨ë°€ë¦¬ ìíšŒì„  í• ì¸ê³¼ ì¸í„°ë„· í• ì¸ì€ ì¤‘ë³µ ì ìš©ë˜ì§€ ì•Šì•„ìš”.</li>
                    </ul>
                </div>
            `;
        }
      
        function updatePremiumFamilyDetails() {
            premiumFamilyDetailsContainerEl.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-bold text-violet-800 text-base">ğŸ‘‘ í”„ë¦¬ë¯¸ì—„ ê°€ì¡±ê²°í•©</h4>
                    <button onclick="copyDiscountDetailsToClipboard('premiumFamilyBundle')" class="btn-secondary text-xs py-1 px-2 rounded-md">ë‚´ìš© ë³µì‚¬</button>
                </div>
                <p class="text-sm text-violet-700 bg-violet-100 p-2 rounded-md mb-3">
                    "ê³ ê°€ ìš”ê¸ˆì œ(7.7ë§Œ ì´ìƒ) ì“°ëŠ” ê°€ì¡±ì´ 2ëª… ì´ìƒì¼ ë•Œ ê°•ë ¥ ì¶”ì²œ!"
                </p>
                <div class="mb-3">
                    <h5 class="font-semibold text-slate-700 text-sm mb-1">ğŸ í•µì‹¬ í˜œíƒ</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-slate-600">
                        <li>2ë²ˆì§¸ íšŒì„ ë¶€í„° <strong>íœ´ëŒ€í° ìš”ê¸ˆ 25% í• ì¸!</strong></li>
                        <li>ì„ íƒì•½ì • 25% + ê²°í•© 25% = <strong class="text-green-600">ìµœëŒ€ 50% í• ì¸!</strong></li>
                        <li>1ë²ˆì§¸ íšŒì„ ì€ 'ì´ì•¡ê²°í•©'ìœ¼ë¡œ ì¶”ê°€ í• ì¸ì„ ë°›ì•„ìš”.</li>
                    </ul>
                </div>
                <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                    <h5 class="font-bold text-amber-800 text-sm mb-1">âš ï¸ ê¼­ í™•ì¸í•˜ì„¸ìš”!</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-amber-700">
                        <li><strong>500M ì´ìƒ ì¸í„°ë„·</strong>ë§Œ ê°€ì… ê°€ëŠ¥í•´ìš”. (100M ë¶ˆê°€)</li>
                        <li>ê°€ì¡± ì¤‘ <strong>2ëª… ì´ìƒì´ 7.7ë§Œ ì› ì´ìƒ</strong> ìš”ê¸ˆì œë¥¼ ì¨ì•¼ í•´ìš”.</li>
                    </ul>
                </div>
            `;
        }
          
        function updatePremiumSingleDetails() {
            premiumSingleDetailsContainerEl.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-bold text-rose-800 text-base">ğŸ’ í”„ë¦¬ë¯¸ì—„ ì‹±ê¸€ê²°í•©</h4>
                    <button onclick="copyDiscountDetailsToClipboard('premiumSingleBundle')" class="btn-secondary text-xs py-1 px-2 rounded-md">ë‚´ìš© ë³µì‚¬</button>
                </div>
                <p class="text-sm text-rose-700 bg-rose-100 p-2 rounded-md mb-3">
                    "í˜¼ìì„œ ê³ ê°€ ìš”ê¸ˆì œ(7.7ë§Œ ì´ìƒ)ì™€ ë¹ ë¥¸ ì¸í„°ë„·ì„ ì“¸ ë•Œ ìµœê³ ì˜ ì„ íƒ!"
                </p>
                <div class="mb-3">
                    <h5 class="font-semibold text-slate-700 text-sm mb-1">ğŸ í•µì‹¬ í˜œíƒ</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-slate-600">
                        <li><strong>íœ´ëŒ€í° ìš”ê¸ˆ 25% í• ì¸!</strong></li>
                        <li>ì„ íƒì•½ì • 25% + ê²°í•© 25% = <strong class="text-green-600">ìµœëŒ€ 50% í• ì¸!</strong></li>
                        <li>ì¸í„°ë„·ë§Œ ë‹¨ë…ìœ¼ë¡œ ì“°ë©´ <strong class="text-green-600">5,500ì›</strong> ì¶”ê°€ í• ì¸!</li>
                    </ul>
                </div>
                <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                    <h5 class="font-bold text-amber-800 text-sm mb-1">âš ï¸ ê¼­ í™•ì¸í•˜ì„¸ìš”!</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-amber-700">
                        <li><strong>500M ì´ìƒ ì¸í„°ë„·</strong>ë§Œ ê°€ì… ê°€ëŠ¥í•´ìš”. (100M ë¶ˆê°€)</li>
                        <li>ë³¸ì¸ íœ´ëŒ€í° 1íšŒì„ ì´ <strong>7.7ë§Œ ì› ì´ìƒ</strong> ìš”ê¸ˆì œì—¬ì•¼ í•´ìš”.</li>
                    </ul>
                </div>
            `;
        }
          
        function updateFamilyBundleDetails() {
            familyBundleDetailsContainerEl.innerHTML = `
                 <div class="flex justify-between items-center mb-3">
                    <h4 class="font-bold text-cyan-800 text-base">ğŸ  íŒ¨ë°€ë¦¬ ê²°í•©</h4>
                    <button onclick="copyDiscountDetailsToClipboard('familyBundle')" class="btn-secondary text-xs py-1 px-2 rounded-md">ë‚´ìš© ë³µì‚¬</button>
                </div>
                <p class="text-sm text-cyan-700 bg-cyan-100 p-2 rounded-md mb-3">
                    "ê¸°ì¡´ì— KT ì¸í„°ë„·ì„ ì“°ëŠ” ê°€ì¡±ì´ ìˆì„ ë•Œ, ì¶”ê°€ íšŒì„ ì„ ì €ë ´í•˜ê²Œ!"
                </p>
                <div class="mb-3">
                    <h5 class="font-semibold text-slate-700 text-sm mb-1">ğŸ í•µì‹¬ í˜œíƒ (ì¶”ê°€ íšŒì„  ê¸°ì¤€)</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-slate-600">
                        <li><strong>100M ì¸í„°ë„·:</strong> <strong class="text-green-600">5,500ì›</strong> í• ì¸</li>
                        <li><strong>500M/1G ì¸í„°ë„·:</strong> <strong class="text-green-600">11,000ì›</strong> í• ì¸</li>
                    </ul>
                </div>
                <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                    <h5 class="font-bold text-amber-800 text-sm mb-1">âš ï¸ ê¼­ í™•ì¸í•˜ì„¸ìš”!</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-amber-700">
                        <li>ê°€ì¡± ì¤‘ ê¸°ì¡´ KT ì¸í„°ë„· ì‚¬ìš©ì(ëª¨íšŒì„ )ê°€ ê¼­ ìˆì–´ì•¼ í•´ìš”.</li>
                        <li>ì„¤ì¹˜ í›„ <strong>1ê°œì›” ì•ˆì—</strong> ê²°í•© ì‹ ì²­ì„ í•´ì•¼ í•´ìš”.</li>
                        <li>ë²•ì¸ ëª…ì˜ëŠ” ê°€ì…í•  ìˆ˜ ì—†ì–´ìš”.</li>
                    </ul>
                </div>
            `;
        }
          
        function updateSeparateFamilyDetails() {
            separateFamilyDetailsContainerEl.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-bold text-emerald-800 text-base">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ë”°ë¡œ ì‚´ì•„ë„ ê°€ì¡±ê²°í•©</h4>
                        <button onclick="copyDiscountDetailsToClipboard('separateFamilyBundle')" class="btn-secondary text-xs py-1 px-2 rounded-md">ë‚´ìš© ë³µì‚¬</button>
                </div>
                <p class="text-sm text-emerald-700 bg-emerald-100 p-2 rounded-md mb-3">
                    "ë©€ë¦¬ ì‚´ì•„ë„ KT ì“°ëŠ” ê°€ì¡±ì´ ìˆë‹¤ë©´! ì´ì•¡ê²°í•©ì— í• ì¸ì„ ë” ë°›ëŠ” ì‹ ìƒ ê²°í•©!"
                </p>
                <div class="mb-3">
                    <h5 class="font-semibold text-slate-700 text-sm mb-1">ğŸ í•µì‹¬ í˜œíƒ</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-slate-600">
                        <li><strong>500M ì¸í„°ë„·/TV:</strong> ê°ê° <strong class="text-green-600">2,200ì›</strong> ì¶”ê°€ í• ì¸</li>
                        <li><strong>1G ì¸í„°ë„·/TV:</strong> ê°ê° <strong class="text-green-600">3,300ì›</strong> ì¶”ê°€ í• ì¸</li>
                        <li>ê¸°ì¡´ 'ì´ì•¡ ê²°í•©í• ì¸'ì— <strong class="text-green-600">ì¤‘ë³µìœ¼ë¡œ ì ìš©</strong>ë¼ìš”!</li>
                    </ul>
                </div>
                <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                    <h5 class="font-bold text-amber-800 text-sm mb-1">âš ï¸ ê¼­ í™•ì¸í•˜ì„¸ìš”!</h5>
                    <ul class="list-disc list-inside text-sm space-y-1 text-amber-700">
                        <li><strong>100M ì¸í„°ë„·ì€ í• ì¸ í˜œíƒì´ ì—†ì–´ìš”.</strong></li>
                        <li>ê¸°ì¡´ 'ë­‰ì¹˜ë©´ì˜¬ë ˆ' ê²°í•© ì‚¬ìš©ìëŠ” ë² ì´ìŠ¤ íšŒì„ ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ì—†ì–´ìš”.</li>
                        <li>'íŒ¨ë°€ë¦¬ ê²°í•©'ì˜ ìíšŒì„ ì€ ì¤‘ë³µ ì ìš©ì´ ì•ˆë¼ìš”.</li>
                        <li>ê°œí†µ í›„ ë‹¤ìŒ ë‹¬ ë§ê¹Œì§€ ê¼­ ê²°í•© ì‹ ì²­ì„ ì™„ë£Œí•´ì•¼ í•´ìš”.</li>
                    </ul>
                </div>
            `;
        }
          
        function updateMvnoDetails() {
            mvnoDetailsContainerEl.innerHTML = `
            <div class="flex justify-between items-center mb-3">
                <h4 class="font-bold text-gray-800 text-base">ğŸ“± KT ì•Œëœ°í° ê²°í•©</h4>
                <button onclick="copyDiscountDetailsToClipboard('mvnoBundle')" class="btn-secondary text-xs py-1 px-2 rounded-md">ë‚´ìš© ë³µì‚¬</button>
            </div>
            <p class="text-sm text-gray-700 bg-gray-100 p-2 rounded-md mb-3">
                "KTë§ ì•Œëœ°í° ìœ ì €ë¥¼ ìœ„í•œ ì¸í„°ë„· ìš”ê¸ˆ í• ì¸!"
            </p>
            <div class="mb-3">
                <h5 class="font-semibold text-slate-700 text-sm mb-1">ğŸ í•µì‹¬ í˜œíƒ (ì¸í„°ë„· ìš”ê¸ˆë§Œ í• ì¸)</h5>
                <ul class="list-disc list-inside text-sm space-y-1 text-slate-600">
                    <li><strong>100M:</strong> <strong class="text-green-600">3,300ì›</strong> í• ì¸</li>
                    <li><strong>500M/1G (ë‹¨ë…):</strong> <strong class="text-green-600">11,000ì›</strong> í• ì¸</li>
                    <li><strong>500M/1G (TVê²°í•©):</strong> <strong class="text-green-600">5,500ì›</strong> í• ì¸</li>
                </ul>
            </div>
            <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                <h5 class="font-bold text-amber-800 text-sm mb-1">âš ï¸ ê¼­ í™•ì¸í•˜ì„¸ìš”!</h5>
                <ul class="list-disc list-inside text-sm space-y-1 text-amber-700">
                    <li>ì‚¬ì—…ì ëª…ì˜ëŠ” ê°€ì…í•  ìˆ˜ ì—†ì–´ìš”.</li>
                    <li>ì¸í„°ë„· ì„¤ì¹˜ í›„, <strong class="text-amber-900">ì•Œëœ°í° ê³ ê°ì„¼í„°ë¡œ ì§ì ‘</strong> ê²°í•©ì„ ìš”ì²­í•´ì•¼ í•´ìš”.</li>
                    <li>ì˜¨ë¼ì¸ìœ¼ë¡œ ê°œí†µí•œ ì•Œëœ°í°ë§Œ ê°€ëŠ¥í•´ìš”! (ìš°ì²´êµ­/ëŒ€ë¦¬ì  ê°œí†µ ë¶ˆê°€)</li>
                    <li>ê²°í•© ê°€ëŠ¥í•œ ì•Œëœ°í° í†µì‹ ì‚¬ì¸ì§€ ê¼­ í™•ì¸í•´ì•¼ í•´ìš”.</li>
                    <li class="mt-1 text-xs break-keep">
                        <strong>ê²°í•© ê°€ëŠ¥ í†µì‹ ì‚¬:</strong> 1. ì— ëª¨ë°”ì¼ 2. ë¯¸ë‹ˆê²Œì´íŠ¸(ì‰ì´í¬ëª¨ë°”ì¼) 3. ìœ ë‹ˆì»´ì¦ˆ(ëª¨ë¹™) 4. í† ìŠ¤ëª¨ë°”ì¼ 5. êµ­ë¯¼ì€í–‰(ë¦¬ë¸Œëª¨ë°”ì¼) 6. ë”í”¼ì—”ì—˜ (í¼ìŠ¤íŠ¸ëª¨ë°”ì¼) 7. ì—ë¥´ì—˜ (ì˜¤íŒŒìŠ¤ë„·ëª¨ë°”ì¼) 8. ê³ ê³ íŒ©í† ë¦¬ 9. ìŠ¤ë§ˆí…” 10. ì½”ë“œëª¨ë°”ì¼ 11. í”„ë¦¬í‹° 12. ë‹ˆì˜¤ë¼ì½”ë¦¬ì•„ 13. ìŠ¤í”¼ì¸ ëª¨ë°”ì¼ 14.ì•„ì´ì¦ˆë¹„ì „ 15. ìŠ¤ì¹´ì´ë¼ì´í”„( CUê´€ë ¨ê³¼ ë°€ë¦¬ì˜ì„œì¬ ìš”ê¸ˆì œëŠ” ê²°í•©ì´ ë¶ˆê°€)
                    </li>
                    </ul>
            </div>
        `;
    }
          
        function updateCommissionSectionVisibility() {
            const selectedOption = internetPlanEl.options[internetPlanEl.selectedIndex];
            const isOtt = selectedOption && selectedOption.dataset.isOttPlan === 'true';

            commissionSectionEl.classList.toggle('hidden', !isOtt);

            if (isOtt) {
                populateCommissionTiers();
            }
        }

        function populateCommissionTiers() {
            const isBundle = document.querySelector('input[name="internetType"]:checked').value === 'bundle';
            const tvPlanOption = tvPlanEl.options[tvPlanEl.selectedIndex];
            const tvCategory = tvPlanOption ? tvPlanOption.dataset.category : null;

            commissionTierEl.innerHTML = ''; // Clear existing options
            commissionNotesEl.innerHTML = ''; // Clear notes

            let rules;
            let originalRulesSource;

            if (isBundle) {
                if (!tvCategory || tvCategory === 'ì—†ìŒ') {
                    commissionTierEl.innerHTML = '<option value="-1">TV ìš”ê¸ˆì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</option>';
                    return;
                }

                const isPremiumTier = ['ì—ì„¼ìŠ¤', 'ì—ì„¼ìŠ¤ í”ŒëŸ¬ìŠ¤', 'ë„·í”Œë¦­ìŠ¤ HD', 'ë„·í”Œë¦­ìŠ¤ UHD', 'í‚¤ì¦ˆëœë“œ'].includes(tvCategory);
                const planTierFilter = isPremiumTier ? 'premium' : 'basic';

                originalRulesSource = ottCommissionRules_KT.internet_tv.commission_rules;
                rules = originalRulesSource.filter(rule => rule.plan_tier === planTierFilter);

            } else { // Standalone
                originalRulesSource = ottCommissionRules_KT.internet_only.commission_rules;
                rules = originalRulesSource;
            }

            if (!rules || rules.length === 0) {
                commissionTierEl.innerHTML = '<option value="-1">í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” ìˆ˜ìˆ˜ë£Œ ì •ì±…ì´ ì—†ìŠµë‹ˆë‹¤</option>';
                return;
            }

            rules.forEach(rule => {
                const option = document.createElement('option');
                const originalIndex = originalRulesSource.indexOf(rule);
                option.value = originalIndex;

                let text;
                if (isBundle) {
                    text = `ìˆ˜ìˆ˜ë£Œ ${rule.commission.toLocaleString()}ì› (ì§€ì›ê¸ˆ: ${rule.support_money_min.toLocaleString()}~${rule.support_money_max.toLocaleString()}ì›)`;
                } else {
                    text = `ìˆ˜ìˆ˜ë£Œ ${rule.commission.toLocaleString()}ì› (ì§€ì›ê¸ˆ: ${rule.support_money.toLocaleString()}ì›)`;
                }
                option.textContent = text;
                option.dataset.notes = JSON.stringify(rule.notes || []);
                commissionTierEl.appendChild(option);
            });

            commissionTierEl.dispatchEvent(new Event('change'));
        }

        function calculateInstallationFee(internetSelected, tvSelected, phonePlanName, additionalTvSelected, installTime) {
            const timeKey = installTime === 'weekday' ? 'weekday' : 'weekend_night';
            const feeTable = ktInstallationFees_new[timeKey];

            if (!feeTable) {
                return { fee: 0, desc: "ì„¤ì¹˜ ì‹œê°„ëŒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”." };
            }

            // Handle cases without internet upfront for cleaner logic
            if (!internetSelected) {
                if (tvSelected) return { fee: 0, desc: "TV ë‹¨ë… (ë¹„ìš© ë³„ë„ ë¬¸ì˜)" };
                if (phonePlanName !== 'none') return { fee: 0, desc: "ì „í™” ë‹¨ë… (ë¹„ìš© ë³„ë„ ë¬¸ì˜)" };
                return { fee: 0, desc: "ì‚°ì • ë¶ˆê°€" };
            }

            const phoneSelected = phonePlanName !== 'none';
            const isVoip = phoneSelected && phonePlanName.includes("ì¸í„°ë„·ì „í™”");
            const isLandline = phoneSelected && !isVoip;
      
            let combinationKey;
            if (tvSelected) {
                if (additionalTvSelected) {
                    combinationKey = "internet_tv_additional_tv";
                } else if (isLandline) {
                    combinationKey = "internet_tv_landline";
                } else if (isVoip) {
                    combinationKey = "internet_tv_voip";
                } else {
                    combinationKey = "internet_tv";
                }
            } else { // No TV
                if (isLandline) {
                    combinationKey = "internet_landline";
                } else if (isVoip) {
                    combinationKey = "internet_voip";
                } else {
                    combinationKey = "internet_only";
                }
            }
      
            const feeInfo = feeTable[combinationKey];
            if (feeInfo) {
                return { fee: feeInfo.cost, desc: feeInfo.description };
            }

            // Fallback for any other unhandled combination
            return { fee: 0, desc: "ì„¤ì¹˜ë¹„ ì‚°ì • ë¶ˆê°€ (ì¡°í•© í™•ì¸ í•„ìš”)" };
        }
          
          
        function calculateAndDisplayResults() {
            try {
                const results = getCalculationResults();
                displayResults(results);
                generateAllScripts(results);
            } catch (error) {
                console.error("ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
            }
        }
          
        function getCalculationResults(options = {}) {
            const { forcedInternetPlanName = null, forcedDiscountType = null } = options;
      
            // --- 1. Gather Inputs ---
            const internetPlanName = forcedInternetPlanName || internetPlanEl.value;
            const selectedWifiOptionEl = wifiRouterRentalEl.options[wifiRouterRentalEl.selectedIndex];
            const selectedWifiName = selectedWifiOptionEl ? selectedWifiOptionEl.dataset.name : "KTê³µìœ ê¸° X";
            const tvPlanName = tvPlanEl.value;
            const additionalTvPlanKey = additionalTvPlanEl.value;
            const phonePlanName = phonePlanEl.value;
            const discountType = forcedDiscountType || document.querySelector('input[name="discountType"]:checked').value;
            const installationTime = document.querySelector('input[name="installationTime"]:checked').value;
            const selectedAddonCheckboxes = document.querySelectorAll('#addonServicesContainer input[type="checkbox"]:checked');
            const isDongpanChecked = dongpanSalesCheckKtEl ? dongpanSalesCheckKtEl.checked : false;
            const installationFeeSelfPay = document.getElementById('installationFeeSelfPay').checked;
      
            const selectedCardId = affiliateCardEl.value;
            const selectedCardTierEl = document.querySelector('input[name="cardTier"]:checked');
            const selectedCommissionIndex = commissionTierEl.value; // The value is the rule's index
            // (Request 4: Card discount applies to the final VAT-included bill, so we keep it as is)
            const cardDiscountAmount = selectedCardTierEl ? parseInt(selectedCardTierEl.value) : 0;
            const selectedCardData = affiliateCardDiscounts[selectedCardId];
      
            let totalMobileBaseCost = 0;
            let mobileLinesData = [];
            document.querySelectorAll('.mobile-line-item').forEach((item, i) => {
                const select = item.querySelector(`#mobilePlan${i}`);
                const checkbox = item.querySelector(`#selectiveContract${i}`);
                const option = select.options[select.selectedIndex];
                const cost = parseInt(option.value) || 0;
                mobileLinesData.push({
                    cost: cost,
                    name: option.dataset.name,
                    url: option.dataset.url,
                    applySelectiveContract: checkbox.checked
                });
                totalMobileBaseCost += cost;
            });
            const numMobileLines = mobileLinesData.length;
      
            // --- 2. Calculate Base Costs (Pre-VAT) ---
            // (Request 4: All costs here are now Pre-VAT)
            let tvBase = (tvPlanName !== 'none' && tvPlans_KT[tvPlanName]) ? tvPlans_KT[tvPlanName].basePrice : 0;
            let additionalTvCost = (additionalTvPlanKey !== 'none' && additionalTvPlans_KT[additionalTvPlanKey]) ? additionalTvPlans_KT[additionalTvPlanKey].basePrice : 0;
            let phoneBase = (phonePlanName !== 'none' && phonePlans_KT[phonePlanName]) ? phonePlans_KT[phonePlanName].basePrice : 0;
            let currentInternet = getSelectedInternetInfo(internetPlanName);
            let internetBase = internetPlanName !== 'none' ? (parseFloat(currentInternet.basePrice) || 0) : 0;
             
            const selectedWifiData = wifiOptions_KT[selectedWifiName];
            let actualWifiRouterFee = selectedWifiData ? selectedWifiData.fee : 0;
            if (currentInternet.speed >= 1000 && selectedWifiName === "KTê³µìœ ê¸°") {
                actualWifiRouterFee = 0;
            }
             
            let addonServicesTotalCost = 0;
            selectedAddonCheckboxes.forEach(checkbox => {
                addonServicesTotalCost += (parseFloat(checkbox.dataset.price) || 0);
            });
      
            // --- 3. Calculate Discounts (Pre-VAT for Internet/TV, VAT included for Mobile) ---
            let internetDiscount = 0; // Pre-VAT
            let currentTvDiscount = 0; // Pre-VAT
            let totalMobileDiscount = 0; // VAT Included (applies to mobile bill)
            let mobileDiscountDescription = 'ê²°í•©ì— ë”°ë¥¸ ëª¨ë°”ì¼ í• ì¸ ì—†ìŒ.';
            let mobileLinesDetailsForScript = [];
      
            const isTvOrPhoneBundled = tvPlanName !== 'none' || phonePlanName !== 'none';
             
            if (discountType !== 'none' && internetPlanName !== 'none') {
                const internetSpeedType = currentInternet.type;
                const bundleTypeForDiscountRule = isTvOrPhoneBundled ? "TV" : "ë‹¨ë…";
      
                // Calculate Internet/TV discounts based on Pre-VAT rules
                if (discountType === 'totalAmountBundle') {
                    let costForDiscountCalc = totalMobileBaseCost;
                    if (totalMobileBaseCost === 0 && numMobileLines > 0) {
                        costForDiscountCalc = 37000;
                    }
                    let mobileTierKey = getMobileTierKey(costForDiscountCalc, numMobileLines, internetSpeedType);
                      
                    if (mobileTierKey && newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸?.[internetSpeedType]?.[bundleTypeForDiscountRule]?.[mobileTierKey]) {
                        internetDiscount = newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸[internetSpeedType][bundleTypeForDiscountRule][mobileTierKey];
                    } else if (internetSpeedType === "1G" && bundleTypeForDiscountRule === "TV" && newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸?.["1G"]?.TV?.["ëª¨ë°”ì¼_ê²°í•©ì‹œ"] && numMobileLines > 0) {
                        internetDiscount = newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸["1G"]["TV"]["ëª¨ë°”ì¼_ê²°í•©ì‹œ"];
                    }
                } else if (discountType === 'fixedRateBundle') {
                    const isStandalone = !isTvOrPhoneBundled;
                    const internetSpeed = currentInternet.speed;
                    // (Request 4: 5500 -> 5000)
                    internetDiscount = 5000; // Base discount
                    if (isStandalone && internetSpeed >= 500) {
                        internetDiscount += 5000; // Add TM ê²°í•© í• ì¸ for standalone 500M+
                    }
                } else if (discountType === 'premiumFamilyBundle') {
                    const firstLineCost = numMobileLines > 0 ? mobileLinesData[0].cost : 0;
                    if (numMobileLines > 0 && firstLineCost >= 77000 && currentInternet.speed >= 500) {
                        const fullKey = (currentInternet.speed >= 1000 ? "1G" : "500M") + (isTvOrPhoneBundled ? "_TV" : "_ë‹¨ë…");
                        internetDiscount = newKtDiscountRules.í”„ë¦¬ë¯¸ì—„ê°€ì¡±ê²°í•©?.[fullKey] || 0;
                    }
                } else if (discountType === 'premiumSingleBundle') {
                    const singleLineCost = numMobileLines === 1 ? mobileLinesData[0].cost : 0;
                    if (singleLineCost >= 77000 && currentInternet.speed >= 500 && !isTvOrPhoneBundled) {
                        const speedKey = (currentInternet.speed === 500 ? "500M" : "1G") + "_ë‹¨ë…";
                        internetDiscount = newKtDiscountRules.í”„ë¦¬ë¯¸ì—„ì‹±ê¸€ê²°í•©?.[speedKey] || 0;
                    }
                } else if (discountType === 'mvnoBundle' || discountType === 'familyBundle') {
                    const fullKey = internetSpeedType + "_" + bundleTypeForDiscountRule;
                    const rule = discountType === 'mvnoBundle' ? newKtDiscountRules.ì•Œëœ°í°ê²°í•© : newKtDiscountRules.íŒ¨ë°€ë¦¬ê²°í•©;
                    internetDiscount = rule?.[fullKey] || 0;
                } else if (discountType === 'separateFamilyBundle') {
                    if (currentInternet.speed >= 500 && totalMobileBaseCost >= 37000) {
                        let mobileTierKey = getMobileTierKey(totalMobileBaseCost, numMobileLines, internetSpeedType);
                        if (mobileTierKey) {
                            if (newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸?.[internetSpeedType]?.[bundleTypeForDiscountRule]?.[mobileTierKey]) {
                                internetDiscount = newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸[internetSpeedType][bundleTypeForDiscountRule][mobileTierKey];
                            } else if (internetSpeedType === "1G" && bundleTypeForDiscountRule === "TV" && newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸?.["1G"]?.TV?.["ëª¨ë°”ì¼_ê²°í•©ì‹œ"] && numMobileLines > 0) {
                                internetDiscount = newKtDiscountRules.ì´ì•¡ê²°í•©í• ì¸["1G"]["TV"]["ëª¨ë°”ì¼_ê²°í•©ì‹œ"];
                            }
                        }
                        // (Request 4: 2200->2000, 3300->3000)
                        if (currentInternet.speed === 500) {
                            internetDiscount += 2000;
                            if (isTvOrPhoneBundled) {
                                currentTvDiscount = 2000;
                            }
                        } else if (currentInternet.speed >= 1000) {
                            internetDiscount += 3000;
                            if (isTvOrPhoneBundled) {
                                currentTvDiscount = 3000;
                            }
                        }
                    }
                }
            }
            internetDiscount = Math.min(internetDiscount, internetBase);
      
            // --- START: Mobile Discount Calculation (VAT Included) ---
            let totalAmountBundleMobileDiscount = 0;
            if (discountType === 'totalAmountBundle' && numMobileLines > 0) {
                const internetSpeedKeyForJson = (currentInternet.speed >= 500) ? "500M_1G" : "100M";
                let mobileTierKeyForJson = null;
                if (totalMobileBaseCost < 22000) { mobileTierKeyForJson = "tier1_under_22000"; }
                else if (totalMobileBaseCost < 64900) { mobileTierKeyForJson = "tier2_22000_to_64899"; }
                else if (totalMobileBaseCost < 108900) { mobileTierKeyForJson = "tier3_64900_to_108899"; }
                else if (totalMobileBaseCost < 141900) { mobileTierKeyForJson = "tier4_108900_to_141899"; }
                else if (totalMobileBaseCost < 174900) { mobileTierKeyForJson = "tier5_141900_to_174899"; }
                else { mobileTierKeyForJson = "tier6_over_174900"; }
                const discountInfo = kt_total_mobile_fee_discounts[internetSpeedKeyForJson]?.[mobileTierKeyForJson];
                if (discountInfo) {
                    totalAmountBundleMobileDiscount = discountInfo.mobile_discount || 0;
                }
            }
      
            const totalAmountDiscountsByLine = new Array(numMobileLines).fill(0);
            if (discountType === 'totalAmountBundle' && totalAmountBundleMobileDiscount > 0 && totalMobileBaseCost > 0) {
                let distributedDiscountSum = 0;
                for (let i = 0; i < numMobileLines - 1; i++) {
                    const line = mobileLinesData[i];
                    const proportionalDiscount = Math.round(totalAmountBundleMobileDiscount * (line.cost / totalMobileBaseCost));
                    totalAmountDiscountsByLine[i] = proportionalDiscount;
                    distributedDiscountSum += proportionalDiscount;
                }
                if (numMobileLines > 0) {
                    totalAmountDiscountsByLine[numMobileLines - 1] = totalAmountBundleMobileDiscount - distributedDiscountSum;
                }
            }
             
            let fixedRateMobileTotalDiscount = 0;
            if (discountType === 'fixedRateBundle') {
                if (totalMobileBaseCost >= 77000) fixedRateMobileTotalDiscount = 7000;
                else if (totalMobileBaseCost >= 61000) fixedRateMobileTotalDiscount = 5000;
                else if (totalMobileBaseCost >= 37000) fixedRateMobileTotalDiscount = 3000;
            }
      
            const fixedRateDiscountsByLine = new Array(numMobileLines).fill(0);
            if (fixedRateMobileTotalDiscount > 0 && totalMobileBaseCost > 0) {
                let distributedDiscountSum = 0;
                for (let i = 0; i < numMobileLines - 1; i++) {
                    const line = mobileLinesData[i];
                    const proportionalDiscount = Math.round(fixedRateMobileTotalDiscount * (line.cost / totalMobileBaseCost));
                    fixedRateDiscountsByLine[i] = proportionalDiscount;
                    distributedDiscountSum += proportionalDiscount;
                }
                if (numMobileLines > 0) {
                    fixedRateDiscountsByLine[numMobileLines - 1] = fixedRateMobileTotalDiscount - distributedDiscountSum;
                }
            }
      
            let premiumFamilyProportionalDiscounts = new Map();
            if (discountType === 'premiumFamilyBundle' && numMobileLines > 0) {
                const linesUnder77k = mobileLinesData
                    .map((line, index) => ({ ...line, originalIndex: index }))
                    .filter((line, index) => index > 0 && line.cost > 0 && line.cost < 77000);
      
                if (linesUnder77k.length > 0 && mobileLinesData[0].cost > 0) {
                    const participatingLines = [{ ...mobileLinesData[0], originalIndex: 0 }, ...linesUnder77k];
                    const totalCostForSpecialCalc = participatingLines.reduce((sum, line) => sum + line.cost, 0);
                      
                    const internetSpeedKeyForJson = (currentInternet.speed >= 500) ? "500M_1G" : "100M";
                    let mobileTierKeyForJson = null;
                    if (totalCostForSpecialCalc < 22000) { mobileTierKeyForJson = "tier1_under_22000"; } 
                    else if (totalCostForSpecialCalc < 64900) { mobileTierKeyForJson = "tier2_22000_to_64899"; } 
                    else if (totalCostForSpecialCalc < 108900) { mobileTierKeyForJson = "tier3_64900_to_108899"; } 
                    else if (totalCostForSpecialCalc < 141900) { mobileTierKeyForJson = "tier4_108900_to_141899"; } 
                    else if (totalCostForSpecialCalc < 174900) { mobileTierKeyForJson = "tier5_141900_to_174899"; } 
                    else { mobileTierKeyForJson = "tier6_over_174900"; }
      
                    const discountInfo = kt_total_mobile_fee_discounts[internetSpeedKeyForJson]?.[mobileTierKeyForJson];
                    const totalMobileDiscountForGroup = discountInfo?.mobile_discount || 0;
      
                    if (totalMobileDiscountForGroup > 0) {
                        let distributedSum = 0;
                        participatingLines.filter(p => p.originalIndex !== 0).forEach(pLine => {
                            const discount = Math.round(totalMobileDiscountForGroup * (pLine.cost / totalCostForSpecialCalc));
                            premiumFamilyProportionalDiscounts.set(pLine.originalIndex, discount);
                            distributedSum += discount;
                        });
                        premiumFamilyProportionalDiscounts.set(0, totalMobileDiscountForGroup - distributedSum);
                    }
                }
            }
      
            mobileLinesDetailsForScript = mobileLinesData.map((line, i) => {
                if (line.cost === 0) {
                    return { ...line, selectiveDiscount: 0, bundleDiscount: 0, totalAmountLineDiscount: 0, fixedRateLineDiscount: 0, finalBill: 0 };
                }
                let selectiveDiscount = line.applySelectiveContract ? Math.floor(line.cost * 0.25) : 0;
                let bundleDiscount = 0;
                let totalAmountLineDiscount = 0;
                let fixedRateLineDiscount = 0;
      
                if (discountType === 'totalAmountBundle') {
                    totalAmountLineDiscount = totalAmountDiscountsByLine[i];
                } else if (discountType === 'fixedRateBundle') {
                    fixedRateLineDiscount = fixedRateDiscountsByLine[i] || 0;
                } else if (discountType === 'premiumFamilyBundle') {
                    if (premiumFamilyProportionalDiscounts.has(i)) {
                        bundleDiscount = premiumFamilyProportionalDiscounts.get(i);
                    } else {
                        if (i === 0 && line.cost >= 77000) {
                            bundleDiscount = 5500;
                        } else if (i >= 1 && line.cost >= 77000) {
                            bundleDiscount = Math.floor(line.cost * 0.25);
                        }
                    }
                } else if (discountType === 'premiumSingleBundle') {
                    if (i === 0 && line.cost >= 77000) {
                        bundleDiscount = Math.floor(line.cost * 0.25);
                    }
                }
      
                const totalLineDiscount = selectiveDiscount + bundleDiscount + totalAmountLineDiscount + fixedRateLineDiscount;
                const finalBill = line.cost - totalLineDiscount;
                totalMobileDiscount += totalLineDiscount;
                return { ...line, selectiveDiscount, bundleDiscount, totalAmountLineDiscount, fixedRateLineDiscount, finalBill };
            });
             
      
            // --- 4. Calculate Final Costs (Pre-VAT and VAT Included) and Gifts ---
            // (Request 4: Calculate Pre-VAT costs first)
            const totalPreDiscountCost_PreVat = internetBase + actualWifiRouterFee + tvBase + additionalTvCost + phoneBase + addonServicesTotalCost;
            const finalMonthlyCost_PreVat = (internetBase - internetDiscount) + actualWifiRouterFee + (tvBase - currentTvDiscount) + additionalTvCost + phoneBase + addonServicesTotalCost;
             
            // Calculate VAT
            const vatAmount = Math.round(finalMonthlyCost_PreVat * 0.1);
             
            // Calculate VAT Included costs
            const totalPreDiscountCost = Math.round(totalPreDiscountCost_PreVat * 1.1);
            const finalMonthlyCost = finalMonthlyCost_PreVat + vatAmount;
             
            // Apply card discount to the final VAT-included cost
            const finalCostWithCard = finalMonthlyCost - cardDiscountAmount;
      
            let giftCash = 0, giftVoucher = 0, giftPhoneVoucherAmount = 0, giftAdditionalTvAmount = 0, giftDongpanAdditionalCashAmount = 0;
            const reviewEventGift = 0;
            const referralEventGift = 0;
      
            if (internetPlanName !== 'none') {
                const internetSpeed = currentInternet.speed;
                const isTvSelectedForGift = tvPlanName !== 'none';
                const tvOptionForGift = Array.from(tvPlanEl.options).find(opt => opt.value === tvPlanName);
                const tvCategoryForGift = isTvSelectedForGift && tvOptionForGift ? (tvOptionForGift.dataset.category || "ë² ì´ì§") : "ë² ì´ì§";

                if (currentInternet.isOttPlan && selectedCommissionIndex !== null && selectedCommissionIndex >= 0) {
                    const rulesSource = isTvSelectedForGift
                        ? ottCommissionRules_KT.internet_tv.commission_rules
                        : ottCommissionRules_KT.internet_only.commission_rules;

                    const applicableRule = rulesSource[selectedCommissionIndex];

                    if (applicableRule) {
                        if (isTvSelectedForGift) {
                            giftCash = applicableRule.support_money_max || 0;
                            giftVoucher = 0;
                        } else { // Standalone OTT
                            const totalGift = applicableRule.support_money || applicableRule.support_money_max || 0;
                            const voucherMatch = applicableRule.payout_method.match(/ìƒí’ˆê¶Œ\s*([\d,]+)ì›/);
                            giftVoucher = voucherMatch ? parseInt(voucherMatch[1].replace(/,/g, ''), 10) : 0;
                            giftCash = totalGift - giftVoucher;
                        }
                    }
                } else {
                    let giftKeyPrefix = "";
                    if (!isTvSelectedForGift) {
                        if (internetSpeed === 100) giftKeyPrefix = "100ë‹¨ë…";
                        else if (internetSpeed === 500) giftKeyPrefix = "500ë‹¨ë…";
                        else if (internetSpeed >= 1000) giftKeyPrefix = "1Gë‹¨ë…";
                    } else {
                        if (internetSpeed === 100) giftKeyPrefix = "100ë²ˆë“¤";
                        else if (internetSpeed === 500) giftKeyPrefix = "500ë²ˆë“¤";
                        else if (internetSpeed >= 1000) giftKeyPrefix = "ê¸°ê°€ë²ˆë“¤";
                    }
                    if (giftTable[tvCategoryForGift] && giftTable[tvCategoryForGift][giftKeyPrefix]) {
                        giftCash = giftTable[tvCategoryForGift][giftKeyPrefix].cash;
                        giftVoucher = giftTable[tvCategoryForGift][giftKeyPrefix].voucher;
                    }
                }

                if (isDongpanChecked && numMobileLines > 0) {
                    const isFamilyBundle = discountType === 'familyBundle';
                    const ownerType = isFamilyBundle ? "íŒ¨ë°€ë¦¬" : "ì¼ë°˜";
                    let productKey = "";
                    if (!isTvSelectedForGift) {
                        if (internetSpeed === 100) productKey = "100Mb ë‹¨ë…";
                        else if (internetSpeed === 500) productKey = "500Mb ë‹¨ë…";
                        else if (internetSpeed >= 1000) productKey = "1Gb ë‹¨ë…";
                    } else {
                        if (internetSpeed === 100) productKey = "100Mb+TV";
                        else if (internetSpeed === 500) productKey = "500Mb+TV";
                        else if (internetSpeed >= 1000) productKey = "1Gb+TV";
                    }
      
                    const maxDongpanLines = isTvSelectedForGift ? 3 : 1;
                    for (let i = 0; i < Math.min(numMobileLines, maxDongpanLines); i++) {
                        const mobileLineFee = mobileLinesData[i].cost;
                        let mobileFeeTierKey = null;
                        if (mobileLineFee >= 37000 && mobileLineFee < 61000) mobileFeeTierKey = "37K ìš”ê¸ˆì œ";
                        else if (mobileLineFee >= 61000 && mobileLineFee < 90000) mobileFeeTierKey = "61K ìš”ê¸ˆì œ";
                        else if (mobileLineFee >= 90000) mobileFeeTierKey = "90K ìš”ê¸ˆì œ";
                         
                        if (mobileFeeTierKey && productKey) {
                            const lookupKey = `${productKey} ${ownerType}`;
                            const rule = dongpanGiftRules_New[mobileFeeTierKey]?.[lookupKey];
                            if (rule) {
                                if (i === 0) { // First line
                                    const mainGift = parseInt(rule["ì¸í„°ë„· ëª…ì˜ì ì‚¬ì€í’ˆ"]?.["ìœ ì‹¬"] || 0);
                                    giftDongpanAdditionalCashAmount += mainGift;
                                } else { // Second and third lines
                                    const familyGiftRaw = rule["ê°€ì¡± ì‚¬ì€í’ˆ"];
                                    const familyGift = (typeof familyGiftRaw === 'number') ? familyGiftRaw : 0;
                                    giftDongpanAdditionalCashAmount += familyGift;
                                }
                            }
                        }
                    }
                }
            }
            if (phonePlanName !== 'none') giftPhoneVoucherAmount = 20000;
            if (additionalTvPlanKey !== 'none') giftAdditionalTvAmount = 30000;
             
            const confirmedGiftAmount = giftCash + giftVoucher + giftPhoneVoucherAmount + giftAdditionalTvAmount + giftDongpanAdditionalCashAmount;
            const maxGiftAmount = confirmedGiftAmount;
      
            // --- 5. Installation Fee (VAT Included) ---
            const installInfo = calculateInstallationFee(internetPlanName !== 'none', tvPlanName !== 'none', phonePlanName, additionalTvPlanKey !== 'none', installationTime);
      
            // --- 6. Return all results ---
            return {
                // Inputs
                internetPlanName, tvPlanName, additionalTvPlanKey, phonePlanName,
                selectedWifiName, selectedWifiData, discountType, numMobileLines, isDongpanChecked, installationTime,
                isPostApplied: ['totalAmountBundle', 'mvnoBundle', 'premiumFamilyBundle', 'premiumSingleBundle', 'fixedRateBundle'].includes(discountType),
                // Costs (VAT Included)
                totalPreDiscountCost, finalMonthlyCost, finalCostWithCard,
                // Costs (Pre-VAT)
                finalMonthlyCost_PreVat, vatAmount,
                internetBase, tvBase, additionalTvCost, phoneBase, addonServicesTotalCost, actualWifiRouterFee,
                // Discounts (Internet/TV Pre-VAT, Mobile VAT Included)
                internetDiscount, currentTvDiscount, totalMobileDiscount, cardDiscountAmount, selectedCardData,
                // Mobile Details
                mobileLinesDetails: mobileLinesDetailsForScript,
                mobileDiscountDescription,
                // Gifts
                giftCash, giftVoucher, giftPhoneVoucherAmount, giftAdditionalTvAmount, giftDongpanAdditionalCashAmount,
                confirmedGiftAmount, maxGiftAmount,
                // Installation
                installFee: installInfo.fee,
                installFeeDesc: installInfo.desc,
                // Other info
                currentInternet,
                installationFeeSelfPay,
                isVatIncluded, // Pass the toggle state
            };
        }
          
        function displayResults(results) {
            const {
                // VAT Included
                finalMonthlyCost, finalCostWithCard, totalPreDiscountCost, totalMobileDiscount,
                cardDiscountAmount, selectedCardData,
                maxGiftAmount, confirmedGiftAmount,
                installFee, installFeeDesc, installationTime, mobileLinesDetails,
                // Pre-VAT
                finalMonthlyCost_PreVat, vatAmount,
                internetDiscount, currentTvDiscount,
                internetBase, tvBase, additionalTvCost, phoneBase, addonServicesTotalCost, actualWifiRouterFee,
                // Inputs
                internetPlanName, tvPlanName, additionalTvPlanKey, phonePlanName, selectedWifiName, selectedWifiData,
                numMobileLines, discountType, currentInternet
            } = results;
      
            // Summary Card (Dynamically updates with VAT)
            const summaryTitleEl = resultSection.querySelector('h3');
            summaryTitleEl.textContent = `âœ… ìµœì¢… ìš”ê¸ˆ ë° í˜œíƒ ìš”ì•½ ${isVatIncluded ? '(VAT í¬í•¨)' : '(VAT ë³„ë„)'}`;

            const costToShowInSummary = isVatIncluded ? (cardDiscountAmount > 0 ? finalCostWithCard : finalMonthlyCost) : (cardDiscountAmount > 0 ? finalCostWithCard - vatAmount : finalMonthlyCost_PreVat);
            summaryFinalCostEl.textContent = `${costToShowInSummary.toLocaleString()} ì›`;

            if (cardDiscountAmount > 0) {
                summaryCardAppliedEl.textContent = `(${selectedCardData.name} ì ìš©ê°€)`;
            } else {
                summaryCardAppliedEl.textContent = '';
            }
      
            const totalPreDiscountCostToShow = isVatIncluded ? totalPreDiscountCost : totalPreDiscountCost - Math.round((totalPreDiscountCost / 1.1) * 0.1);
            if (totalPreDiscountCostToShow > costToShowInSummary) {
                summaryPreDiscountCostEl.textContent = `í• ì¸ ì „ ${totalPreDiscountCostToShow.toLocaleString()} ì›`;
                summaryPreDiscountCostEl.style.display = 'block';
            } else {
                summaryPreDiscountCostEl.style.display = 'none';
            }

            const totalInternetDiscountToShow = isVatIncluded ? Math.round((internetDiscount + currentTvDiscount) * 1.1) : (internetDiscount + currentTvDiscount);
            summaryInternetDiscountEl.textContent = `- ${totalInternetDiscountToShow.toLocaleString()} ì›`;
            summaryMobileDiscountEl.textContent = `- ${totalMobileDiscount.toLocaleString()} ì›`; // Mobile discount is always VAT-inclusive
            summaryGiftTotalEl.textContent = `${maxGiftAmount.toLocaleString()} ì›`;
            document.getElementById('summaryGiftBreakdown').textContent = `(í™•ì • ì‚¬ì€í’ˆ ${confirmedGiftAmount.toLocaleString()}ì›)`;
      
            // Expanded Details (Dynamically updates with VAT)
            const expandedDetailsTitleEl = expandedDetailsContainer.querySelector('h3');
            expandedDetailsTitleEl.textContent = `ğŸ“‹ ìƒì„¸ ìš”ê¸ˆ ë‚´ì—­ ${isVatIncluded ? '(VAT í¬í•¨)' : '(VAT ë³„ë„)'}`;

            const internetOption = Array.from(internetPlanEl.options).find(opt => opt.value === internetPlanName);
            selectedInternetEl.textContent = internetOption ? internetOption.text.split(" (")[0] : 'ë¯¸ì„ íƒ';
            const tvOption = Array.from(tvPlanEl.options).find(opt => opt.value === tvPlanName);
            selectedTvEl.textContent = tvOption && tvOption.value !=='none' ? tvOption.text.split(" (")[0] : 'ë¯¸ì„ íƒ';
            selectedAdditionalTvEl.textContent = additionalTvPlanKey !== 'none' ? additionalTvPlans_KT[additionalTvPlanKey].name : 'ë¯¸ì„ íƒ';
            const phoneOption = Array.from(phonePlanEl.options).find(opt => opt.value === phonePlanName);
            selectedPhoneEl.textContent = phoneOption && phoneOption.value !== 'none' ? phoneOption.text.split(" (")[0] : 'ë¯¸ì„ íƒ';
            selectedWifiEl.textContent = selectedWifiName || 'ë¯¸ì„ íƒ';
            selectedMobileCountEl.textContent = numMobileLines;
      
            if (selectedWifiData && selectedWifiData.promotion) {
                selectedWifiDetailsEl.innerHTML = `<p class="text-sm text-sky-700 mt-1">
                    ã„´ í”„ë¡œëª¨ì…˜: ${selectedWifiData.promotion}
                    ${selectedWifiData.url ? `<a href="${selectedWifiData.url}" target="_blank" class="font-semibold underline hover:text-sky-500 ml-2">[ì œí’ˆ ìƒì„¸ì •ë³´]</a>` : ''}
                </p>`;
            } else {
                selectedWifiDetailsEl.innerHTML = '';
            }
      
            const discountTypeMap = {
                none: "ê²°í•© í• ì¸ ì—†ìŒ", totalAmountBundle: "ì´ì•¡ ê²°í•©í• ì¸", premiumFamilyBundle: "í”„ë¦¬ë¯¸ì—„ ê°€ì¡±ê²°í•©",
                premiumSingleBundle: "í”„ë¦¬ë¯¸ì—„ ì‹±ê¸€ê²°í•©", mvnoBundle: "ì•Œëœ°í° ê²°í•©", familyBundle: "íŒ¨ë°€ë¦¬ ê²°í•© (ì¸í„°ë„· ì¶”ê°€íšŒì„ )",
                separateFamilyBundle: "ë”°ë¡œ ì‚´ì•„ë„ ê°€ì¡±ê²°í•©", 
                fixedRateBundle: "ì •ì•¡ ê²°í•©í• ì¸"
            };
            selectedDiscountTypeEl.textContent = discountTypeMap[discountType] || "ì•Œ ìˆ˜ ì—†ìŒ";
      
            // (Dynamically updated VAT details)
            const calculationProcessTitleEl = expandedDetailsContainer.querySelector('.result-card:nth-of-type(2) h3');
            calculationProcessTitleEl.textContent = `ğŸ–¥ï¸ ì¸í„°ë„·/TV ìš”ê¸ˆ ê³„ì‚° ê³¼ì • ${isVatIncluded ? '(VAT í¬í•¨)' : '(VAT ë³„ë„)'}`;

            const baseCost = internetBase + tvBase + additionalTvCost + phoneBase + addonServicesTotalCost;
            const totalDiscount = internetDiscount + currentTvDiscount;

            detailInternetBaseEl.textContent = `${(isVatIncluded ? Math.round(baseCost * 1.1) : baseCost).toLocaleString()} ì›`;
            detailWifiFeeEl.textContent = `${(isVatIncluded ? Math.round(actualWifiRouterFee * 1.1) : actualWifiRouterFee).toLocaleString()} ì›`;
            detailInternetDiscountTotalEl.textContent = `- ${(isVatIncluded ? Math.round(totalDiscount * 1.1) : totalDiscount).toLocaleString()} ì›`;

            // Hide/show VAT rows based on toggle
            detailFinalCostPreVatEl.parentElement.style.display = isVatIncluded ? 'flex' : 'none';
            detailVatAmountEl.parentElement.style.display = isVatIncluded ? 'flex' : 'none';
            detailFinalCostPreVatEl.textContent = `${finalMonthlyCost_PreVat.toLocaleString()} ì›`;
            detailVatAmountEl.textContent = `${vatAmount.toLocaleString()} ì›`;

            // Adjust final cost display
            const finalCostLabel = detailFinalCostEl.parentElement.querySelector('span');
            finalCostLabel.textContent = `ìµœì¢… ì˜ˆìƒ ì›” ë‚©ë¶€ì•¡ ${isVatIncluded ? '(VAT í¬í•¨)' : '(VAT ë³„ë„)'}`;
            detailFinalCostEl.textContent = `${(isVatIncluded ? finalMonthlyCost : finalMonthlyCost_PreVat).toLocaleString()} ì›`;
             
            if (cardDiscountAmount > 0 && selectedCardData) {
                selectedCardNameEl.textContent = selectedCardData.name;
                detailCardDiscountEl.textContent = `- ${cardDiscountAmount.toLocaleString()} ì›`;
                detailFinalCardCostEl.textContent = `${(isVatIncluded ? finalCostWithCard : finalCostWithCard - vatAmount).toLocaleString()} ì›`;

                const finalCardCostLabel = detailFinalCardCostContainerEl.querySelector('span');
                finalCardCostLabel.textContent = `âœ¨ ì¹´ë“œ ì ìš© ìµœì¢… ë‚©ë¶€ì•¡ ${isVatIncluded ? '(VAT í¬í•¨)' : '(VAT ë³„ë„)'}`;

                detailCardDiscountContainerEl.classList.remove('hidden');
                detailFinalCardCostContainerEl.classList.remove('hidden');
                finalCardCostSeparatorEl.classList.remove('hidden');
            } else {
                detailCardDiscountContainerEl.classList.add('hidden');
                detailFinalCardCostContainerEl.classList.add('hidden');
                finalCardCostSeparatorEl.classList.add('hidden');
            }
      
            // Mobile Discount Details (VAT Included)
            let mobileDiscountHtml = '<div class="space-y-3">';
            if (mobileLinesDetails.length > 0 && mobileLinesDetails.some(l => l.cost > 0)) {
                    mobileLinesDetails.forEach(line => {
                        if (line.cost === 0) return;
                        let discountDetailString = '';
                        if (line.totalAmountLineDiscount > 0) discountDetailString += ` - ${line.totalAmountLineDiscount.toLocaleString()}ì›(ì´ì•¡)`;
                        if (line.fixedRateLineDiscount > 0) discountDetailString += ` - ${line.fixedRateLineDiscount.toLocaleString()}ì›(ì •ì•¡)`;
                        if (line.bundleDiscount > 0) discountDetailString += ` - ${line.bundleDiscount.toLocaleString()}ì›(ê²°í•©)`;
                        if (line.selectiveDiscount > 0) discountDetailString += ` - ${line.selectiveDiscount.toLocaleString()}ì›(ì„ íƒì•½ì •)`;
                        mobileDiscountHtml += `<div class="p-2 border-t border-slate-200">
                                            <p class="font-semibold">${line.name} (${line.cost.toLocaleString()}ì›)</p>
                                            <p class="text-sm pl-2"> ã„´ ${line.cost.toLocaleString()}ì›${discountDetailString} = <strong class="text-blue-600">${line.finalBill.toLocaleString()}ì›</strong> 
                                            <a href="${line.url}" target="_blank" class="text-blue-500 hover:underline">(ìƒì„¸)</a>
                                            </p></div>`;
                    });
            } else {
                mobileDiscountHtml += `<p>ê²°í•©ì— ë”°ë¥¸ ëª¨ë°”ì¼ í• ì¸ ì—†ìŒ.</p>`;
            }
            mobileDiscountHtml += '</div>';
            mobileDiscountDetailContainerEl.innerHTML = mobileDiscountHtml;
      
      
            // Gift Details
            giftCashEl.textContent = `${results.giftCash.toLocaleString()} ì›`;
            giftVoucherEl.textContent = `${results.giftVoucher.toLocaleString()} ì›`;
            giftPhoneVoucherEl.textContent = `${results.giftPhoneVoucherAmount.toLocaleString()} ì›`;
            giftAdditionalTvEl.textContent = `${results.giftAdditionalTvAmount.toLocaleString()} ì›`;
            dongpanCashContainerKtEl.classList.toggle('hidden', !results.isDongpanChecked || results.giftDongpanAdditionalCashAmount === 0);
            giftDongpanAdditionalCashKtEl.textContent = `${results.giftDongpanAdditionalCashAmount.toLocaleString()} ì›`;
            if (giftTotalEl) {
                 giftTotalEl.textContent = `${maxGiftAmount.toLocaleString()} ì›`;
            }
      
            // Installation Fee (VAT Included)
            installationFeeResultEl.textContent = `${installFee.toLocaleString()} ì›`;
            installationFeeDescriptionEl.textContent = `(${installFeeDesc}, ${installationTime === 'weekday' ? 'í‰ì¼ ì£¼ê°„' : 'ì£¼ë§/ì•¼ê°„'} ê¸°ì¤€)`;
      
            // Show sections
            resultSection.classList.remove('hidden');
            installationFeeSectionEl.classList.remove('hidden');
            messageScriptSectionEl.classList.remove('hidden');
            // (Request 2: Removed Gemini card showing logic)
             
            const recommendationBoxEl = document.getElementById('recommendationBox');
            // const recommendation = compareAndRecommend(results); // Per memory, this causes issues.
            const recommendation = { show: false };
      
            if (recommendation.show) {
                document.getElementById('recommendationTitle').textContent = recommendation.title;
                document.getElementById('recommendationBody').innerHTML = recommendation.body;
                document.getElementById('recommendationAction').innerHTML = recommendation.actionHTML;
                recommendationBoxEl.classList.remove('hidden');
            } else {
                recommendationBoxEl.classList.add('hidden');
            }
        }
          
        function generateAllScripts(results) {
            const {
                isPostApplied, installTime, discountType, isDongpanChecked, numMobileLines,
                totalPreDiscountCost, finalMonthlyCost, installFee,
                mobileLinesDetails, selectedWifiData, confirmedGiftAmount, maxGiftAmount,
                internetPlanName, tvPlanName, additionalTvPlanKey, phonePlanName,
                currentInternet, finalCostWithCard, cardDiscountAmount, selectedCardData,
                finalMonthlyCost_PreVat,
                installationFeeSelfPay,
                isVatIncluded
            } = results;
            
            // --- 1. Generate Memo Script (VAT INCLUDED) ---
            const internetOption = Array.from(internetPlanEl.options).find(opt => opt.value === internetPlanName);
            const internetPlanText = internetOption ? internetOption.text.split(' (')[0] : 'ì¸í„°ë„· ë¯¸ì„ íƒ';
            const tvOption = Array.from(tvPlanEl.options).find(opt => opt.value === tvPlanName);
            let firstTvText = "ë¯¸ì„ íƒ";
                if (tvOption && tvOption.value !== 'none' && tvPlans_KT[tvOption.value]) { 
                        firstTvText = `${tvOption.text.split(' (')[0]} + ${tvPlans_KT[tvOption.value].stbIncluded} ì…‹í†± ì„ëŒ€ í¬í•¨`;
                    }
            const additionalTvText = additionalTvPlanKey !== 'none' ? ` + (ì¶”ê°€) ${additionalTvPlans_KT[additionalTvPlanKey].name}` : "";
            const phoneOption = Array.from(phonePlanEl.options).find(opt => opt.value === phonePlanName);
            let phoneText = "ë¯¸ì„ íƒ";
            if (phoneOption && phoneOption.value !== 'none' && phonePlans_KT[phoneOption.value]) {
                phoneText = phoneOption.text.split(' (')[0];
            }
            const wifiName = selectedWifiData ? selectedWifiData.name : "ë¯¸ì„ íƒ";
      
            let productDescriptionMemo = internetPlanText;
            if (wifiName !== "KTê³µìœ ê¸° X") productDescriptionMemo += ` + ${wifiName}`;
            if (tvOption && tvOption.value !== 'none') {
                const tvPlanInfo = tvPlans_KT[tvOption.value];
                if (tvPlanInfo) {
                    productDescriptionMemo += ` + ${tvOption.text.split(' (')[0]} + ${tvPlanInfo.stbIncluded}`;
                }
            }
            productDescriptionMemo += additionalTvText;
            if (phoneText !== "ë¯¸ì„ íƒ") productDescriptionMemo += ` + ${phoneText}`;
             
            const discountTypeName = selectedDiscountTypeEl.textContent;
            const mobilePlanNamesForMemo = mobileLinesDetails.filter(line => line.cost > 0).map(line => line.name).join(', ') || 'ì—†ìŒ';
      
            // Memo uses VAT INCLUDED costs
            const finalCostForMemo = cardDiscountAmount > 0 ? finalCostWithCard : finalMonthlyCost;
            const cardInfoForMemo = cardDiscountAmount > 0 ? ` / (ì¹´ë“œì ìš©ê°€)${finalCostWithCard.toLocaleString()}ì›` : "";
      
            // (Request 3: Rebranding, Request 6: Added new fields)
            memoScriptEl.value = `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„° ìƒë‹´ ë©”ëª¨]
ì´ë¦„:
í•¸ë“œí° ë²ˆí˜¸:
í•¸ë“œí° í†µì‹ ì‚¬:
ì£¼ë¯¼ë²ˆí˜¸:
ì„¤ì¹˜í•  ì£¼ì†Œ:
ì‚¬ì€í’ˆ ë°›ì„ ê³„ì¢Œë²ˆí˜¸:
ì‚¬ì€í’ˆ(ìƒ/í˜„)/ ìì²´ì§€ê¸‰:

1. ìƒí’ˆì •ë³´ : ${productDescriptionMemo}
2. ì²­êµ¬ ê¸ˆì•¡ : (í• ì¸ì „)${totalPreDiscountCost.toLocaleString()}ì› / (í• ì¸í›„)${finalMonthlyCost.toLocaleString()}ì›${cardInfoForMemo} (VAT í¬í•¨)
3. ì œíœ´ì¹´ë“œ ë°˜ì˜ì‹œ: ${cardDiscountAmount > 0 ? 'ë°˜ì˜ë¨ (' + selectedCardData.name + ')' : 'ë¯¸ë°˜ì˜'}
4. ì‚¬ì€í’ˆ ì´ì•¡ : ${maxGiftAmount.toLocaleString()}ì› (í™•ì •)
5. ì„¤ì¹˜ë¹„ ì•ˆë‚´ì™„ : ${installFee.toLocaleString()}ì› ${installationFeeSelfPay ? '(ìì²´ì§€ê¸‰)' : ''}
6. ê²°í•©ì ìš©ì‹œì : ${isPostApplied ? 'í›„ê²°í•©' : 'ì„ ê²°í•©'}
7. ì¸ì¦ì—°ë½30ë¶„í›„ ê°€ëŠ¥:
8. ì„¤ì¹˜ì¼ì •: [    ë…„  ì›”  ì¼]
9. ê¸°ì¡´ì‚¬ìš© ì¸í„°ë„· í†µì‹ ì‚¬:
10. ê¸°íƒ€ : ì´ì‚¬ ì—¬ë¶€ [ ]
11. í• ì¸ìœ í˜•: ${discountTypeName}
12. ëª¨ë°”ì¼ê²°í•©íšŒì„ : ${numMobileLines}ê°œ
13. ë™íŒíŒë§¤ê°€ì ìš©: ${isDongpanChecked ? 'Y' : 'N'}
      
    --- ë™íŒ ì¶”ê°€ ì •ë³´ ---
    ê³ ê°ëª… :
    ë™íŒìœ ì„ ëª…ì˜ì :
    ì—°ë½ì²˜ :
    ê¸°ì¡´í†µì‹ ì‚¬ :
    ìœ ì‹¬ë°œì†¡ì£¼ì†Œ :
    ì„ íƒì•½ì •ì—¬ë¶€ (12ê°œì›”/24ê°œì›”) : 12ê°œì›”
    ìš”ê¸ˆì œ : ${mobilePlanNamesForMemo}
    ìœ ì‹¬ë¹„ í›„ì²­êµ¬ ë™ì˜ (Y/N) : Y
    â˜… ê²°í•©ì—¬ë¶€ (í”„ë¦¬ë¯¸ì—„ê°€ì¡±/í”„ë¦¬ë¯¸ì—„ì‹±ê¸€/ì´ì•¡) : ${discountTypeName}
    â˜… í• ì¸ì§€ì •(ì§€ì •í• ì¸orê¸°ì—¬ë„) : ê¸°ì—¬ë„
    â˜… ë™íŒ ê²°í•©ì¸ì¦ (URL ì™„ë£Œì—¬ë¶€) : ì™„ë£Œ
    â˜… íŒ¨ìŠ¤orì‹ ìš©ì¹´ë“œ ì¸ì¦ : íŒ¨ìŠ¤ì¸ì¦
      
    --- í•„ìˆ˜ ì•ˆë‚´ì‚¬í•­ ---
    ê³ ê° ìƒí™©ì—ë”°ë¥¸ í•„ìˆ˜ì•ˆë‚´ì‚¬í•­ ì™„ë£Œ
    1.  ê¸°ì¡´ ê°€ì¡± ë˜ëŠ” ë³¸ì¸ ëª…ì˜ íšŒì„  ìˆëŠ” ê²½ìš° ìœ ì§€ í•„ìš” ì•ˆë‚´ ì™„ë£Œ
    2.  ì´ì‚¬ ê³ ê° Y / ì¶”í›„ ì†Œëª… ë°œìƒ ì‹œ ê´€ë ¨ ì„œë¥˜ ì œì¶œ ë™ì˜ ìˆ˜ê¸
    3.  ì¸í„°ë„· ì„¤ì¹˜ í›„ ê³ ê°ì„¼í„°ë¡œ í›„ê²°í•© ìš”ì²­ ì•ˆë‚´ ì™„ë£Œ`;
      
            // --- 2. Generate Info Script (Dynamically updated with VAT) ---
            infoScriptEl.value = generateInfoScriptForPlan(results);
      
            // --- 3. Generate Complete Script (Dynamically updated with VAT) ---
            let productDescriptionComplete = [];
            if (internetPlanText !== 'ì¸í„°ë„· ë¯¸ì„ íƒ') {
                let internetLine = `â–¶ï¸ ${internetPlanText}`;
                if (wifiName !== "KTê³µìœ ê¸° X" && wifiName !== "ë¯¸ì„ íƒ") {
                    internetLine += ` + ${wifiName}`;
                }
                productDescriptionComplete.push(internetLine);
            }
            if (firstTvText !== "ë¯¸ì„ íƒ") {
                productDescriptionComplete.push(`â–¶ï¸ ${firstTvText}`);
            }
            if (additionalTvText) {
                productDescriptionComplete.push(`â–¶ï¸ ${additionalTvText.replace(' + ', '')}`);
            }
             if (phoneText !== "ë¯¸ì„ íƒ") {
                productDescriptionComplete.push(`â–¶ï¸ ${phoneText}`);
            }
             
            if (currentInternet.isOttPlan) {
                productDescriptionComplete.push(`â–¶ï¸ ì¢…í•©OTT6ì¢… 3ë…„ê°„ ë¬´ìƒì§€ì›(ë„·í”Œë¦­ìŠ¤/í‹°ë¹™/ë””ì¦ˆë‹ˆí”ŒëŸ¬ìŠ¤/ì›¨ì´ë¸Œ/ì¿ íŒ¡í”Œë ˆì´/ì§€ìƒíŒŒë‹¤ì‹œë³´ê¸°/ì´70ë§Œì›ìƒë‹¹)`);
            }

            const vatLabel = isVatIncluded ? "VAT í¬í•¨" : "VAT ë³„ë„";
            const finalCostForComplete = isVatIncluded ? finalMonthlyCost : finalMonthlyCost_PreVat;
            const finalCostWithCardForComplete = isVatIncluded ? finalCostWithCard : (finalMonthlyCost_PreVat - cardDiscountAmount);
            const costToDisplay = cardDiscountAmount > 0 ? finalCostWithCardForComplete : finalCostForComplete;
            const cardInfoForComplete = cardDiscountAmount > 0 ? ` (${selectedCardData.name} ì ìš©ê°€)` : (discountType !== 'none' ? ' (ê²°í•© O)' : ' (ê²°í•© X)');
      
            let completeScriptContent = `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] ê°€ì… ì™„ë£Œ ì•ˆë‚´
    ì•ˆë…•í•˜ì„¸ìš”, ê³ ê°ë‹˜.
    ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„° ì…ë‹ˆë‹¤.
    âœ… ê³„ì•½ì´ ì™„ë£Œë˜ì—ˆì–´ìš”, ì•„ë˜ ë‚´ìš©ì€ ê³„ì•½ì„œì™€ ë™ì¼í•œ íš¨ë ¥ì´ ìˆìœ¼ë‹ˆ ê¼¼ê¼¼íˆ ì½ì–´ì£¼ì„¸ìš”.
    âš ï¸ 3ë…„ ì•½ì •ì´ë©°, ì•„ë˜ì™€ ê°™ì€ ìƒí™©ì— í•´ë‹¹í•˜ë©´ ë°›ìœ¼ì…¨ë˜ ì‚¬ì€í’ˆì€ í™˜ìˆ˜ ë©ë‹ˆë‹¤.
    â‘  1ë…„ ì´ë‚´ í•´ì§€
    â‘¡ 3ê°œì›” (90ì¼) ì´ìƒ ì •ì§€
    â‘¢ 1ë…„ ì´ë‚´ ìš”ê¸ˆì œ í•˜í–¥ (ìƒí–¥ ì‹œì—ëŠ” í™˜ìˆ˜ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!)
    â‘£ 3ê°œì›” ì´ë‚´ ëª…ì˜ë³€ê²½
    â‘¤ ê°œí†µ 1ê°œì›” ì´ë‚´ ê²°ì œìˆ˜ë‹¨ ì§€ë¡œì²­êµ¬ì„œë¡œ ë³€ê²½
    âš ï¸ ì‹ ê·œ ê°€ì… í›„ ê¸°ì¡´ì— ì¸í„°ë„·ì€ ê¼­ í•´ì§€ í•´ì£¼ì„¸ìš”. ìë™í•´ì§€ë˜ì§€ ì•Šìœ¼ë©° ì´ëŸ´ ê²½ìš° ìš”ê¸ˆì´ ì´ì¤‘ ë¶€ê³¼ë˜ì–´ìš”.
    âš ï¸ 3ë…„ ì´ë‚´ í•´ì§€ ì‹œ í†µì‹ ì‚¬ ë³¸ì‚¬ì— ìœ„ì•½ê¸ˆ (í• ì¸ ë°˜í™˜ê¸ˆ) ë° í†µì‹ ì‚¬ì— ë”°ë¼ ë©´ì œëœ ì™€ì´íŒŒì´ / í†µì‹ ê¸°ê¸° ì„¤ì¹˜ë¹„ ë°˜í™˜ì´ í•„ìš”í•  ìˆ˜ ìˆì–´ìš”.
    âœ… ê°€ì… ìƒí’ˆ ì•ˆë‚´
    ${productDescriptionComplete.join('\n')}
    â–¶ï¸ ì›” ${costToDisplay.toLocaleString()}ì›${cardInfoForComplete} (âš ï¸${vatLabel})
    â–¶ï¸ ì„¤ì¹˜ë¹„ ${installFee.toLocaleString()}ì› ì²« ë‹¬ ë¶€ê³¼ (VAT í¬í•¨) ${installationFeeSelfPay ? '(ìì²´ ì§€ì›)' : ''}
    â–¶ï¸ ì‚¬ì€í’ˆ ${confirmedGiftAmount.toLocaleString()}ì› (í™•ì •)
    
    * ì•ˆë‚´ëœ ì›” ìš”ê¸ˆì€ VAT(ë¶€ê°€ì„¸) ${isVatIncluded ? 'í¬í•¨' : 'ë³„ë„'} ê¸ˆì•¡ì´ë©°, ${isVatIncluded ? '' : 'ì‹¤ì œ ì²­êµ¬ ì‹œ 10%ì˜ ë¶€ê°€ì„¸ê°€ ì¶”ê°€ë©ë‹ˆë‹¤.'}
    âœ…ì‚¬ì€í’ˆì€ ì„¤ì¹˜ í›„ 7ì¼ ì´ë‚´ ìë™ìœ¼ë¡œ ì§€ê¸‰ë˜ë‚˜ í‰ì¼ê¸°ì¤€ 5ì‹œ ì´ì „ ê°œí†µ ë°›ì•˜ë‹¤ê³  ë¬¸ì ì£¼ì‹œë©´ ë‹¹ì¼ì…ê¸ˆ ë„ì›€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.`;
      
            if (isPostApplied) {
                completeScriptContent += `
      
    ---
    âš ï¸ [í•„ë…] ì›” ìš”ê¸ˆ í• ì¸ì„ ìœ„í•œ ë§ˆì§€ë§‰ ë‹¨ê³„!
      
    ê³ ê°ë‹˜, ì„¤ì¹˜ í›„ 30ì¼ ì´ë‚´ì— ì§ì ‘ ê²°í•© ì‹ ì²­ì„ ì™„ë£Œí•˜ì…”ì•¼ ë§¤ë‹¬ ìš”ê¸ˆ í• ì¸ì´ ì ìš©ë©ë‹ˆë‹¤.
    ì•„ë˜ ë²ˆí˜¸ë¡œ ì „í™”í•˜ì…”ì„œ "ì¸í„°ë„·ì´ë‘ íœ´ëŒ€í°(ë˜ëŠ” TV) ê²°í•© ì‹ ì²­í•©ë‹ˆë‹¤"ë¼ê³  ë§ì”€í•´ì£¼ì„¸ìš”!
    (ê¸°í•œì´ ì§€ë‚˜ í• ì¸ì„ ë†“ì¹˜ì‹œëŠ” ì¼ì´ ì—†ë„ë¡ ì§€ê¸ˆ ë°”ë¡œ ì‹ ì²­í•˜ì‹œëŠ” ê²ƒì„ ê¶Œí•´ë“œë¦½ë‹ˆë‹¤.)
      
    â–  KT ê³ ê°ë‹˜: íœ´ëŒ€í°ì—ì„œ 100ë²ˆìœ¼ë¡œ ì „í™”
    ---`;
            }
      
            completeScriptContent += `
      
    ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„° ê¹€í™ì‹ ë“œë¦¼.`;
      
            completeScriptEl.value = completeScriptContent;
      
            // Generate other static/persuasion scripts
            generatePersuasionScripts(currentInternet);
        }
          
        function generateInfoScriptForPlan(results) {
            const {
                internetPlanName, tvPlanName, additionalTvPlanKey, phonePlanName,
                selectedWifiData, mobileLinesDetails,
                confirmedGiftAmount,
                cardDiscountAmount, selectedCardData,
                finalMonthlyCost_PreVat, finalMonthlyCost, finalCostWithCard,
                currentInternet,
                installationFeeSelfPay,
                installFee,
                isVatIncluded
            } = results;

            const discountTypeName = selectedDiscountTypeEl.textContent;
            const internetOption = Array.from(internetPlanEl.options).find(opt => opt.value === internetPlanName);
            const internetPlanText = internetOption ? internetOption.text.split(' (')[0] : 'ì¸í„°ë„· ë¯¸ì„ íƒ';
            const tvOption = Array.from(tvPlanEl.options).find(opt => opt.value === tvPlanName);
            let firstTvText = "ë¯¸ì„ íƒ";
            if (tvOption && tvOption.value !== 'none' && tvPlans_KT[tvOption.value]) {
                firstTvText = tvOption.text.split(' (')[0];
            }
            const additionalTvText = additionalTvPlanKey !== 'none' ? ` + (ì¶”ê°€) ${additionalTvPlans_KT[additionalTvPlanKey].name}` : "";
            const phoneOption = Array.from(phonePlanEl.options).find(opt => opt.value === phonePlanName);
            let phoneText = "ë¯¸ì„ íƒ";
            if (phoneOption && phoneOption.value !== 'none') {
                phoneText = phoneOption.text.split(' (')[0];
            }

            let productDescriptionInfo = `[ìœ ì„  ìƒí’ˆ]
    â–¶ï¸ ${internetPlanText}
    â–¶ï¸ ${firstTvText !== 'ë¯¸ì„ íƒ' ? firstTvText : 'TV ë¯¸ì„ íƒ'}${additionalTvText}
    â–¶ï¸ ${phoneText !== 'ë¯¸ì„ íƒ' ? phoneText : 'ì§‘ì „í™” ë¯¸ì„ íƒ'}`;

            if (selectedWifiData && selectedWifiData.name !== "KTê³µìœ ê¸° X") {
                productDescriptionInfo += `\n    â–¶ï¸ ${selectedWifiData.name}`;
            }

            if (currentInternet.isOttPlan) {
                productDescriptionInfo += `\n    â–¶ï¸ ì¢…í•©OTT6ì¢… 3ë…„ê°„ ë¬´ìƒì§€ì›(ë„·í”Œë¦­ìŠ¤/í‹°ë¹™/ë””ì¦ˆë‹ˆí”ŒëŸ¬ìŠ¤/ì›¨ì´ë¸Œ/ì¿ íŒ¡í”Œë ˆì´/ì§€ìƒíŒŒë‹¤ì‹œë³´ê¸°/ì´70ë§Œì›ìƒë‹¹)`;
            }

            const vatLabel = `(âš ï¸${isVatIncluded ? 'VAT í¬í•¨' : 'VAT ë³„ë„'})`;
            const costBeforeCard = isVatIncluded ? finalMonthlyCost : finalMonthlyCost_PreVat;

            let finalCostBlock = `\n[ìµœì¢… ìš”ê¸ˆ ë° í˜œíƒ]
    â–¶ï¸ ì›” ${costBeforeCard.toLocaleString()}ì› (${discountTypeName}, ${isVatIncluded ? 'VATí¬í•¨' : 'VATë³„ë„'})
    â–¶ï¸ ì‚¬ì€í’ˆ ${confirmedGiftAmount.toLocaleString()}ì› (í™•ì •)`;

            if (cardDiscountAmount > 0) {
                 const costWithCard = isVatIncluded ? finalCostWithCard : (finalMonthlyCost_PreVat - cardDiscountAmount);
                 finalCostBlock += `\n    â–¶ï¸ ê¸°ì¡´ ì›” ${costBeforeCard.toLocaleString()}ì› - ì¹´ë“œ ìë™ì´ì²´ ì²­êµ¬ í• ì¸ ${cardDiscountAmount.toLocaleString()}ì›\n    = âœ¨ ìµœì¢… ì›” ë‚©ë¶€ì•¡ ${costWithCard.toLocaleString()}ì›! âœ¨ ${vatLabel}`;
            }

            if (installationFeeSelfPay) {
                finalCostBlock += `\n    â–¶ï¸ ì„¤ì¹˜ë¹„ ${installFee.toLocaleString()}ì› ì§€ì› (ìì²´ì§€ê¸‰)`;
            }

            return `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] ìƒí’ˆ & ì‚¬ì€í’ˆ ìš”ì•½ ì•ˆë‚´
    ì•ˆë…•í•˜ì„¸ìš”, ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„° ì…ë‹ˆë‹¤.
    ê³ ê°ë‹˜ê»˜ì„œ ì˜¤ëŠ˜ ìƒë‹´ ë°›ìœ¼ì‹  ìƒí’ˆ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
    ${productDescriptionInfo}
    ${finalCostBlock}
      
    * í˜œíƒì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆë‹¤ëŠ” ì  ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
    * 3ë…„ ì•½ì • ê¸°ì¤€
    ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„° ë“œë¦¼. â¤ï¸`;
        }
          
        function generateComparisonScript() {
            try {
                const isBundleType = document.querySelector('input[name="internetType"]:checked').value === 'bundle';
                const planName100M = isBundleType ? "KTì¸í„°ë„·ë²ˆë“¤100mb" : "KTì¸í„°ë„·(ë‹¨ë…) 100mb";
                const planName500M = isBundleType ? "KTì¸í„°ë„·ë²ˆë“¤500mb" : "KTì¸í„°ë„·(ë‹¨ë…) 500mb";
      
                const results100M = getCalculationResults({ forcedInternetPlanName: planName100M });
                const results500M = getCalculationResults({ forcedInternetPlanName: planName500M });
      
                if (!results100M || !results500M) {
                    throw new Error("ê²°ê³¼ë¥¼ ê³„ì‚°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
      
                const scriptBlock100M = generateSimpleProductScript(results100M);
                const scriptBlock500M = generateSimpleProductScript(results500M);
      
                // Use Pre-VAT costs for comparison in this script
                const cost100M = results100M.finalMonthlyCost_PreVat - results100M.cardDiscountAmount;
                const cost500M = results500M.finalMonthlyCost_PreVat - results500M.cardDiscountAmount;

                const monthlyCostDifference = cost500M - cost100M;
                const giftDifference = results500M.confirmedGiftAmount - results100M.confirmedGiftAmount;
      
                // (Request 3: Rebranding)
                const comparisonScript = `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] 100Mbps vs 500Mbps ìƒí’ˆ ë¹„êµ ì•ˆë‚´
      
    ê³ ê°ë‹˜ê»˜ì„œ ì„ íƒí•˜ì‹  ì˜µì…˜ ê¸°ì¤€ìœ¼ë¡œ, ì¸í„°ë„· ì†ë„ë§Œ ë³€ê²½í–ˆì„ ë•Œì˜ ìš”ê¸ˆê³¼ í˜œíƒì„ ë¹„êµí•´ ë“œë¦½ë‹ˆë‹¤. (âš ï¸ëª¨ë“  ìš”ê¸ˆ VAT ë³„ë„)
      
    ----- 100M -----
    ${scriptBlock100M}
    --------------------
      
    ----- 500M -----
    ${scriptBlock500M}
    --------------------
      
    ê³ ê°ë‹˜, í˜¹ì‹œ ì•Œê³  ê³„ì…¨ë‚˜ìš”?
    ì§€ê¸ˆ ì„ íƒí•˜ì‹  100Mbps ìš”ê¸ˆì— ì›” ${monthlyCostDifference.toLocaleString()}ì›(VAT ë³„ë„)ë§Œ ì¶”ê°€í•˜ì‹œë©´,
    âœ… ì¸í„°ë„· ì†ë„ëŠ” 5ë°° ë¹¨ë¼ì§€ê³ ,
    âœ… ì²« ë‹¬ì— ë°›ìœ¼ì‹œëŠ” ì‚¬ì€í’ˆì€ ${(giftDifference / 10000).toLocaleString()}ë§Œì› ë” ì»¤ì§‘ë‹ˆë‹¤!
      
    ì˜¨ ê°€ì¡±ì´ ë™ì‹œì— ì ‘ì†í•´ë„ ëŠê¹€ ì—†ëŠ” 500Mbps ìƒí’ˆìœ¼ë¡œ ë³€ê²½ ì›í•˜ì‹œë©´ í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”. ğŸ˜Š`;
      
                infoScriptEl.value = comparisonScript.trim();
            } catch (error) {
                console.error("ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜:", error);
                infoScriptEl.value = "ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì„ íƒ í•­ëª©ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";
            }
        }
          
        function generateDiscountTypeComparisonScript() {
            try {
                const resultsTotal = getCalculationResults({ forcedDiscountType: 'totalAmountBundle' });
                const resultsFixed = getCalculationResults({ forcedDiscountType: 'fixedRateBundle' });
      
                if (!resultsTotal || !resultsFixed) {
                    throw new Error("ê²°ê³¼ë¥¼ ê³„ì‚°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
      
                const scriptBlockTotal = generateSimpleDiscountScript(resultsTotal);
                const scriptBlockFixed = generateSimpleDiscountScript(resultsFixed);
      
                // Use Pre-VAT costs for comparison in this script
                const costTotal = resultsTotal.finalMonthlyCost_PreVat - resultsTotal.cardDiscountAmount;
                const costFixed = resultsFixed.finalMonthlyCost_PreVat - resultsFixed.cardDiscountAmount;

                const monthlyDifference = Math.abs(costTotal - costFixed);
                const whoIsCheaper = costFixed < costTotal ? "ì •ì•¡ ê²°í•©" : "ì´ì•¡ ê²°í•©";
                const cheaperByText = monthlyDifference > 0 ? `ì›” ${monthlyDifference.toLocaleString()}ì› ë” ì €ë ´í•©ë‹ˆë‹¤!` : "ì›” ìš”ê¸ˆì´ ë™ì¼í•©ë‹ˆë‹¤.";
      
                const isStandalone = resultsFixed.tvPlanName === 'none' && resultsFixed.phonePlanName === 'none';
                const is500MPlus = resultsFixed.currentInternet.speed >= 500;
                let specialNote = "";
                if (isStandalone && is500MPlus) {
                    // 11,000ì› (VAT í¬í•¨) -> 10,000ì› (VAT ë³„ë„)
                    specialNote = "\n\nğŸ’¡ íŠ¹íˆ ê³ ê°ë‹˜ì²˜ëŸ¼ 500M ì´ìƒ ì¸í„°ë„·ë§Œ ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í•˜ì‹¤ ê²½ìš°, 'ì •ì•¡ ê²°í•©'ì€ ì¸í„°ë„· ìš”ê¸ˆì—ì„œë§Œ ì´ 10,000ì›ì˜ ê°•ë ¥í•œ í• ì¸ì„ ì œê³µí•˜ì—¬ ë”ìš± ìœ ë¦¬í•©ë‹ˆë‹¤.";
                } else {
                     specialNote = "\n\nğŸ’¡ 'ì´ì•¡ ê²°í•©'ì€ ê²°í•©í•˜ëŠ” íœ´ëŒ€í° ìš”ê¸ˆ ì´ì•¡ì´ ë†’ì„ìˆ˜ë¡ í• ì¸ í˜œíƒì´ ì»¤ì§€ëŠ” ë°©ì‹ì´ê³ , 'ì •ì•¡ ê²°í•©'ì€ íœ´ëŒ€í° ìš”ê¸ˆì œì™€ ê´€ê³„ì—†ì´ ì¼ì • ê¸ˆì•¡ì„ í• ì¸í•´ì£¼ëŠ” ê°„ë‹¨í•œ ë°©ì‹ì…ë‹ˆë‹¤.";
                }
      
      
                // (Request 3: Rebranding)
                const comparisonScript = `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] ì´ì•¡ê²°í•© vs ì •ì•¡ê²°í•©, ê³ ê°ë‹˜ê»˜ ë”± ë§ëŠ” í• ì¸ì€?
      
    ê³ ê°ë‹˜ê»˜ì„œ ì„ íƒí•˜ì‹  ìƒí’ˆ ê¸°ì¤€ìœ¼ë¡œ, ë‘ ê°€ì§€ í•µì‹¬ ê²°í•© ë°©ì‹ì˜ ì°¨ì´ë¥¼ ì•Œê¸° ì‰½ê²Œ ë¹„êµí•´ ë“œë¦½ë‹ˆë‹¤. (âš ï¸ëª¨ë“  ìš”ê¸ˆ VAT ë³„ë„)
      
    ----- ì´ì•¡ ê²°í•©í• ì¸ -----
    ${scriptBlockTotal}
    -----------------------------
      
    ----- ì •ì•¡ ê²°í•©í• ì¸ -----
    ${scriptBlockFixed}
    -----------------------------
      
    [ìµœì¢… ë¹„êµ]
    ê³ ê°ë‹˜ì˜ í˜„ì¬ ì¡°ê±´ì—ì„œëŠ” '${whoIsCheaper}' ë°©ì‹ì´ ${cheaperByText}${specialNote}
      
    ì–´ë–¤ ê²°í•© ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•´ ë“œë¦´ê¹Œìš”? ğŸ˜Š`;
      
                infoScriptEl.value = comparisonScript.trim();
            } catch (error) {
                console.error("í• ì¸ ìœ í˜• ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜:", error);
                infoScriptEl.value = "í• ì¸ ìœ í˜• ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì„ íƒ í•­ëª©ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";
            }
        }
          
        // Updated for VAT handling in comparison scripts
        function generateSimpleProductScript(results) {
            const { 
                internetPlanName, tvPlanName, additionalTvPlanKey, phonePlanName, selectedWifiData,
                confirmedGiftAmount,
                cardDiscountAmount,
                // Use Pre-VAT costs
                finalMonthlyCost_PreVat
            } = results;
      
            const internetOption = Array.from(internetPlanEl.options).find(opt => opt.value === internetPlanName);
            const internetPlanText = internetOption ? internetOption.text.split(' (')[0] : 'ì¸í„°ë„· ë¯¸ì„ íƒ';
             
            const tvOption = Array.from(tvPlanEl.options).find(opt => opt.value === tvPlanName);
            let firstTvText = "ë¯¸ì„ íƒ";
            if (tvOption && tvOption.value !== 'none' && tvPlans_KT[tvOption.value]) {
                firstTvText = tvOption.text.split(' (')[0];
            }
            const additionalTvText = additionalTvPlanKey !== 'none' ? ` + (ì¶”ê°€) ${additionalTvPlans_KT[additionalTvPlanKey].name}` : "";
             
            const phoneOption = Array.from(phonePlanEl.options).find(opt => opt.value === phonePlanName);
            let phoneText = "ë¯¸ì„ íƒ";
            if (phoneOption && phoneOption.value !== 'none') {
                phoneText = phoneOption.text.split(' (')[0];
            }
      
            let desc = `[ìœ ì„  ìƒí’ˆ]
    â–¶ï¸ ${internetPlanText}
    â–¶ï¸ ${firstTvText !== 'ë¯¸ì„ íƒ' ? firstTvText : 'TV ë¯¸ì„ íƒ'}${additionalTvText}
    â–¶ï¸ ${phoneText !== 'ë¯¸ì„ íƒ' ? phoneText : 'ì§‘ì „í™” ë¯¸ì„ íƒ'}`;
      
            if (selectedWifiData && selectedWifiData.name !== "KTê³µìœ ê¸° X") {
                desc += `\nâ–¶ï¸ ${selectedWifiData.name}`;
            }
      
            // Calculate Pre-VAT cost after card discount
            const finalCostToShow = finalMonthlyCost_PreVat - cardDiscountAmount;
      
            desc += `\n\n[ìµœì¢… ìš”ê¸ˆ ë° í˜œíƒ]
    â–¶ï¸ ì›” ${finalCostToShow.toLocaleString()}ì› (âš ï¸VAT ë³„ë„)
    â–¶ï¸ ì‚¬ì€í’ˆ ${confirmedGiftAmount.toLocaleString()}ì› (í™•ì •)`;
             
            return desc;
        }
          
        // Updated for VAT handling in comparison scripts
        function generateSimpleDiscountScript(results) {
            const {
                internetDiscount,
                currentTvDiscount,
                totalMobileDiscount,
                cardDiscountAmount,
                discountType,
                // Use Pre-VAT costs
                finalMonthlyCost_PreVat
            } = results;
      
            const discountTypeMap = {
                totalAmountBundle: "ì´ì•¡ ê²°í•©í• ì¸",
                fixedRateBundle: "ì •ì•¡ ê²°í•©í• ì¸"
            };
            
            // Calculate Pre-VAT cost after card discount
            const finalCostToShow = finalMonthlyCost_PreVat - cardDiscountAmount;
            const cardText = cardDiscountAmount > 0 ? " (ì¹´ë“œ ì ìš©ê°€)" : "";
             
            // (Request 4: Ensure internet discount is displayed VAT included in this script)
            // Wait, this script is used by the Comparison script generator, which explicitly states VAT ë³„ë„.
            // So, internet discount should also be VAT ë³„ë„ here.
            const internetDiscountTotal = internetDiscount + currentTvDiscount;
      
            return `[ê²°í•© ë°©ì‹] ${discountTypeMap[discountType]}
    â–¶ï¸ ìµœì¢… ì›” ìš”ê¸ˆ: ${finalCostToShow.toLocaleString()}ì›${cardText} (âš ï¸VAT ë³„ë„)
    â–¶ï¸ ì¸í„°ë„· í• ì¸: ${internetDiscountTotal.toLocaleString()}ì› (VAT ë³„ë„)
    â–¶ï¸ íœ´ëŒ€í° í• ì¸: ${totalMobileDiscount.toLocaleString()}ì› (VAT í¬í•¨)`; // Mobile discounts are inherently VAT included amounts
        }
          
        function compareAndRecommend(selectedResults) {
            const { discountType, finalMonthlyCost, cardDiscountAmount, finalCostWithCard } = selectedResults;
      
            if (discountType !== 'totalAmountBundle' && discountType !== 'fixedRateBundle') {
                return { show: false };
            }
      
            const alternativeDiscountType = discountType === 'totalAmountBundle' ? 'fixedRateBundle' : 'totalAmountBundle';
            const alternativeResults = getCalculationResults({ forcedDiscountType: alternativeDiscountType });
      
            // Compare using VAT-INCLUSIVE costs for accurate recommendation
            const selectedCost = cardDiscountAmount > 0 ? finalCostWithCard : finalMonthlyCost;
            const alternativeCost = alternativeResults.cardDiscountAmount > 0 ? alternativeResults.finalCostWithCard : alternativeResults.finalMonthlyCost;
      
            const difference = Math.abs(selectedCost - alternativeCost);
      
            const selectedPlanName = discountType === 'totalAmountBundle' ? 'ì´ì•¡ ê²°í•©í• ì¸' : 'ì •ì•¡ ê²°í•©í• ì¸';
            const alternativePlanName = alternativeDiscountType === 'totalAmountBundle' ? 'ì´ì•¡ ê²°í•©í• ì¸' : 'ì •ì•¡ ê²°í•©í• ì¸';
      
            if (difference < 100) {
                 return {
                    show: true,
                    title: "âœ… ê³ ê°ë‹˜ê»˜ ê°€ì¥ ìœ ë¦¬í•œ í• ì¸ ìœ í˜•ì…ë‹ˆë‹¤!",
                    body: `í˜„ì¬ ì„ íƒí•˜ì‹  '${selectedPlanName}'ì´ 'ì´ì•¡/ì •ì•¡ ê²°í•©' ì¤‘ì—ì„œ ê°€ì¥ ì¢‹ì€ ì¡°ê±´ì…ë‹ˆë‹¤.`,
                    actionHTML: ''
                };
            }
      
            if (selectedCost < alternativeCost) {
                return {
                    show: true,
                    title: "âœ… ê³ ê°ë‹˜ê»˜ ê°€ì¥ ìœ ë¦¬í•œ í• ì¸ ìœ í˜•ì…ë‹ˆë‹¤!",
                    body: `í˜„ì¬ ì„ íƒí•˜ì‹  '${selectedPlanName}'ì´ '${alternativePlanName}'ë³´ë‹¤ ì›” ${difference.toLocaleString()}ì› ë” ì €ë ´í•˜ì—¬ ê°€ì¥ ì¢‹ì€ ì¡°ê±´ì…ë‹ˆë‹¤.`,
                    actionHTML: ''
                };
            } else {
                const actionButton = `<button onclick="switchAndRecalculate('${alternativeDiscountType}')" class="btn-primary text-xs py-1 px-3">âš¡ ${alternativePlanName}ìœ¼ë¡œ ë³€ê²½ í›„ ë‹¤ì‹œ ê³„ì‚°</button>`;
                return {
                    show: true,
                    title: "âœ¨ ë” ìœ ë¦¬í•œ í• ì¸ ì¡°í•©ì„ ì°¾ì•˜ì–´ìš”!",
                    body: `ì ê¹! í• ì¸ ìœ í˜•ì„ <strong class="text-red-600">'${alternativePlanName}'</strong>ìœ¼ë¡œ ë³€ê²½í•˜ì‹œë©´ ì›” <strong class="text-red-600">${difference.toLocaleString()}ì›</strong>ì„ ì¶”ê°€ë¡œ ì•„ë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!`,
                    actionHTML: actionButton
                };
            }
        }
          
        window.switchAndRecalculate = function(newDiscountType) {
            document.querySelector(`input[name="discountType"][value="${newDiscountType}"]`).checked = true;
            document.querySelector(`input[name="discountType"][value="${newDiscountType}"]`).dispatchEvent(new Event('change'));
            calculateAndDisplayResults();
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }
          
        window.copyToClipboard = function(elementId, feedbackElementId) {
            const textarea = document.getElementById(elementId);
            if (!textarea) return;
             
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(textarea.value).then(() => {
                    const feedbackEl = document.getElementById(feedbackElementId);
                    if (feedbackEl) feedbackEl.textContent = 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
                    setTimeout(() => { if (feedbackEl) feedbackEl.textContent = ''; }, 2000);
                }).catch(err => {
                    console.error('Could not copy text: ', err);
                    const feedbackEl = document.getElementById(feedbackElementId);
                    if (feedbackEl) feedbackEl.textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
                    setTimeout(() => { if (feedbackEl) feedbackEl.textContent = ''; }, 2000);
                });
            } else {
                textarea.select();
                textarea.setSelectionRange(0, 99999);
                try {
                    document.execCommand('copy');
                    const feedbackEl = document.getElementById(feedbackElementId);
                    if (feedbackEl) feedbackEl.textContent = 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
                    setTimeout(() => { if (feedbackEl) feedbackEl.textContent = ''; }, 2000);
                } catch (err) {
                    const feedbackEl = document.getElementById(feedbackElementId);
                    if (feedbackEl) feedbackEl.textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
                    setTimeout(() => { if (feedbackEl) feedbackEl.textContent = ''; }, 2000);
                }
                window.getSelection().removeAllRanges();
            }
        }
          
        function setInitialDefaults() {
            // 1. Set new defaults
            document.querySelector('input[name="internetType"][value="bundle"]').checked = true;
            populateInternetPlans(); // Repopulate plans based on 'bundle' type
            internetPlanEl.value = "KTì¸í„°ë„·ë²ˆë“¤500mb+OTT";
            tvPlanEl.value = "KTTVì—ì„¼ìŠ¤";
            affiliateCardEl.value = 'samsung';

            // 2. Reset other fields
            additionalTvPlanEl.value = "none";
            phonePlanEl.value = "none";
            wifiRouterRentalEl.value = "1000";
            wifiRouterRentalEl.disabled = false;
            document.getElementById('installationFeeSelfPay').checked = false;
            const addonCheckboxes = document.querySelectorAll('#addonServicesContainer input[type="checkbox"]');
            addonCheckboxes.forEach(cb => cb.checked = false);
            document.querySelector('input[name="discountType"][value="totalAmountBundle"]').checked = true;
            document.querySelector('input[name="installationTime"][value="weekday"]').checked = true;
            if (dongpanSalesCheckKtEl) {
                dongpanSalesCheckKtEl.checked = false;
                if(dongpanPolicyDetailsContainerKtEl) dongpanPolicyDetailsContainerKtEl.classList.add('hidden');
            }

            // 3. Trigger change events to update UI and dependent logic
            affiliateCardEl.dispatchEvent(new Event('change')); // This populates and shows card tiers

            // Explicitly select the 300,000 KRW tier for Samsung card after the change event has populated the tiers
            setTimeout(() => {
                const samsung300kTier = document.querySelector('input[name="cardTier"][value="18000"]');
                if (samsung300kTier) {
                    samsung300kTier.checked = true;
                }
            }, 0);


            // 4. Collapse all details sections
            allDetailSections.forEach(section => {
                if (section.containerEl && section.toggleEl) {
                    section.toggleEl.checked = false;
                    section.containerEl.classList.add('hidden');
                }
            });

            // 5. Trigger other major change events
            document.querySelector('input[name="internetType"]:checked').dispatchEvent(new Event('change'));
            document.querySelector('input[name="discountType"]:checked').dispatchEvent(new Event('change')); //This also calls updateMobileLinesInputs

            // Final UI state updates
            updateDiscountTypeAvailability();
            updateCommissionSectionVisibility();
        }
          
        function resetCalculator() {
            setInitialDefaults();
            resultSection.classList.add('hidden');
            installationFeeSectionEl.classList.add('hidden');
            messageScriptSectionEl.classList.add('hidden');
            // (Request 2: Removed Gemini card hiding logic)
            expandedDetailsContainer.classList.add('hidden');
            toggleDetailsButton.innerHTML = 'ìƒì„¸ ìš”ê¸ˆ ë‚´ì—­ í¼ì³ë³´ê¸° â–¼';
            if(selectedWifiDetailsEl) selectedWifiDetailsEl.innerHTML = '';
            window.scrollTo(0, 0);
        }
          
        function updateDiscountTypeAvailability() {
            const internetOption = internetPlanEl.options[internetPlanEl.selectedIndex];
            const internetSpeed = internetOption && internetOption.value !== 'none' ? parseInt(internetOption.dataset.speed) : 0;
      
            let totalMobileCost = 0;
            document.querySelectorAll('.mobile-line-item').forEach((item, i) => {
                const select = item.querySelector(`#mobilePlan${i}`);
                totalMobileCost += parseInt(select.value) || 0;
            });
      
            const separateFamilyRadio = document.querySelector('input[name="discountType"][value="separateFamilyBundle"]');
            const separateFamilyLabel = separateFamilyRadio.parentElement;
      
            const isEligible = internetSpeed >= 500 && totalMobileCost >= 37000;
      
            if (isEligible) {
                separateFamilyRadio.disabled = false;
                separateFamilyLabel.classList.remove('text-slate-400', 'cursor-not-allowed');
            } else {
                separateFamilyRadio.disabled = true;
                separateFamilyLabel.classList.add('text-slate-400', 'cursor-not-allowed');
                if (separateFamilyRadio.checked) {
                    document.querySelector('input[name="discountType"][value="totalAmountBundle"]').checked = true;
                }
            }
        }
          
        // (Request 2: Removed callGeminiAPI function)
      
        function generatePersuasionScripts(currentInternet) {
            const internetSpeed = currentInternet.speed;
            // (Request 3: Rebranding)
            let tcoScript = `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] 3ë…„ ì•½ì •ì´ ë¶€ë‹´ìŠ¤ëŸ¬ìš°ì‹ ê°€ìš”?\n1ë…„ë§Œ ì¨ë„ ë” ì´ë“ì¸ ì´ìœ , ì •í™•íˆ ë¹„êµí•´ ë“œë¦´ê²Œìš”!\n\nì•ˆë…•í•˜ì„¸ìš”, ê³ ê°ë‹˜.\nì•½ì • ê¸°ê°„ ë•Œë¬¸ì— ê³ ë¯¼í•˜ì‹œëŠ” ë§ˆìŒ ì¶©ë¶„íˆ ì´í•´í•©ë‹ˆë‹¤.\n\nê·¸ë˜ì„œ KT ê³µì‹ ì•½ê´€ ê¸°ì¤€ìœ¼ë¡œ, 1ë…„ ì•½ì •ê³¼ 3ë…„ ì•½ì •ì˜ ì‹¤ì œ ì´ë¹„ìš©(TCO)ì„ ê¼¼ê¼¼í•˜ê²Œ ë¹„êµí•´ ë“œë ¸ìŠµë‹ˆë‹¤.\n\në†€ëê²Œë„, 3ë…„ ì•½ì •ì€ 1ë…„(13ê°œì›”)ë§Œ ì‚¬ìš©í•˜ê³  í•´ì§€í•´ë„ 1ë…„ ì•½ì •ë³´ë‹¤ í›¨ì”¬ ì €ë ´í•©ë‹ˆë‹¤.\nì‹¬ì§€ì–´ 1ë…„ 6ê°œì›”(18ê°œì›”) ì‚¬ìš© ì‹œ í˜œíƒ ì°¨ì´ëŠ” ë” ì»¤ì§‘ë‹ˆë‹¤.`;
            // (Request 3: Rebranding)
            let penaltyScript = `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] KT ìœ„ì•½ê¸ˆ, ì •í™•í•œ ê³„ì‚° ë°©ì‹ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?\nê³ ê°ë‹˜ì˜ ì•Œ ê¶Œë¦¬ë¥¼ ìœ„í•´, KTì˜ ê³µì‹ í• ì¸ë°˜í™˜ê¸ˆ(ìœ„ì•½ê¸ˆ) ì‚°ì • ë°©ì‹ì„ íˆ¬ëª…í•˜ê²Œ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.\n\n**1. KTì˜ ìƒˆë¡œìš´ ìœ„ì•½ê¸ˆ ê³µì‹**\nKTëŠ” ì•„ë˜ ê³µì‹ì— ë”°ë¼ ìœ„ì•½ê¸ˆì„ ì‚°ì •í•©ë‹ˆë‹¤.\nâ–¶ ìœ„ì•½ê¸ˆ = (ì´ í• ì¸ë°›ì€ ê¸ˆì•¡) x (1 - ê°ë©´ìœ¨)\n- ì´ í• ì¸ì•¡: (ì •ìƒê°€-ì•½ì •ê°€) x ì´ìš© ê°œì›” ìˆ˜\n- ê°ë©´ìœ¨: ì•½ì • ê¸°ê°„ì„ ì±„ìš¸ìˆ˜ë¡ ìœ„ì•½ê¸ˆì„ ê¹ì•„ì£¼ëŠ” ë¹„ìœ¨\n\n**2. ê¼­ ì•„ì…”ì•¼ í•  í•µì‹¬ í¬ì¸íŠ¸ 1: '180ì¼'ì˜ ë¹„ë°€**\nKT ì•½ê´€ìƒ, ê°€ì… í›„ ì²« 6ê°œì›”(180ì¼) ë™ì•ˆì€ ìœ„ì•½ê¸ˆ ê°ë©´ì´ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ê¸°ê°„ì—ëŠ” í• ì¸ë°›ì€ ê¸ˆì•¡ì´ ê·¸ëŒ€ë¡œ ìœ„ì•½ê¸ˆìœ¼ë¡œ ëˆ„ì ë˜ì–´, ì´ˆë°˜ í•´ì§€ ì‹œ ë¶€ë‹´ì´ ê°€ì¥ í½ë‹ˆë‹¤.\n\n**3. ê¼­ ì•„ì…”ì•¼ í•  í•µì‹¬ í¬ì¸íŠ¸ 2: '18ê°œì›”'ì˜ ìµœê³ ì ê³¼ ê·¸ ì´í›„**\nìœ„ì•½ê¸ˆì€ ì•½ì • ê¸°ê°„ì˜ ì ˆë°˜ì¸ 18ê°œì›” ì°¨ì— ìµœê³ ì ì— ë„ë‹¬í•˜ê³ , ê·¸ ì´í›„ë¶€í„°ëŠ” ê°ë©´ìœ¨ì´ í¬ê²Œ ë†’ì•„ì ¸ ìœ„ì•½ê¸ˆì´ ê³„ì†í•´ì„œ ê°ì†Œí•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.`;
      
            if (internetSpeed === 100) {
                tcoScript += `\n\n[ì¸í„°ë„· ë‹¨ë… (100Mbps) ì´ë¹„ìš© ë¹„êµ]\n--------------------------------\nğŸ†š 1ë…„ ì•½ì •\n- ì›” ìš”ê¸ˆ: 34,650ì›\n- 13ê°œì›” ì´ë¹„ìš©: ì•½ 450,450ì›\n- 18ê°œì›” ì´ë¹„ìš©: ì•½ 623,700ì›\n\nâœ… 3ë…„ ì•½ì • (ì¤‘ë„ í•´ì§€ ì‹œ)\n- ì›” ìš”ê¸ˆ: 22,000ì› (ì‚¬ì€í’ˆ 9ë§Œì› í¬í•¨)\n- 13ê°œì›” ì´ë¹„ìš©: ì•½ 333,600ì› (ğŸ‘‰ 11ë§Œì› ì´ìƒ ì´ë“!)\n- 18ê°œì›” ì´ë¹„ìš©: ì•½ 447,000ì› (ğŸ‘‰ 17ë§Œì› ì´ìƒ ì´ë“!)\n--------------------------------`;
                penaltyScript += `\n\n(ì˜ˆì‹œ: 100M ì¸í„°ë„·, ë§¤ë‹¬ 22,000ì› í• ì¸ ì‹œ)\n- 13ê°œì›” ì°¨ ìœ„ì•½ê¸ˆ: ì•½ 218,790ì›\n- 18ê°œì›” ì°¨ ìœ„ì•½ê¸ˆ: ì•½ 237,204ì› (ìµœê³ ì )\n- 24ê°œì›” ì°¨ ìœ„ì•½ê¸ˆ: ì•½ 210,672ì› (ë‹¤ì‹œ ê°ì†Œ ì‹œì‘)`;
            } else if (internetSpeed === 500) {
                tcoScript += `\n\n[ì¸í„°ë„· ë‹¨ë… (500Mbps) ì´ë¹„ìš© ë¹„êµ]\n--------------------------------\nğŸ†š 1ë…„ ì•½ì •\n- ì›” ìš”ê¸ˆ: 41,800ì›\n- 13ê°œì›” ì´ë¹„ìš©: ì•½ 543,400ì›\n- 18ê°œì›” ì´ë¹„ìš©: ì•½ 752,400ì›\n\nâœ… 3ë…„ ì•½ì • (ì¤‘ë„ í•´ì§€ ì‹œ)\n- ì›” ìš”ê¸ˆ: 33,000ì› (ì‚¬ì€í’ˆ 14ë§Œì› í¬í•¨)\n- 13ê°œì›” ì´ë¹„ìš©: ì•½ 439,400ì› (ğŸ‘‰ 10ë§Œì› ì´ìƒ ì´ë“!)\n- 18ê°œì›” ì´ë¹„ìš©: ì•½ 577,000ì› (ğŸ‘‰ 17ë§Œì› ì´ìƒ ì´ë“!)\n--------------------------------`;
                penaltyScript += `\n\n(ìœ„ì•½ê¸ˆ ì˜ˆì‹œëŠ” 100M ê¸°ì¤€ì´ë©°, 500Më„ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.)`;
            }
      
            tcoScript += `\n\nâœ¨ ê°€ì¥ ì¤‘ìš”í•œ í¬ì¸íŠ¸!\n3ë…„ ì•½ì •ì€ ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ìœ„ì•½ê¸ˆì´ í¬ê²Œ ì¤„ì–´ë“­ë‹ˆë‹¤. íŠ¹íˆ ì•½ì • ê¸°ê°„ì˜ ì ˆë°˜ì¸ 1ë…„ 6ê°œì›”(18ê°œì›”)ì´ ì§€ë‚˜ë©´ ë¶€ë‹´ì´ í›¨ì”¬ ëœí•´ì§€ê¸° ë•Œë¬¸ì—, ì˜ˆìƒë³´ë‹¤ ì˜¤ë˜ ì‚¬ìš©í•˜ì‹¤ìˆ˜ë¡ 3ë…„ ì•½ì •ì´ ì••ë„ì ìœ¼ë¡œ ìœ ë¦¬í•©ë‹ˆë‹¤.\n\nâ€» TCO(ì´ ì†Œìœ  ë¹„ìš©)ë€? ì›” ìš”ê¸ˆ, ì‚¬ì€í’ˆ í˜œíƒ, ì¤‘ë„ í•´ì§€ ì‹œ ìœ„ì•½ê¸ˆê¹Œì§€ ëª¨ë‘ ê³„ì‚°í–ˆì„ ë•Œ, ê³ ê°ë‹˜ê»˜ì„œ ì‹¤ì œë¡œ ë¶€ë‹´í•˜ì‹œëŠ” ì´ ê¸ˆì•¡ì…ë‹ˆë‹¤.\nâ€» ì¶œì²˜: kt.com ë²•ì ê³ ì§€ > ì´ˆê³ ì†ì¸í„°ë„· ì´ìš©ì•½ê´€\n\nê²°ë¡ ì ìœ¼ë¡œ, í˜¹ì‹œ ëª¨ë¥¼ ìƒí™©ìœ¼ë¡œ ì¤‘ë„ì— í•´ì§€í•˜ì‹œë”ë¼ë„ 3ë…„ ì•½ì •ìœ¼ë¡œ ì‹œì‘í•˜ì‹œëŠ” ê²ƒì´ ëª¨ë“  ë©´ì—ì„œ ê°€ì¥ ê²½ì œì ì¸ ì„ íƒì…ë‹ˆë‹¤. ğŸ˜Š`;
            penaltyScript += `\n\n**4. ê²°ë¡ : ê°€ì¥ í•©ë¦¬ì ì¸ ì„ íƒê³¼ 'ì•ˆì „ì¥ì¹˜'**\nì´ëŸ¬í•œ êµ¬ì¡° ë•Œë¬¸ì—, 1ë…„ ì´ìƒ ì‚¬ìš©í•˜ì‹¤ ê³„íšì´ë¼ë©´ ì•ì„œ ë³´ë‚´ë“œë¦° 'TCO ë¹„êµ' ìë£Œì—ì„œ ë³´ì…¨ë“¯ 3ë…„ ì•½ì •ì´ ì••ë„ì ìœ¼ë¡œ ìœ ë¦¬í•©ë‹ˆë‹¤.\n\në˜í•œ, ì´ì‚¬ ì‹œ ì„¤ì¹˜ ë¶ˆê°€ ë“± ì•½ê´€ì— ëª…ì‹œëœ ì •ë‹¹í•œ ì‚¬ìœ ê°€ ë°œìƒí•˜ë©´ ìœ„ì•½ê¸ˆ ì—†ì´ í•´ì§€ê°€ ê°€ëŠ¥í•œ 'ìœ„ì•½ê¸ˆ ë©´ì œ'ë¼ëŠ” ì•ˆì „ì¥ì¹˜ë„ ë§ˆë ¨ë˜ì–´ ìˆìœ¼ë‹ˆ ì•ˆì‹¬í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.\n\nâ€» ì¶œì²˜: kt.com ë²•ì ê³ ì§€ > ì´ˆê³ ì†ì¸í„°ë„· ì´ìš©ì•½ê´€`;
             
            // (Request 3: Rebranding)
            const waiverScript = `[ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°] ê³ ê°ë‹˜ì˜ ê¶Œë¦¬, 'ìœ„ì•½ê¸ˆ ë©´ì œ ì¡°ê±´' ìƒì„¸ ì•ˆë‚´\n\nì•ˆë…•í•˜ì„¸ìš”, ê³ ê°ë‹˜.\n3ë…„ ì•½ì • ê¸°ê°„ ì¤‘ ì˜ˆê¸°ì¹˜ ëª»í•œ ìƒí™©ì´ ë°œìƒí• ê¹Œ ê±±ì •ë˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê³ ê°ë‹˜ì˜ ì•Œ ê¶Œë¦¬ë¥¼ ìœ„í•´, ì•½ê´€ì— ëª…ì‹œëœ 'ìœ„ì•½ê¸ˆ ë©´ì œ(í•©ë²•ì  í•´ì§€)' ì¡°ê±´ë“¤ì„ íˆ¬ëª…í•˜ê²Œ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.\n\nì•„ë˜ ì¡°ê±´ì— í•´ë‹¹ë  ê²½ìš°, ìœ„ì•½ê¸ˆ ì—†ì´ ê³„ì•½ì„ í•´ì§€í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**1. ì„œë¹„ìŠ¤ í’ˆì§ˆì´ ê¸°ì¤€ì— ë¯¸ë‹¬í•˜ëŠ” ê²½ìš°**\n- ì¸í„°ë„· ì†ë„ê°€ 'ìµœì €ë³´ì¥ì†ë„(SLA)' ê¸°ì¤€ì— ì§€ì†ì ìœ¼ë¡œ ë¯¸ë‹¬ (ì›” 5íšŒ ì´ìƒ ì¸¡ì • ê¸°ë¡ í•„ìš”)\n- ì„œë¹„ìŠ¤ ì¥ì• ë¡œ A/Së¥¼ ì›” 3íšŒ ì´ìƒ ë°›ì•˜ìœ¼ë‚˜ ê°œì„ ë˜ì§€ ì•Šì„ ê²½ìš°\n- ì›” ëˆ„ì  ì¥ì•  ì‹œê°„ì´ í†µì‹ ì‚¬ ê¸°ì¤€(KT/LGU+ 48ì‹œê°„)ì„ ì´ˆê³¼í•œ ê²½ìš°\n\n**2. ì´ì‚¬ ë“±ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì´ìš©ì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°**\n- ì´ì‚¬í•œ ì¥ì†Œê°€ í†µì‹ ì‚¬ì˜ ì„œë¹„ìŠ¤ ì œê³µ ë¶ˆê°€ ì§€ì—­ì¸ ê²½ìš° (ê°€ì¥ ì¼ë°˜ì ì¸ ë©´ì œ ì‚¬ìœ )\n- ì´ì‚¬í•œ ê±´ë¬¼ì´ íŠ¹ì • í†µì‹ ì‚¬ì™€ ë…ì  ê³„ì•½ ìƒíƒœë¼ íƒ€ì‚¬ ì¸í„°ë„· ì„¤ì¹˜ê°€ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°\n\n**3. ê°€ì…ì ê°œì¸ì˜ í”¼ì¹˜ ëª»í•  ì‚¬ì •ì´ ìƒê¸´ ê²½ìš°**\n- ê³„ì•½ì ë³¸ì¸ì´ êµ°ì— ì…ëŒ€í•˜ëŠ” ê²½ìš° (ì…ì˜í†µì§€ì„œ ë“± ì¦ë¹™ ì„œë¥˜ í•„ìš”)\n- ê³„ì•½ìê°€ ì‚¬ë§í•œ ê²½ìš°\n\nì´ì²˜ëŸ¼ ê³ ê°ë‹˜ì„ ë³´í˜¸í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ 'ì•ˆì „ì¥ì¹˜'ê°€ ë§ˆë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\nì´ëŸ¬í•œ ì¡°ê±´ë“¤ì„ í™•ì¸í•˜ì‹œê³ , ê°€ì¥ ê²½ì œì ì¸ 3ë…„ ì•½ì •ì„ ì•ˆì‹¬í•˜ê³  ì„ íƒí•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.\n\nâ€» ì¶œì²˜: í†µì‹ ì‚¬ ì´ìš©ì•½ê´€ ë° ë°©ì†¡í†µì‹ ìœ„ì›íšŒ ê´€ë ¨ ê·œì •`;
      
            tcoComparisonScriptEl.value = tcoScript;
            penaltyAnalysisScriptEl.value = penaltyScript;
            penaltyWaiverScriptEl.value = waiverScript;
      
            // (Request 3: Rebranding)
            if (usimCompleteScriptEl) {
                usimCompleteScriptEl.value = ` ìœ ì‹¬ ì ‘ìˆ˜ ì™„ë£Œ ì•ˆë‚´
    ì•ˆë…•í•˜ì„¸ìš”, ê³ ê°ë‹˜.
    ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°ì…ë‹ˆë‹¤.
    âœ… ìœ ì‹¬ë™íŒ ì ‘ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆì–´ìš”, ì•„ë˜ ë‚´ìš©ì€ ê³„ì•½ì„œì™€ ë™ì¼í•œ íš¨ë ¥ì´ ìˆìœ¼ë‹ˆ ê¼¼ê¼¼íˆ ì½ì–´ì£¼ì„¸ìš”.
    âš ï¸ 12ê°œì›”/24ê°œì›” ì•½ì •ì´ë©°, ì•„ë˜ì™€ ê°™ì€ ìƒí™©ì— í•´ë‹¹í•˜ë©´ ë°›ìœ¼ì…¨ë˜ ì‚¬ì€í’ˆì€ í™˜ìˆ˜ ë©ë‹ˆë‹¤.
    â‘  183ì¼ ì´ë‚´ í•´ì§€ ë° ìš”ê¸ˆì œ í•˜í–¥
    â‘¡ ê°œí†µ í›„ ë¬´í†µí™” ëŒ€ìƒ
    â‘¢ 183ì¼ ì´ë‚´ ëª…ì˜ë³€ê²½ í†µì‹ ì‚¬ ë³€ê²½ ì‹œ
    â‘£ 183ì¼ ì´ë‚´ ê²°í•© í•´ì§€
    â‘¤ ì¸í„°ë„· ê°œí†µ í›„ ìµì›” ë§ì¼ê¹Œì§€ ê¼­ ìœ ì‹¬ ê°œí†µì´ í•„ìš”í•´ìš”!
    âš ï¸ ìœ ì‹¬ ê°œí†µ ì™„ë£Œ ë˜ë©´ ì‚¬ìš©í•˜ì…¨ë˜ ìœ ì‹¬ê³¼ êµì²´í•˜ì—¬ ê¸°ê¸° ì „ì›ì„ 3~4íšŒ ê»ë‹¤ í‚¤ì‹œë©´ ë©ë‹ˆë‹¤!
    âœ…ì‚¬ì€í’ˆì€ ì„¤ì¹˜ í›„ 7ì¼ ì´ë‚´ ìë™ìœ¼ë¡œ ì§€ê¸‰ë˜ë‚˜ í‰ì¼ê¸°ì¤€ 5ì‹œ ì´ì „ ê°œí†µ ë°›ì•˜ë‹¤ê³  ë¬¸ì ì£¼ì‹œë©´ ë‹¹ì¼ì…ê¸ˆ ë„ì›€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
    ğŸ”Š í•´ë‹¹ ì—°ë½ì²˜ë¡œ ì—°ë½ì´ ì–´ë ¤ìš¸ ê²½ìš° ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”! ì•„ë˜ ëŒ€í‘œë²ˆí˜¸ë¡œ ë¬¸ì˜ì£¼ì‹œë©´ í™•ì¸í•˜ì—¬ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì‹œê°„ ì–‘í•´ ë¶€íƒë“œë ¤ìš”.
    [ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°ë¥¼ ì†Œê°œí•´ì£¼ì„¸ìš”]
    ì§€ì¸ì´ ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„°ì—ì„œ ì¸í„°ë„· ì„¤ì¹˜í•˜ë©´ ì†Œê°œí•´ì£¼ì‹  ë¶„ì—ê²Œ 3ë§Œì› ë“œë ¤ìš”.
    â–¶ ì§€ì¸ì—ê²Œ ì¶”ì²œí•˜ê³  3O,OOOì› ë°›ê¸° (â†“)
    https://get.miso.kr/pZbfsUPthzb
    ì›¨ì´íŒ… ì¸í„°ë„· í†µí•©ì ‘ìˆ˜ì„¼í„° ë“œë¦¼.
    â˜ ëŒ€í‘œë²ˆí˜¸ 1577-8808 ì˜¤ì „ 9ì‹œ ~ ì˜¤í›„ 10ì‹œ (ì—°ì¤‘ë¬´íœ´)`;
            }
             
            if (sensitiveInfoLinkScriptEl) {
                sensitiveInfoLinkScriptEl.value = `[KT] ì•„ë˜ ë§í¬ì— ê³ ê°ë‹˜ì˜ ë¯¼ê°ì •ë³´ë¥¼ ì…ë ¥í•˜ì‹œë©´ KTë¡œ ê³ ê°ë‹˜ì˜ ë¯¼ê°ì •ë³´ê°€ ì§ì ‘ ì „ì†¡í›„ ì ‘ìˆ˜ ë©ë‹ˆë‹¤.
    ì…ë ¥í›„ ì ‘ìˆ˜ ì™„ë£Œ ë¼ê³  ë¬¸ì ì£¼ì‹œë©´ ë‹´ë‹¹ ìƒë‹´ì›ì´ ì ‘ìˆ˜ í™•ì¸í›„ í•„ìˆ˜ ì•ˆë‚´ì‚¬í•­ ì•ˆë‚´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
    https://kt-sensitiveinfo.com/`;
            }
        }
      
      
        window.onload = setInitialDefaults;
    </script>
</body>
</html>